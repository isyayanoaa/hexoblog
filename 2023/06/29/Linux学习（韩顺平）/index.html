

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307030854652.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Klay">
  <meta name="keywords" content="">
  
    <meta name="description" content="Linux的文件系统是采用级层式的树状目录结构，在此结构上的最上层是根目录“&#x2F;“，然后在此目录下在创建其他的目录。 深刻理解linux树状文件目录是非常重要的 记住一句很经典的话：在LInux世界里，一切皆文件">
<meta property="og:type" content="article">
<meta property="og:title" content="linux韩顺平">
<meta property="og:url" content="http://klayforever.cn/2023/06/29/Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E9%9F%A9%E9%A1%BA%E5%B9%B3%EF%BC%89/index.html">
<meta property="og:site_name" content="Myshop">
<meta property="og:description" content="Linux的文件系统是采用级层式的树状目录结构，在此结构上的最上层是根目录“&#x2F;“，然后在此目录下在创建其他的目录。 深刻理解linux树状文件目录是非常重要的 记住一句很经典的话：在LInux世界里，一切皆文件">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307060853555.png">
<meta property="og:image" content="f:\Typora%E7%AC%94%E8%AE%B0\Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E9%9F%A9%E9%A1%BA%E5%B9%B3%EF%BC%89.assets\image-20230529170744717.png">
<meta property="og:image" content="f:\Typora%E7%AC%94%E8%AE%B0\Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E9%9F%A9%E9%A1%BA%E5%B9%B3%EF%BC%89.assets\image-20230529171033651.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131100781.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131101406.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131101160.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131102323.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040946819.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040947523.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040948096.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040948666.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040948564.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040951719.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040951176.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040952057.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062104221.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062113549.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062116728.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062117667.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062118402.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062119794.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307201600658.png">
<meta property="og:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307201602816.png">
<meta property="og:image" content="c:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\image-20230725100909441.png">
<meta property="og:image" content="c:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\image-20230725100936162.png">
<meta property="og:image" content="c:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\image-20230725100555724.png">
<meta property="article:published_time" content="2023-06-29T07:30:33.112Z">
<meta property="article:modified_time" content="2023-10-10T06:05:55.460Z">
<meta property="article:author" content="Klay">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307060853555.png">
  
  
  
  <title>linux韩顺平 - Myshop</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"klayforever.cn","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>klay4ever</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>主页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于我</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="linux韩顺平"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Klay
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-06-29 15:30" pubdate>
          2023年6月29日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          61k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          511 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">linux韩顺平</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：10 天前
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <ul>
<li>Linux的文件系统是采用级层式的树状目录结构，在此结构上的最上层是根目录“&#x2F;“，然后在此目录下在创建其他的目录。</li>
<li>深刻理解linux树状文件目录是非常重要的</li>
<li>记住一句很经典的话：在LInux世界里，一切皆文件</li>
</ul>
<span id="more"></span>

<h1 id="Linux学习（韩顺平）"><a href="#Linux学习（韩顺平）" class="headerlink" title="Linux学习（韩顺平）"></a>Linux学习（韩顺平）</h1><h2 id="一、Linux目录结构（重点）"><a href="#一、Linux目录结构（重点）" class="headerlink" title="一、Linux目录结构（重点）"></a>一、Linux目录结构（重点）</h2><h3 id="1-1基本介绍"><a href="#1-1基本介绍" class="headerlink" title="1.1基本介绍"></a>1.1基本介绍</h3><ul>
<li>linux的文件系统是采用级层式的树状目录结构，在此结构上的最上层是根目录“&#x2F;“，然后在此目录下在创建其他的目录。</li>
<li>深刻理解linux树状文件目录是非常重要的</li>
<li>记住一句很经典的话：在Linux世界里，一切皆文件</li>
</ul>
<h3 id="2-2具体的目录结构"><a href="#2-2具体的目录结构" class="headerlink" title="2.2具体的目录结构"></a>2.2具体的目录结构</h3><ul>
<li><p>&#x2F;bin 【常用】（&#x2F;usr&#x2F;bin、&#x2F;uer&#x2F;local&#x2F;bin)</p>
<p>是Binary的缩写，这个目录存放着最常使用的命令，例如ls cd cp等指令</p>
</li>
<li><p>&#x2F;sbin （&#x2F;usr&#x2F;sbin、&#x2F;usr&#x2F;local&#x2F;sbin）</p>
</li>
</ul>
<p>​		s就是Super user的意思，这里存放的是系统管理员使用的系统管理程序</p>
<p>​		里边存放管理员权限才能用的指令，例如reboot，shutdown等</p>
<ul>
<li><p>&#x2F;home 【常用】</p>
<p>存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录是以用户的账号命名</p>
</li>
<li><p>root 【常用】</p>
</li>
</ul>
<p>​		该目录为系统管理员，也称作超级权限者的用户主目录</p>
<ul>
<li><p>&#x2F;lib 系统开机所需要的最基本的动态链接共享库，起作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库</p>
</li>
<li><p>&#x2F;lost+found 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件</p>
</li>
<li><p>etc 【常用】</p>
<p>所有的系统管理所需要的配置文件和子目录，比如安装mysql数据库，my.conf</p>
</li>
<li><p>&#x2F;usr 【常用】</p>
<p>这是一个非常重要的目录，用户很多应用程序都放在这个目录下，类似于windows下的program files目录。&#x2F;usr中有bin和sbin，usr中的bin和sbin命令是应用级命令，是系统必备的命令，但非必需的命令，例如bin下的vi,ssh,gcc,ping等是usr&#x2F;bin下的，sendmail、samba、netconfig等是usr&#x2F;sbin下的指令，是管理员级别的指令。</p>
<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307060853555.png" srcset="/img/loading.gif" lazyload alt="image-20230706085339834"></p>
</li>
<li><p>&#x2F;boot 【常用】</p>
<p>存放的是启动Linux时使用的一些核心文件，包括一些链接文件以及镜像文件</p>
</li>
<li><p>&#x2F;proc 这个目录是一个虚拟的目录，他是系统内存的映射，访问这个目录来获取系统信息</p>
</li>
<li><p>&#x2F;srv service缩写，该目录存放一些服务器启动后需要提取的数据</p>
</li>
<li><p>&#x2F;sys 这是linux2.6内核的一个很大的变化，该目录下安装了2.6内核中新出现的一个文件系统sysfs</p>
</li>
<li><p>&#x2F;tmp这个目录是用来存放一些临时文件的</p>
</li>
<li><p>&#x2F;dev</p>
</li>
</ul>
<p>​		类似于windows的设备管理器，把所有的硬件用文件的形式存储</p>
<ul>
<li><p>&#x2F;media[常用]linux系统会自动识别一些设备，例如U盘，光驱等等，当识别后，linux会把识别的设备挂载到这个目录下</p>
</li>
<li><p>&#x2F;mnt [常用]</p>
<p>系统提供该目录是为了让用户临时挂载别的系统文件，我们可以将外部的存储挂载在&#x2F;mnt&#x2F;上，然后进入该目录就可以查看里面的内容了。D:&#x2F;mushare</p>
</li>
<li><p>&#x2F;opt 这是给主机额外的安装软件所存放的目录。如安装ORACLE数据库就可以放到该目录下。默认为空</p>
</li>
<li><p>&#x2F;usr&#x2F;local【常用】</p>
<p>这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码的方式安装的程序</p>
</li>
<li><p>&#x2F;var 【常用】</p>
<p>这个目录中存放着在不断扩充的东西 ，习惯的将经常修改的目录放在这个目录下。包括各种日志文件</p>
</li>
<li><p>&#x2F;selinux 【security-enhanced linux】</p>
<p>SELinux是一种安全子系统，他能控制程序自能访问特定的文件，有三种工作模式，可以自行设置</p>
</li>
</ul>
<h2 id="二、vi和vim编辑器"><a href="#二、vi和vim编辑器" class="headerlink" title="二、vi和vim编辑器"></a>二、vi和vim编辑器</h2><h3 id="2-1-vi和vim的基本介绍"><a href="#2-1-vi和vim的基本介绍" class="headerlink" title="2.1 	vi和vim的基本介绍"></a>2.1 	vi和vim的基本介绍</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">Linux系统会内置<span class="hljs-keyword">vi</span>文本编辑器<br><br>Vim具有程序编辑的能力，可以看做是Vi的增强版本，可以主动的以字体颜色辨别语法的正确性，方便程序设计。代码补完、编译错误跳转等方便编程的功能相当丰富，在程序员中被广泛使用。（<span class="hljs-keyword">vim</span>就是<span class="hljs-keyword">vi</span>的增强版）<br></code></pre></td></tr></table></figure>

<p>Linux系统会内置vi文本编辑器</p>
<p>Vim具有程序编辑的能力，可以看做是Vi的增强版本，可以主动的以字体颜色辨别语法的正确性，方便程序设计。代码补完、编译错误跳转等方便编程的功能相当丰富，在程序员中被广泛使用。（vim就是vi的增强版）</p>
<h3 id="2-2-vi和vim常用的三种模式"><a href="#2-2-vi和vim常用的三种模式" class="headerlink" title="2.2	 vi和vim常用的三种模式"></a>2.2	 vi和vim常用的三种模式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-number">1</span>、正常模式<br><br>	以vim打开一个档案就直接进入一般模式了（这是默认的模式）<br>	在这个模式中，可以使用【上下左右】键来移动光标<br>	可以使用【删除字符】或【删除整行】来处理档案内容<br>	也可以使用【复制、粘贴】来处理你的文件数据。<br><br><span class="hljs-number">2</span>、插入模式<br><br>	按下<span class="hljs-selector-tag">i</span>，<span class="hljs-selector-tag">I</span>，o，O，<span class="hljs-selector-tag">a</span>，<span class="hljs-selector-tag">A</span>，r，R等任何一个字母之后才会进入编辑模式，一般来说按<span class="hljs-selector-tag">i</span>就可<br><br><span class="hljs-number">3</span>、命令行模式<br><br>	在这个模式中，可以提供你相关指令，完成读取、存盘、替换、离开vim、显示行号等动作则是在此模式中达成的！<br></code></pre></td></tr></table></figure>

<h3 id="2-3-vi-和-vim-基本使用"><a href="#2-3-vi-和-vim-基本使用" class="headerlink" title="2.3. 	vi 和 vim 基本使用"></a>2.3. 	vi 和 vim 基本使用</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs arduino">案例：使用 vim 开发一个 Hello.java 程序<br><br>使用xshell登录编写(因为以后工作都是这样写的)：<br>	首先输入：vi Hello.java 或者 vim Hello.<span class="hljs-built_in">java</span> (使用vim编辑器编写java程序)<br>	回车后进入正常模式<br>	之后输入i等字母，进入插入模式(编辑模式)<br>	然后可是写代码：<br>		<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Hello</span>&#123;<br>			<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span></span>&#123;<br>				System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;Hello World&quot;</span>);<br>			&#125;<br>		&#125;<br>	然后保存，怎么保存？<br>		先 按 Esc 回到正常模式<br>		然后输入冒号:  接着输入<span class="hljs-built_in">wq</span> (代表写入并退出write quit)<br>		回车<br>	结束<br>	<br>	输入ls命令，就可以看到Hello.java文件<br>	还想修该文件：再输入 vim Hello.<span class="hljs-built_in">java</span> (按Tab键 代码补全) 就有回到了上面<br></code></pre></td></tr></table></figure>

<h3 id="2-4各种模式的相互切换"><a href="#2-4各种模式的相互切换" class="headerlink" title="2.4	各种模式的相互切换"></a>2.4	各种模式的相互切换</h3><p><img src="F:\Typora笔记\Linux学习（韩顺平）.assets\image-20230529170744717.png" srcset="/img/loading.gif" lazyload alt="image-20230529170744717"></p>
<h3 id="2-5vi和vim快捷键"><a href="#2-5vi和vim快捷键" class="headerlink" title="2.5	vi和vim快捷键"></a>2.5	vi和vim快捷键</h3><table>
<thead>
<tr>
<th>快捷键</th>
<th>模式</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><code>yy</code></td>
<td>正常模式</td>
<td>复制当前行</td>
</tr>
<tr>
<td><code>p</code></td>
<td>正常模式</td>
<td>粘贴</td>
</tr>
<tr>
<td><code>5yy</code></td>
<td>正常模式</td>
<td>复制当前行向下的5行</td>
</tr>
<tr>
<td><code>dd</code></td>
<td>正常模式</td>
<td>删除当前行</td>
</tr>
<tr>
<td><code>5dd</code></td>
<td>正常模式</td>
<td>删除当前行向下的5行</td>
</tr>
</tbody></table>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs routeros">在文件中查找某个单词：<br>	初始在正常模式，输入/，进入命令行模式，然后输入要查找的单词，回车查找<br>	输入n查找到下一个<br>	想查找另一个单词：输入/，重复上述即可<br><br>正常模式---&gt;命令行模式<br>给文件每行设置行号：<br>	先冒号: <br>	然后<span class="hljs-built_in">set</span> nu  (<span class="hljs-built_in">set</span> number)<br>	回车<br>取消行号：<br>	先冒号:<br>	然后<span class="hljs-built_in">set</span> nonu<br>	回车<br><br>快捷键到该文档的最首行(正常模式)：gg<br><br>快捷键到该文档的最末行(正常模式)：G<br><br>撤销动作(比如删除某一行，发现删错了，然后恢复这一行)(正常模式)：u<br><br>在某个文件中，想让光标移动到第20行(正常模式)：输入20，再输入 shift+g<br><br>更多的快捷键：有整理的文档和下图<br><br></code></pre></td></tr></table></figure>

<p><img src="F:\Typora笔记\Linux学习（韩顺平）.assets\image-20230529171033651.png" srcset="/img/loading.gif" lazyload alt="image-20230529171033651"></p>
<h2 id="三、Linux-实操篇-开机、重启和用户登录注销"><a href="#三、Linux-实操篇-开机、重启和用户登录注销" class="headerlink" title="三、Linux 实操篇-开机、重启和用户登录注销"></a>三、Linux 实操篇-开机、重启和用户登录注销</h2><h3 id="3-1关机重启命令"><a href="#3-1关机重启命令" class="headerlink" title="3.1	关机重启命令"></a>3.1	关机重启命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th align="center">介绍</th>
</tr>
</thead>
<tbody><tr>
<td>shutdown -h now</td>
<td align="center">立即关机(h—&gt;halt停止)</td>
</tr>
<tr>
<td>halt</td>
<td align="center">立即关机，同上</td>
</tr>
<tr>
<td>shutdown</td>
<td align="center">1分钟后关机</td>
</tr>
<tr>
<td>shutdown -h 1</td>
<td align="center">同上，给每一个登录到Linux系统的用户发一条消息：1分钟后关机</td>
</tr>
<tr>
<td>shutdown -h 2</td>
<td align="center">2分钟后关机</td>
</tr>
<tr>
<td>shutdonw -r now</td>
<td align="center">现在重新启动(r—&gt;rboot重启)</td>
</tr>
<tr>
<td>reboot</td>
<td align="center">现在重新启动，同上</td>
</tr>
<tr>
<td>sync</td>
<td align="center">把内存的数据同步到磁盘</td>
</tr>
<tr>
<td>注意</td>
<td align="center">不管是重启还是关机，首先要运行 sync 命令，把内存中的数据写到磁盘中；目前的 shutdown&#x2F;reboot&#x2F;halt 等命令均已经在关机前进行了sync，但还是手动执行一下sync保险</td>
</tr>
</tbody></table>
<h3 id="3-2用户登录和注销"><a href="#3-2用户登录和注销" class="headerlink" title="3.2	用户登录和注销"></a>3.2	用户登录和注销</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">用户登录：	<br>	登录时尽量少用 root 帐号登录，因为它是系统管理员，最大的权限，避免操作失误。<br>	而且以后也用不到root，除非你是系统管理员。<br>	可以利用普通用户登录，登录后再用”su - 用户名’命令来切换成系统管理员身份<br>注销：<br>	在提示符下输入 <span class="hljs-built_in">logout</span>  即可注销用户<br>	<br>	注意：<span class="hljs-built_in">logout</span> 注销指令在图形运行级别无效，在运行级别 3 下有效.<br>	运行级别后面讲。<br><br>验证：<br>	使用普通用户登录<br>	使用Xshell远程登陆Linux<br>	输入命令：su - root   变为root用户<br>	再输入：<span class="hljs-built_in">logout</span>  注销用户回到普通用户<br>	再输入：<span class="hljs-built_in">logout</span> 退出系统<br><br>	注意：退出系统后，如何要重新连接到Linux，双击左栏会话再重新输入即可。<br></code></pre></td></tr></table></figure>

<h2 id="四、Linux-实操篇-用户管理"><a href="#四、Linux-实操篇-用户管理" class="headerlink" title="四、Linux 实操篇-用户管理"></a>四、Linux 实操篇-用户管理</h2><h3 id="4-1-基本介绍"><a href="#4-1-基本介绍" class="headerlink" title="4.1	.基本介绍"></a>4.1	.基本介绍</h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xquery">Linux 系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。<br><br>一个Linux系统中只有一<span class="hljs-built_in">个root</span>用户，但是<span class="hljs-built_in">由root</span>用户可以创建多个其他用户，可以给这些用户分配权限，<br>其中每个用户会对应一个目录，这个目录叫做home目录。<br></code></pre></td></tr></table></figure>

<h3 id="4-2添加用户"><a href="#4-2添加用户" class="headerlink" title="4.2	添加用户"></a>4.2	添加用户</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arduino">语法：useradd 用户名<br>比如：useradd klay 注册新用户klay<br><br>注意：当创建用户成功后，会自动创建和用户同名的家目录，该用户的家目录默认在home目录下<br><br>也可以给新用户指定家目录：useradd -d 指定目录 新用户名<br>比如：useradd -d /home/test king 创建一个新用户king，其家目录test<br></code></pre></td></tr></table></figure>

<h3 id="4-3指定-x2F-修改密码"><a href="#4-3指定-x2F-修改密码" class="headerlink" title="4.3	指定&#x2F;修改密码"></a>4.3	指定&#x2F;修改密码</h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs coq">语法：passwd 用户名  给某个用户设置/更改密码<br>注意：要写用户名。不写用户名默认设置当前用户，如果当前用户是root就麻烦了。<br>比如：给milan设置密码 <br><br>命令：pwd ---&gt;显示当前用户所在目录 <span class="hljs-keyword">Print</span> Working Directory<br></code></pre></td></tr></table></figure>

<h3 id="4-4删除用户"><a href="#4-4删除用户" class="headerlink" title="4.4	删除用户"></a>4.4	删除用户</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">语法： userdel 用户名<br><br>普通用户不能删除别的用户，只有root用户可以；并且不能自己删除自己<br><br><span class="hljs-number">1</span>.删掉用户，但是保留其家目录：<br>	userdel 用户名<br><span class="hljs-number">2</span>.将用户和其家目录一起删除(这个操作要谨慎)：<br>	<span class="hljs-keyword">user</span> <span class="hljs-title">-r</span> 用户名<br><br>一般情况，建议保留家目录(不删除)<br></code></pre></td></tr></table></figure>

<h3 id="4-5查询用户信息"><a href="#4-5查询用户信息" class="headerlink" title="4.5	查询用户信息"></a>4.5	查询用户信息</h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xquery">语法<span class="hljs-built_in">：id</span> 用户名<span class="hljs-built_in"></span><br><span class="hljs-built_in">id</span><span class="hljs-built_in"> root</span>:<br>uid=<span class="hljs-number">0</span><span class="hljs-built_in">(root</span>) gid=<span class="hljs-number">0</span><span class="hljs-built_in">(root</span>) 组=<span class="hljs-number">0</span><span class="hljs-built_in">(root</span>)  userid是<span class="hljs-number">0</span> gruopid<span class="hljs-built_in">组id</span>是<span class="hljs-number">0</span> 所在组<span class="hljs-number">0</span><br><br>当用户不存在：返回无此用户 no such user<br></code></pre></td></tr></table></figure>

<h3 id="4-6切换用户"><a href="#4-6切换用户" class="headerlink" title="4.6	切换用户"></a>4.6	切换用户</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">在操作 Linux 中，如果当前用户的权限不够，可以通过 su - 指令，切换到高权限用户(比如 root)<br><br>语法： su - 切换用户名<br><br>创建一个用户lucy，指定密码，然后切换到lucy<br><br>注意：<br>	<span class="hljs-number">1</span>.从权限高的用户切换到权限低的用户，不需要输入密码，反之需要。<br>	<span class="hljs-number">2</span>.当需要返回到原来用户时，使用 <span class="hljs-keyword">exit</span>/logout 指令<br></code></pre></td></tr></table></figure>

<h3 id="4-7查看当前用户-x2F-登录用户"><a href="#4-7查看当前用户-x2F-登录用户" class="headerlink" title="4.7	查看当前用户&#x2F;登录用户"></a>4.7	查看当前用户&#x2F;登录用户</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">语法：who am <span class="hljs-selector-tag">i</span> 或者 who am <span class="hljs-selector-tag">I</span><br>who am <span class="hljs-selector-tag">i</span> ---&gt;第一个登录该系统的用户信息<br>假设<span class="hljs-selector-tag">A</span>用户登录系统，切换到<span class="hljs-selector-tag">B</span>用户，<span class="hljs-selector-tag">B</span>输入命令who am <span class="hljs-selector-tag">i</span>，输出的还是<span class="hljs-selector-tag">A</span>用户的信息<br></code></pre></td></tr></table></figure>

<h3 id="4-8用户组"><a href="#4-8用户组" class="headerlink" title="4.8	用户组"></a>4.8	用户组</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs routeros">介绍：类似于角色，系统可以对有共性/有相同的权限的多个用户进行统一的管理<br><br>新增组：groupadd 组名<br>	假如A用户和B用户有相同的权限，一个一个赋权限太麻烦了；<br>	可以把A用户和B用户放在一个组里，然后给这个组赋权限，组里的用户有相同的权限。<br><br>	新增一个用户，其实会默认生成一个跟用户名相同的组，然后把用户放到该组里。<br>	就像是 id root：<span class="hljs-attribute">uid</span>=0(root) <span class="hljs-attribute">gid</span>=0(root) 组=0(root)---&gt;root组<br><br>	例子：增加一个用户zwj，把他直接放到组wudang中<br>	命令：<br>		groupadd wudang<br>		useradd -g wudang zwj<br>		id zwj：<span class="hljs-attribute">uid</span>=1001(zwj) <span class="hljs-attribute">gid</span>=1001(wudang) 组=1001(wudang)<br><br><br><br>修改用户的组：usermod -g 用户组 用户名<br>	例子：把zwj 放到组 mojiao 中<br>	命令：<br>		groupadd mojiao<br>		usermod -g mojiao zwj<br>		id zwj：<span class="hljs-attribute">uid</span>=1001(zwj) <span class="hljs-attribute">gid</span>=1002(mojiao) 组=1002(mojiao)<br><br>	新增一个用户john，怎么把john放进组mojiao中？<br>		useradd jhon<br>		usermod -g mojiao jhon<br>		新增一个用户john，john在以自己的名字命名的组john中，从john组到mojiao组<br><br><br>删除组：groupdel 组名<br></code></pre></td></tr></table></figure>

<h3 id="4-9用户和组的相关文件"><a href="#4-9用户和组的相关文件" class="headerlink" title="4.9	用户和组的相关文件"></a>4.9	用户和组的相关文件</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gradle">(<span class="hljs-number">1</span>)<span class="hljs-regexp">/etc/</span>passwd 文件<br>每增加一个用户，就会把用户的信息保存到该文件。<br>用户（user）的配置文件，记录用户的各种信息<br>每行都是一个用户，每行的含义：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell<br><br>主目录：用户所在的家目录<br><br>shell：命令解释程序<br>	将发布的指令通过shell解析，再传给Linux内核<br>	Linux是看不懂发布的指令的<br>	shell有很多种，中国一般用的是bash<br><br>命令：viw <span class="hljs-regexp">/etc/</span>passwd 可以查看该文件(还有其他命令)<br><br>(<span class="hljs-number">2</span>)<span class="hljs-regexp">/etc/</span>shadow 文件<br>口令的配置文件<br>每行的含义：登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志<br><br>(<span class="hljs-number">3</span>)<span class="hljs-regexp">/etc/g</span>roup 文件<br>组(<span class="hljs-keyword">group</span>)的配置文件，记录 Linux 包含的组的信息每行含义：组名:口令:组标识号:组内用户列表<br></code></pre></td></tr></table></figure>

<h2 id="五、Linux-实操篇-实用指令"><a href="#五、Linux-实操篇-实用指令" class="headerlink" title="五、Linux 实操篇-实用指令"></a>五、Linux 实操篇-实用指令</h2><h3 id="5-1指定运行级别"><a href="#5-1指定运行级别" class="headerlink" title="5.1	指定运行级别"></a>5.1	指定运行级别</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">Linux</span>系统运行级别：<br><span class="hljs-string">0</span>：关机<br><span class="hljs-string">1</span>：单用户【可以找回丢失密码】<br><span class="hljs-string">2</span>：多用户状态没有网络服务(一般不用，没网络)<br><span class="hljs-string">3</span>：多用户状态有网络服务<br><span class="hljs-string">4</span>：系统未使用保留给用户<br><span class="hljs-string">5</span>：图形界面<br><span class="hljs-string">6</span>：系统重启<br>常用运行级别是 <span class="hljs-string">3</span> 和 <span class="hljs-string">5</span><br><br>切换运行级别命令：<span class="hljs-string">init</span> 选<span class="hljs-string">0-6</span><br><br>指定默认运行级别：<br>	<span class="hljs-string">CentOS7</span>之前是在文件/<span class="hljs-string">etc</span>/<span class="hljs-string">inittab</span>文件中设置<br>	<span class="hljs-string">CentOS7</span>之后对设置进行了简化：<br>		用 <span class="hljs-string">multi-user</span>.<span class="hljs-string">target</span> 代表<span class="hljs-string">3</span>运行级别<br>		用 <span class="hljs-string">graphical</span>.<span class="hljs-string">target</span> 代表<span class="hljs-string">5</span>运行级别<br>		<span class="hljs-string">7</span>版本之后主要用<span class="hljs-string">3</span>和<span class="hljs-string">5</span>运行级别。<br><br>	用命令：<span class="hljs-string">systemctl</span> <span class="hljs-built_in">get-default</span> 查看当前系统运行级别<br>	用命令：<span class="hljs-string">systemctl</span> <span class="hljs-built_in">set-default</span> <span class="hljs-string">multi-user</span>.<span class="hljs-string">target</span> /<span class="hljs-string">graphical</span>.<span class="hljs-string">target</span>  设置默认运行级别<br></code></pre></td></tr></table></figure>

<h3 id="5-2找回-root-密码"><a href="#5-2找回-root-密码" class="headerlink" title="5.2	找回 root 密码"></a>5.2	找回 root 密码</h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xquery">在登录系统时，忘记<span class="hljs-built_in">了root</span>密码，如何找<span class="hljs-built_in">回root</span>密码？<br>资料中有，不同版本方式不同，介绍CentOS7之后的版本解决方法：<br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131100781.png" srcset="/img/loading.gif" lazyload alt="image-20230713110054718"></p>
<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131101406.png" srcset="/img/loading.gif" lazyload alt="image-20230713110128323"></p>
<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131101160.png" srcset="/img/loading.gif" lazyload alt="image-20230713110141117"></p>
<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307131102323.png" srcset="/img/loading.gif" lazyload alt="image-20230713110202243"></p>
<h3 id="5-3帮助指令"><a href="#5-3帮助指令" class="headerlink" title="5.3	帮助指令"></a>5.3	帮助指令</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">语法：man 命令或配置文件<br>是manual的简写，manual是手册的意思<br><br>功能：获得帮助信息<br>例子：查看<span class="hljs-keyword">ls</span>命令的帮助信息<br><br>输入 man <span class="hljs-keyword">ls</span> 之后，会看到<span class="hljs-keyword">ls</span>的具体信息<span class="hljs-params">(要回到前一个页面，输入q)</span><br>注意：可能不止一页，使用空格或下键，可以往下看<br><br><span class="hljs-params">---------------------------------------------------------------------</span><br><span class="hljs-keyword">ls</span>命令：列出目录内容<br>格式：<span class="hljs-keyword">ls</span> [选项] [文件名<span class="hljs-string">...</span>]     <br>	 <span class="hljs-keyword">ls</span>  -a  <span class="hljs-params">---</span>&gt;列出所有文件，包括隐藏文件<span class="hljs-params">(隐藏文件以 . 开头)</span><br>	 <span class="hljs-keyword">ls</span>  -l  <span class="hljs-params">---</span>&gt;单列输出 <br><br>选项以 - 开始<br>选项可以组合使用，没有顺序：<br>	比如： <span class="hljs-keyword">ls</span> -al  也可以 <span class="hljs-keyword">ls</span> -a -l  表示列出所有的文件 并 单列输出<br><br><span class="hljs-keyword">ls</span>默认是对当前目录下的文件<br>也可以指定某个目录：<br>	如： <span class="hljs-keyword">ls</span> -al <span class="hljs-string">/root</span>  把root目录下的所有文件单列输出<br><span class="hljs-params">---------------------------------------------------------------------</span><br><br>语法：<span class="hljs-keyword">help</span> 命令<br>功能：获得 shell 内置命令的帮助信息<br>例子：查看 <span class="hljs-keyword">cd</span> 命令的帮助信息<br><span class="hljs-keyword">help</span> <span class="hljs-keyword">cd</span><br><br>语法：man [命令或配置文件]<br>功能：获得帮助信息<br>例子：查看<span class="hljs-keyword">ls</span>命令的帮助信息<br>man <span class="hljs-keyword">ls</span><br></code></pre></td></tr></table></figure>

<h3 id="5-4关于文件目录的指令"><a href="#5-4关于文件目录的指令" class="headerlink" title="5.4	关于文件目录的指令"></a>5.4	关于文件目录的指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><code class="hljs bash">基本语法：<span class="hljs-built_in">pwd</span>    (<span class="hljs-built_in">print</span> working directory)<br>功能：显示当前目录的绝对路径<br>---------------------------------------------------------------------<br><br>基本语法：<span class="hljs-built_in">ls</span> [选项] [目录或是文件]<br>常用选项：<br>	-a：显示当前目录所有的文件和目录，包括隐藏的。<br>	-l：以列表的方式显示信息<br>---------------------------------------------------------------------<br><br>基本语法：<span class="hljs-built_in">cd</span> [参数]	<br>功能：切换到指定目录<br><br><span class="hljs-built_in">cd</span> ~ 或者 <span class="hljs-built_in">cd</span> ---&gt;回到当前用户的家目录 <br><span class="hljs-built_in">cd</span> ..   ---&gt;回到当前目录的上一级目录<br><br>案例 1：使用绝对路径切换到 root 目录<br>	<span class="hljs-built_in">cd</span> /root<br>	<br>案例 2：使用相对路径到 root 目录<br>	比如当前在 /home/tom <br>		<span class="hljs-built_in">cd</span> ../../root    ../..回到了根目录,再/root<br>		<br>---------------------------------------------------------------------<br><br>基本语法：<span class="hljs-built_in">mkdir</span> [选项] 要创建的目录路径<br>功能：创建目录<br>常用选项：<br>	-p：创建多级目录<br><br>案例1：在home下创建一个目录dog<br>	<span class="hljs-built_in">mkdir</span> /home/dog<br>	<br>案例2：在home下创建多级目录 /home/animal/tiger <br>	<span class="hljs-built_in">mkdir</span> -p /home/animal/tiger<br><br>---------------------------------------------------------------------<br><br>基本语法：<span class="hljs-built_in">rmdir</span> [选项] 要删除的空目录路径<br>功能：删除一个空目录<br><br>案例:删除一个目录 /home/dog<br>	<span class="hljs-built_in">rmdir</span> /home/dog<br><br>注意：<br>	<span class="hljs-built_in">rmdir</span> 删除的是空目录，如果目录下有内容是无法删除的。<br>	如果需要删除非空目录，需要使用命令：<span class="hljs-built_in">rm</span> -rf 要删除的目录<br>	比如： 删除animal目录<br>		<span class="hljs-built_in">rm</span> -rf /home/animal<br>---------------------------------------------------------------------<br><br>基本语法：<span class="hljs-built_in">touch</span> 文件名称<br>功能：创建空文件<br><br>案例:：在/home 目录下，创建一个空文件 hello.txt<br>	<span class="hljs-built_in">touch</span> /home/hello.txt<br>	或者当前目录是home：<span class="hljs-built_in">touch</span> hello.text<br>	<span class="hljs-built_in">touch</span>创建的是一个文件，而非一个目录，故不能对其进行目录的命令<br>---------------------------------------------------------------------<br><br>基本语法：<span class="hljs-built_in">cp</span> [选项] 被拷贝的文件 拷贝到哪个地方<br>功能：拷贝文件到指定目录<br>常用选项：<br>	-r：递归复制整个文件夹<br><br>案例1：将 /home/hello.txt  拷贝到	/home/bbb  目录下<br>	若在根目录下操作：<br>	先创建 bbb目录<br>		<span class="hljs-built_in">mkdir</span> /home/bbb<br>	然后复制<br>		<span class="hljs-built_in">cp</span> /home/hello.txt /home/bbb<br>	<br>案例2：递归复制整个文件夹，比如将 /home/bbb 整个目录，拷贝到 /opt <br>	<span class="hljs-built_in">cp</span> -r /home/bbb /opt<br><br>注意：强制覆盖不提示的方法：\<span class="hljs-built_in">cp</span>	<br>	\<span class="hljs-built_in">cp</span> -r /home/bbb /opt<br><br>---------------------------------------------------------------------<br><br>基本语法：<span class="hljs-built_in">rm</span>	[选项] 要删除的文件或目录<br>功能：移除文件或目录<br>常用选项：<br>	-r：递归删除整个文件夹<br>	-f：强制删除不提示<br><br>案例1：将 /home/hello.txt 删除 <br>	<span class="hljs-built_in">rm</span>	/home/hello.txt<br>	<br>案例2：递归删除整个文件夹 /home/bbb ，并不提示<br>	<span class="hljs-built_in">rm</span> -rf /home/bbb <br>	<br>注意：强制删除不提示的方法：带上 -f 参数即可<br>---------------------------------------------------------------------<br><br>功能：移动文件与目录或重命名<br>基本语法：<br>	<span class="hljs-built_in">mv</span>	原文件名 新文件名 	     (功能描述：重命名)<br>	如果就文件和新文件在同一个目录，即为更改文件名<br>	<span class="hljs-built_in">mv</span>  被移动的文件 移动到哪   (功能描述：移动文件)<br><br>案例 1: 将 /home/cat.txt 文件 重新命名为 pig.txt<br>	[root@hspEdu01 ~]<span class="hljs-comment"># cd /home</span><br>	[root@hspEdu01 home]<span class="hljs-comment"># touch cat.txt</span><br>	[root@hspEdu01 home]<span class="hljs-comment"># ls</span><br>	cat.txt  jack  king  milan  zwj<br>	[root@hspEdu01 home]<span class="hljs-comment"># mv cat.txt pig.txt</span><br>	[root@hspEdu01 home]<span class="hljs-comment"># ls</span><br>	jack  king  milan  pig.txt  zwj<br><br>案例 2:将 /home/pig.txt	文件 移动到 /root 目录下<br>	[root@hspEdu01 home]<span class="hljs-comment"># mv pig.txt /root</span><br>	[root@hspEdu01 home]<span class="hljs-comment"># ls</span><br>	jack  king  milan  zwj<br>	[root@hspEdu01 home]<span class="hljs-comment"># cd /root</span><br>	[root@hspEdu01 ~]<span class="hljs-comment"># ls	</span><br>	Hello.java  pig.txt <br><br>移动并重名：<span class="hljs-built_in">mv</span> pig.txt /root/cow.txt<br><br>案例 3: 移动整个目录,比如将 /opt/bbb  移动到 /home 下<br>	 <span class="hljs-built_in">mv</span> /opt/bbb /home/<br>	 移动整个目录，移动到/home下并改名为aaa<br>	 <span class="hljs-built_in">mv</span> /opt/bbb /home/aaa<br><br>---------------------------------------------------------------------<br>前面学过一个查看：vim<br><span class="hljs-built_in">cat</span>也可以查看，<span class="hljs-built_in">cat</span>只能查看不能修改，<span class="hljs-built_in">cat</span>更安全。<br><br>基本语法：<span class="hljs-built_in">cat</span>	[选项] 要查看的文件<br>功能：查看文件内容<br>常用选项：<br>	-n：显示行号<br><br>案例1：查看 /etc/profile 文件内容，并显示行号。<br>	<span class="hljs-built_in">cat</span>	-n /etc/profile <br>注意：<br>	<span class="hljs-built_in">cat</span> 只能浏览文件，而不能修改文件；为了浏览方便再加上管道命令 | more <br>	管道命令：把前面的结果再交给下一个指令进行处理。<br>		语法：| 其他指令<br>		<br>	<span class="hljs-built_in">cat</span>	-n /etc/profile | more <br>		意思：先执行<span class="hljs-built_in">cat</span> -n /etc/profile 然后，按回车键输出一行，按空格翻页等。<br><br>---------------------------------------------------------------------<br><br>基本语法：more 要查看的文件<br>功能：<br>more 指令是一个基于 VI 编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。<br>more 指令中内置了若干快捷键(交互的指令)，详见操作说明：<br>例如：<br>查看前两行内容<br>more -2 mydata.txt<br>从第二行开始看<br>more +2 mydata.txt<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>操作</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>空格键</td>
<td>向下翻一页</td>
</tr>
<tr>
<td>Enter</td>
<td>向下翻一行</td>
</tr>
<tr>
<td>q</td>
<td>立刻离开more，不在显示该文件内容</td>
</tr>
<tr>
<td>Ctrl+F</td>
<td>向下滚动一屏</td>
</tr>
<tr>
<td>Ctrl+B</td>
<td>返回上一屏</td>
</tr>
<tr>
<td>&#x3D;</td>
<td>输出当前行的行号</td>
</tr>
<tr>
<td>：f</td>
<td>输出文件名和当前行的行号</td>
</tr>
</tbody></table>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cmake">基本语法：<span class="hljs-keyword">less</span> 要查看的文件<br>功能：<br><span class="hljs-keyword">less</span> 指令用来分屏查看文件内容，它的功能与 more 指令类似，但是比 more 指令更加强大，支持各种显示终端。<br><span class="hljs-keyword">less</span> 指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。<br><br>有一个文件是<span class="hljs-number">100</span>M，用vim查看会将其全部加载再显示出来，这样会很慢。<br>使用<span class="hljs-keyword">less</span>，会先加载一部分显示出来，再根据指令显示剩下的，这样更快。<br><br>所以要查找一些大的文件，建议用<span class="hljs-keyword">less</span>。<br><br>案例: 采用 <span class="hljs-keyword">less</span> 查看一个大文件文件 /opt/杂文.txt<br>首先使用xftp将杂文.txt传输到opt下<br>然后输入指令：<span class="hljs-keyword">less</span> /opt/杂文.txt  <br><br>下面操作中：<br>	想要找某个字或词<br>	输入：/要找的字或词    然后按n向下找  按N向上找<br>操作说明：<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>操作</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>空格键</td>
<td>向下翻一页</td>
</tr>
<tr>
<td>pagedown</td>
<td>向下翻一页</td>
</tr>
<tr>
<td>pageup</td>
<td>向上翻一页</td>
</tr>
<tr>
<td>&#x2F;字串</td>
<td>向下搜寻[字串]的功能；n：向下查找；N：向上查找</td>
</tr>
<tr>
<td>?字串</td>
<td>向上搜寻[字串]的功能；n：向下查找；N：向上查找</td>
</tr>
<tr>
<td>q</td>
<td>离开less这个程序</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs bash">基本语法：<span class="hljs-built_in">echo</span> [选项]	[输出内容]<br>功能：输出内容到控制台<br><br>案例: 使用 <span class="hljs-built_in">echo</span>  指令输出环境变量<br>比如输出 <span class="hljs-variable">$PATH</span> <span class="hljs-variable">$HOSTNAME</span><br>	输入：<span class="hljs-built_in">echo</span> <span class="hljs-variable">$HOSTNAME</span> (环境变量一般加$)<br>	<br>案例: 使用 <span class="hljs-built_in">echo</span> 指令输出 hello,world!<br>	输入：<span class="hljs-built_in">echo</span> hello,world!<br>		 <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello,world!&quot;</span>  加不加引号都可以<br>---------------------------------------------------------------------<br><br>功能：<span class="hljs-built_in">head</span> 用于显示文件的开头部分内容，默认情况下 <span class="hljs-built_in">head</span> 指令显示文件的前 10 行内容。<br>基本语法：<br>	<span class="hljs-built_in">head</span>  文件	    (功能描述：查看文件头 10 行内容)<br>	<span class="hljs-built_in">head</span> -n 5 文件	(功能描述：查看文件头 5 行内容，5 可以是任意行数)<br><br>案例: 查看/etc/profile 的前面 5 行代码<br>	<span class="hljs-built_in">head</span> -n 5 /etc/profile<br><br>---------------------------------------------------------------------<br><br>功能：<span class="hljs-built_in">tail</span> 用于输出文件中尾部的内容，默认情况下 <span class="hljs-built_in">tail</span> 指令显示文件的前 10 行内容。<br>基本语法：<br>	<span class="hljs-built_in">tail</span> 文件	    （功能描述：查看文件尾 10 行内容）<br>	<span class="hljs-built_in">tail</span> -n 5 文件	（功能描述：查看文件尾 5 行内容，5 可以是任意行数）<br>	<span class="hljs-built_in">tail</span> -f	文件	    （功能描述：实时追踪该文档的所有更新，只要该文件改动了什么内容就可实时看到）(例如一直查看output.log)<br>	<span class="hljs-built_in">tail</span> -f output.log<br><br>---------------------------------------------------------------------<br><br>&gt;指令和&gt;&gt;指令：<br>	&gt; 输出重定向(覆盖)<br>    &gt;&gt; 追加<br>基本语法：<br>	<span class="hljs-built_in">ls</span> -l &gt;文件1	         (功能描述：将列表的内容写入文件1中(覆盖写))<br>	<span class="hljs-built_in">ls</span> -al &gt;&gt;文件1        (功能描述：将列表的内容追加到文件1的末尾)<br>	<span class="hljs-built_in">cat</span> 文件 1 &gt; 文件 2	  (功能描述：将文件 1 的内容覆盖到文件 2)<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;内容&quot;</span>&gt;&gt; 文件1     (将内容追加到文件1的末尾)<br><br>案例 1: 将 /home 目录下的文件列表 写入到 /home/info.txt 中,覆盖写入。<br>	<span class="hljs-built_in">ls</span> -l /home &gt; /home/info.txt	[如果 info.txt 没有，则会自动创建] <br>	<br>案例 2: 将当前日历信息 追加到	/home/mycal 文件中<br>	cal &gt;&gt; /home/mycal<br><br>---------------------------------------------------------------------<br><br>功能：给原文件创建一个软链接<br>	 软链接也称为符号链接，类似于 windows 里的快捷方式，主要存放了链接其他文件的路径<br>基本语法：<br>	<span class="hljs-built_in">ln</span> -s [原文件或目录] [软链接名] （功能描述：给原文件创建一个软链接）<br>	<span class="hljs-built_in">ln</span>是<span class="hljs-built_in">link</span><br><br>案例1：在/home 目录下创建一个软连接 myroot，连接到 /root 目录<br>(这样 切换到myroot 其实就是切换到root)<br>	<span class="hljs-built_in">ln</span> -s /root	/home/myroot<br>	<br>案例2: 删除软连接 myroot <br>	<span class="hljs-built_in">rm</span>	/home/myroot<br><br>当我们使用 <span class="hljs-built_in">pwd</span> 指令查看目录时，仍然看到的是软链接所在目录。<br><br>---------------------------------------------------------------------<br><br>功能：查看已经执行过历史命令,也可以执行历史指令<br>基本语法：<br>	<span class="hljs-built_in">history</span> （功能描述：查看已经执行过历史命令）<br>	可以看其他登录的用户做了什么操作。<br><br>案例 1: 显示所有的历史命令<br><span class="hljs-built_in">history</span><br>案例 2: 显示最近使用过的 10 个指令。<br><span class="hljs-built_in">history</span> 10<br>案例 3：执行历史编号为 5 的指令<br>!5<br></code></pre></td></tr></table></figure>

<h3 id="5-5关于时间日期的指令"><a href="#5-5关于时间日期的指令" class="headerlink" title="5.5	关于时间日期的指令"></a>5.5	关于时间日期的指令</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs perl">date指令：<br>	<span class="hljs-number">1</span>.显示当前日期<br>		基本语法：<br>			date	  （功能描述：显示当前时间）<br>			date +%Y  （功能描述：显示当前年份）<br>			date +%m  （功能描述：显示当前月份）<br>			date +%d  （功能描述：显示当前是哪一天）<br>			date <span class="hljs-string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>（功能描述：显示年月日时分秒）<br><br>			Y year<br>			m month<br>			d day<br>			H hour<br>			M minute<br>			S second<br>		<br>		案例 <span class="hljs-number">1</span>: 显示当前时间信息<br>		date<br>		案例 <span class="hljs-number">2</span>: 显示当前时间年月日<br>		date <span class="hljs-string">&quot;+%Y-%m-%d&quot;</span><br>		案例 <span class="hljs-number">3</span>: 显示当前时间年月日时分秒<br>		date <span class="hljs-string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span><br>		案例 <span class="hljs-number">4</span>：显示某个文件的修改时间<br>		date -r info.txt<br><br>	<span class="hljs-number">2</span>.设置日期<br>		基本语法：<br>			date -s	字符串时间<br>			<br>		案例 <span class="hljs-number">1</span>: 设置系统当前时间<br>		date -s <span class="hljs-string">&quot;2020-11-03 20:02:10&quot;</span><br><br><br>cal指令：<br>	查看日历指令 cal<br>	<br>	基本语法：<br>	cal [选项]	（功能描述：不加选项，显示本月日历）<br>	<br>	案例 <span class="hljs-number">1</span>: 显示当前日历 <br>	cal<br>	案例 <span class="hljs-number">2</span>: 显示 <span class="hljs-number">2020</span> 年日历 <br>	cal <span class="hljs-number">2020</span><br></code></pre></td></tr></table></figure>

<h3 id="5-6关于搜索查找有关的指令"><a href="#5-6关于搜索查找有关的指令" class="headerlink" title="5.6	关于搜索查找有关的指令"></a>5.6	关于搜索查找有关的指令</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">find</span> 指令<br>	从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。<br>    <br>    基本语法：<br>	<span class="hljs-built_in">find</span> [搜索范围] [选项]<br>	<br>选项说明：<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-name&lt;查询方式&gt;</td>
<td>按照指定的文件名查找模式查找文件</td>
</tr>
<tr>
<td>-user&lt;用户名&gt;</td>
<td>查找属于指定用户名所有的文件</td>
</tr>
<tr>
<td>-size&lt;文件大小&gt;</td>
<td>按照指定的文件大小查找文件</td>
</tr>
</tbody></table>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs gradle">案例 <span class="hljs-number">1</span>: 按文件名：根据名称查找 /home 目录下的 hello.txt 文件<br><span class="hljs-keyword">find</span> /home -name hello.txt<br>如果当前在home目录下,则可以写为<br><span class="hljs-keyword">find</span> -name hello.txt<br>如果不指定查找目录即为当前目录<br><br>案例 <span class="hljs-number">2</span>：按拥有者：查找 /opt 目录下，用户名称为 nobody 的文件<br><span class="hljs-keyword">find</span> /opt -user nobody<br><br>案例 <span class="hljs-number">3</span>：查找整个 linux 系统下大于 <span class="hljs-number">200</span>M 的文件<br>	+n 大于 -n 小于 n 等于<br>	单位有 k,M,G <br><span class="hljs-keyword">find</span> / -<span class="hljs-keyword">size</span> +<span class="hljs-number">200</span>M<br><br>[root@hspEdu01 opt]# <span class="hljs-keyword">find</span> / -<span class="hljs-keyword">size</span> +<span class="hljs-number">200</span>M<br><span class="hljs-regexp">/proc/</span>kcore<br><span class="hljs-keyword">find</span>: ‘<span class="hljs-regexp">/proc/</span><span class="hljs-number">12775</span><span class="hljs-regexp">/task/</span><span class="hljs-number">12775</span><span class="hljs-regexp">/fd/</span><span class="hljs-number">5</span>’: 没有那个文件或目录<br><span class="hljs-keyword">find</span>: ‘<span class="hljs-regexp">/proc/</span><span class="hljs-number">12775</span><span class="hljs-regexp">/task/</span><span class="hljs-number">12775</span><span class="hljs-regexp">/fdinfo/</span><span class="hljs-number">5</span>’: 没有那个文件或目录<br><span class="hljs-keyword">find</span>: ‘<span class="hljs-regexp">/proc/</span><span class="hljs-number">12775</span><span class="hljs-regexp">/fd/</span><span class="hljs-number">6</span>’: 没有那个文件或目录<br><span class="hljs-keyword">find</span>: ‘<span class="hljs-regexp">/proc/</span><span class="hljs-number">12775</span><span class="hljs-regexp">/fdinfo/</span><span class="hljs-number">6</span>’: 没有那个文件或目录<br><span class="hljs-regexp">/run/m</span>edia<span class="hljs-regexp">/root/</span>CentOS <span class="hljs-number">7</span> x86_64<span class="hljs-regexp">/LiveOS/</span>squashfs.img (这个文件大于<span class="hljs-number">200</span>M)<br>[root@hspEdu01 opt]# cd <span class="hljs-regexp">/run/m</span>edia<span class="hljs-regexp">/root/</span>CentOS\ <span class="hljs-number">7</span>\ x86_64<span class="hljs-regexp">/LiveOS/</span><br>[root@hspEdu01 LiveOS]# ls<br>squashfs.img  TRANS.TBL<br>[root@hspEdu01 LiveOS]# ls -l<br>总用量 <span class="hljs-number">442741</span><br>-rw-r--r--. <span class="hljs-number">1</span> root root <span class="hljs-number">453365760</span> <span class="hljs-number">11</span>月 <span class="hljs-number">26</span> <span class="hljs-number">2018</span> squashfs.img<br>-r--r--r--. <span class="hljs-number">1</span> root root       <span class="hljs-number">224</span> <span class="hljs-number">11</span>月 <span class="hljs-number">26</span> <span class="hljs-number">2018</span> TRANS.TBL<br>[root@hspEdu01 LiveOS]# ls -lh  (上面的总用量大小看不懂，加上h human 能看懂的内容)<br>总用量 <span class="hljs-number">433</span>M<br>-rw-r--r--. <span class="hljs-number">1</span> root root <span class="hljs-number">433</span>M <span class="hljs-number">11</span>月 <span class="hljs-number">26</span> <span class="hljs-number">2018</span> squashfs.img<br>-r--r--r--. <span class="hljs-number">1</span> root root  <span class="hljs-number">224</span> <span class="hljs-number">11</span>月 <span class="hljs-number">26</span> <span class="hljs-number">2018</span> TRANS.TBL<br><br><br><br><br>locate 指令<br>	可以快速定位文件路径。<br>	利用事先建立的系统中所有文件名称及路径的 locate 数据库实现快速定位给定的文件。<br>	Locate 指令无需遍历整个文件系统，查询速度较快。<br>	为了保证查询结果的准确度，管理员必须定期更新 locate 时刻<br>	<br>	基本语法:<br>	locate 搜索文件<br><br>	注意：<br>	由于 locate 指令基于数据库进行查询，<br>	所以第一次运行前，必须使用 updatedb 指令创建 locate 数据库。<br><br>	案例 <span class="hljs-number">1</span>: 请使用 locate 指令快速定位 hello.txt 文件所在目录<br>	updatedb<br>	locate hello.txt<br><br><br><br><br>which 指令<br>	可以查看某个指令在哪个目录下<br>	案例：ls 指令在哪个目录<br>	which ls<br><br><br><br><br><span class="hljs-keyword">grep</span> 指令和 管道符号 |  <br>	<span class="hljs-keyword">grep</span>指令往往和管道符号 | 结合使用<br>	<span class="hljs-keyword">grep</span>：过滤查找<br>	管道符：“|”<br>	表示将前一个命令的处理结果输出传递给后面的命令处理。<br>	比如：先 cat a.txt，然后又想看a.txt文件中有没有hello这个词<br>	那么就 cat a.txt | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;hello&quot;</span> ---&gt;先找到a.txt，然后再在a.txt中找hello<br><br>	基本语法：<br>	<span class="hljs-keyword">grep</span> [选项] 查找内容 源文件<br>	<br>	常用选项：<br>		-n  显示匹配行及行号<br>		-i   忽略字母大小写<br><br>	案例 <span class="hljs-number">1</span>: 请在 hello.txt 文件中，查找<span class="hljs-string">&quot;yes&quot;</span>所在行，并且显示行号<br>		写法 <span class="hljs-number">1</span>:  cat <span class="hljs-regexp">/home/</span>hello.txt	| <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;yes&quot;</span>  引号写不写都行<br>				cat <span class="hljs-regexp">/home/</span>hello.txt	| <span class="hljs-keyword">grep</span> -n <span class="hljs-string">&quot;yes&quot;</span>   显示行号    			<br>		写法 <span class="hljs-number">2</span>:  <span class="hljs-keyword">grep</span> -n <span class="hljs-string">&quot;yes&quot;</span> <span class="hljs-regexp">/home/</span>hello.txt<br></code></pre></td></tr></table></figure>

<h3 id="5-7关于压缩和解压的指令"><a href="#5-7关于压缩和解压的指令" class="headerlink" title="5.7	关于压缩和解压的指令"></a>5.7	关于压缩和解压的指令</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs stylus">gzip/gunzip 指令<br>	gzip    用于压缩文件<br>	gunzip  用于解压的<br>    <br>    基本语法：<br>	gzip 文件	  （功能描述：压缩文件，只能将文件压缩为*<span class="hljs-selector-class">.gz</span> 文件）<br>	gunzip 文件<span class="hljs-selector-class">.gz</span> （功能描述：解压缩文件命令）<br>	<br><br>	案例 <span class="hljs-number">1</span>: gzip 压缩，将 /home 下的 hello<span class="hljs-selector-class">.txt</span> 文件进行压缩<br>	gzip /home/hello<span class="hljs-selector-class">.txt</span><br>	<br>	案例 <span class="hljs-number">2</span>: gunzip 解缩，将 /home 下的 hello<span class="hljs-selector-class">.txt</span><span class="hljs-selector-class">.gz</span> 文件进行解压<br>	gunzip /home/hello<span class="hljs-selector-class">.txt</span><span class="hljs-selector-class">.gz</span><br><br><br><br><br>zip/unzip 指令<br>	zip 用于压缩文件<br>	unzip 用于解压的 <br>	（这个在项目打包发布中很有用的）<br>		<br>	基本语法：<br>	zip	<span class="hljs-selector-attr">[选项]</span> XXX<span class="hljs-selector-class">.zip</span> 将要压缩的内容    （功能描述：压缩文件和目录的命令）<br>	unzip <span class="hljs-selector-attr">[选项]</span> XXX<span class="hljs-selector-class">.zip</span>	              （功能描述：解压文件）<br>    <br>    zip 常用选项<br>		-r：递归压缩，即压缩目录<br>	<br>	unzip 的常用选项<br>		-d&lt;目录&gt; ：指定解压后文件的存放目录<br><br><br>	案例 <span class="hljs-number">1</span>:将 /home 下的所有文件/文件夹压缩成 myhome<span class="hljs-selector-class">.zip</span><br>	zip -r myhome<span class="hljs-selector-class">.zip</span> /home/	<span class="hljs-selector-attr">[将 home 目录及其包含的文件和子文件夹都压缩]</span> <br>	zip -r 压缩后的文件名 需要压缩的目录<br>	<br>	案例 <span class="hljs-number">2</span>:将 myhome<span class="hljs-selector-class">.zip</span> 解压到 /opt/tmp 目录下<br>	mkdir /opt/tmp<br>	unzip -d /opt/tmp /home/myhome<span class="hljs-selector-class">.zip</span><br>	unzip -d 解压到 需要解压的文件<br><br><br><br><br>tar 指令<br>	tar 指令是打包指令，最后打包后的文件是 <span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> 的文件。<br>	把一个或者多个文件（夹）用压缩软件进行压缩的过程，一般可称之为打包。<br>	<br>	tar指令可以压缩也可以解压。<br>	根据选项来 压缩还是解压。<br><br>	基本语法：<br>	tar	<span class="hljs-selector-attr">[选项]</span> XXX<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> 打包的内容	  (功能描述：打包目录，压缩后的文件格式<span class="hljs-selector-class">.tar</span>.gz)<br>	<br>	选项说明：<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>产生.tar打包文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示详细信息</td>
</tr>
<tr>
<td>-f</td>
<td>指定压缩后的文件名</td>
</tr>
<tr>
<td>-z</td>
<td>打包同时压缩</td>
</tr>
<tr>
<td>-x</td>
<td>解包.tar文件</td>
</tr>
</tbody></table>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs stylus">案例 <span class="hljs-number">1</span>:压缩多个文件，将 /home/pig<span class="hljs-selector-class">.txt</span> 和 /home/cat<span class="hljs-selector-class">.txt</span> 压缩成 pc<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> <br>tar -zcvf pc<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> /home/pig<span class="hljs-selector-class">.txt</span> /home/cat<span class="hljs-selector-class">.txt</span><br>	使用了选项：-z -c -v -f<br>	多个文件就 空格直接写在后面就好了<br>	模板：<br>	tar -zcvf file_name<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> 打包的文件<span class="hljs-number">1</span> 打包的文件<span class="hljs-number">2</span> ···<br><br>案例 <span class="hljs-number">2</span>:将 /home 的文件夹压缩成 myhome<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> <br>tar -zcvf myhome<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> /home/<br>模板：<br>tar -zcvf file_name<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> 打包的目录或文件夹<br><br><br>案例 <span class="hljs-number">3</span>:将 pc<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> 解压到当前目录<br>tar -zxvf pc<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span><br><br>案例 <span class="hljs-number">4</span>:将 myhome<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> 解压到 /opt/tmp2 目录下	<br>(<span class="hljs-number">1</span>)	mkdir /opt/tmp2 <br>(<span class="hljs-number">2</span>) tar -zxvf /home/myhome<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> -C /opt/tmp2<br>注意：-C 后写要解压到的位置<br></code></pre></td></tr></table></figure>

<h2 id="六、Linux-实操篇-组管理和权限管理"><a href="#六、Linux-实操篇-组管理和权限管理" class="headerlink" title="六、Linux 实操篇-组管理和权限管理"></a>六、Linux 实操篇-组管理和权限管理</h2><h3 id="10-1Linux-组基本介绍"><a href="#10-1Linux-组基本介绍" class="headerlink" title="10.1	Linux 组基本介绍"></a>10.1	Linux 组基本介绍</h3><p>蓝色代表目录，绿色代表普通文件，红色代表压缩文件<br>“ls -al”命令用于显示一个目录中文件和文件夹的详细信息。下面是该命令显示的每一列的解释：</p>
<ol>
<li><strong>权限</strong>：第一列表示文件或文件夹的权限。它显示文件（-）或文件夹（d），后跟所有者、组和其他用户的三组权限。每组由三个字符组成：读取（r）、写入（w）和执行（x）。例如，”-rw-r–r–”表示一个文件，所有者具有读取和写入权限，而组和其他用户只有读取权限。</li>
<li><strong>链接数</strong>：第二列显示文件或文件夹的硬链接数。硬链接是对同一个文件或文件夹的引用。</li>
<li><strong>所有者</strong>：第三列显示文件或文件夹的所有者。</li>
<li><strong>组</strong>：第四列显示与文件或文件夹关联的组。</li>
<li><strong>大小</strong>：第五列表示文件的大小（以字节为单位）。对于文件夹，此列通常显示文件夹元数据所占用的空间大小。</li>
<li><strong>最后修改时间</strong>：第六列显示文件或文件夹的最后修改日期和时间。</li>
<li><strong>名称</strong>：第七列表示文件或文件夹的名称。</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs">在 linux 中的每个用户必须属于一个组，不能独立于组外。<br>在 linux 中每个文件都有所有者、所在组、其它组的概念。<br><br>1)	所有者<br>2)	所在组<br>3)	其它组<br>4)	改变用户所在的组<br></code></pre></td></tr></table></figure>

<h3 id="10-2文件-x2F-目录的所有者"><a href="#10-2文件-x2F-目录的所有者" class="headerlink" title="10.2	文件&#x2F;目录的所有者"></a>10.2	文件&#x2F;目录的所有者</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs tap">一般为文件的创建者，谁创建了该文件，就自然的成为该文件的所有者。<br>但是所有者也可以更改。<br><br>1.查看文件/目录的所有者(在/home下才能看到)<br>指令：ls –ahl<br>-ahl是三个选项<br>	-h human 让输出的结果方便人看(文件的大小容易看)<br><br>drwxr-xr-x. <span class="hljs-number"> 6 </span>root root   4.0K 2月 <span class="hljs-number"> 23 </span>13:59 .<br>dr-xr-xr-x.<span class="hljs-number"> 18 </span>root root   4.0K 2月 <span class="hljs-number"> 20 </span>16:45 ..<br>-rw-r--r--. <span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 24 </span>2月 <span class="hljs-number"> 22 </span>21:59 hello.txt<br>...<br>第三列就是文件的所有者<br><br><br><br>2.修改文件/目录所有者指令：chown 新所有者 文件名<br>案例：<br>	要求：使用 root 创建一个文件 apple.txt ，然后将其所有者修改成 tom<br>		  chown tom apple.txt<br><br></code></pre></td></tr></table></figure>

<h3 id="10-3组的创建"><a href="#10-3组的创建" class="headerlink" title="10.3	组的创建"></a>10.3	组的创建</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown">基本指令:<br><span class="hljs-code">	groupadd 组名</span><br><span class="hljs-code"></span><br>案例：<br>创建一个组 monster <br><span class="hljs-code">	groupadd monster</span><br><span class="hljs-code"></span><br>创建一个用户 fox ，并放入到	monster 组中<br><span class="hljs-code">	useradd -g monster fox</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure>

<h3 id="10-4文件-x2F-目录的所在组"><a href="#10-4文件-x2F-目录的所在组" class="headerlink" title="10.4	文件&#x2F;目录的所在组"></a>10.4	文件&#x2F;目录的所在组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs bash">当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组(默认)。<br><br><br>查看文件/目录所在组<br>	指令:<br>	<span class="hljs-built_in">ls</span> –ahl  或者ll<br><br>	ll并不是linux下一个基本的命令，它实际上是<span class="hljs-built_in">ls</span> -l的一个别名。<br>	Ubuntu默认不支持命令ll，必须用 <span class="hljs-built_in">ls</span> -l，这样使用起来不是很方便。<br>	<br>	案例：使用 fox 来创建一个文件，看看该文件属于哪个组?<br>	使用fox创建一个文件：<br>		su fox<br>		然后<span class="hljs-built_in">touch</span> ok.txt<br>		然后ll<br>		<br>	-rw-r--r--. 1 fox monster 0 11 月 5 12:50 ok.txt<br>	第三列：文件的所有者(谁创建了这个文件，就是这个文件的所有者)<br>	第四列：文件的所在组(某个用户创建了一个文件，该文件所在组=该用户所在组)<br><br><br>	注意：/etc/group下存放着所有的组<br>	使用指令：<span class="hljs-built_in">cat</span> /etc/group 可以查看所有的组<br>	<br>	比如查看有没有mojiao这个组<br>	可以使用管道命令和grep过滤<br>		<span class="hljs-built_in">cat</span> /etc/group | grep mojiao<br>	当一个文件很大，想找某个关键词就可以这个过滤！<br><br><br><br><br>修改文件/目录所在的组<br>	指令：<br>	<span class="hljs-built_in">chgrp</span> 组名 文件名<br>	<br>	案例：使用 root 用户创建文件 orange.txt ,看看当前这个文件属于哪个组，<br>		 然后将这个文件所在组，修改到 fruit 组。<br>	<br>		groupadd fruit<br>		<span class="hljs-built_in">touch</span> orange.txt<br>		看看当前这个文件属于哪个组 -&gt; root 组<br>		<span class="hljs-built_in">chgrp</span> fruit orange.txt<br><br></code></pre></td></tr></table></figure>

<h3 id="10-5其它组"><a href="#10-5其它组" class="headerlink" title="10.5	其它组"></a>10.5	其它组</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">除文件的所有者和所在组的用户外，系统的其它用户都是该文件的其它组<br></code></pre></td></tr></table></figure>

<h3 id="10-6改变用户所在的组"><a href="#10-6改变用户所在的组" class="headerlink" title="10.6	改变用户所在的组"></a>10.6	改变用户所在的组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">在添加用户时，可以指定将该用户添加到哪个组中，同样的用 root 的管理权限可以改变某个用户所在的组。<br><br>改变用户所在组<br>	usermod	–g	新组名	用户名<br>	usermod	–d	目录名	用户名	 (改变该用户登陆的初始目录)<br><br>特别说明：用户需要有进入到新目录的权限。<br><br>如何查看用户所在的组？<br>	<span class="hljs-built_in">id</span> 用户名  ---&gt;显示用户信息<br>	<br>案例：<br>将 zwj 这个用户从原来所在组，修改到 wudang 组<br>	先查看zwj在哪个组：<span class="hljs-built_in">id</span> zwj<br>	然后查看有没有wudang这个组：<span class="hljs-built_in">cat</span> /etc/group | grep wudang<br>	修改：usermod -g wudang zwj<br></code></pre></td></tr></table></figure>

<h3 id="10-7权限基本介绍"><a href="#10-7权限基本介绍" class="headerlink" title="10.7	权限基本介绍"></a>10.7	权限基本介绍</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">ls</span> -l 中显示的内容如下：<br>-rwxrw-r-- 1 root root 1213 Feb 2 09<span class="hljs-function">:39</span> abc<br>第一列共10位<br><br>0-9 位说明：<br>	第 0 位确定文件类型<span class="hljs-params">(d, - , l , c , b)</span><br>		d 是目录，相当于 windows 的文件夹<br>		- 代表是普通文件<span class="hljs-params">(.txt)</span><br>		l 是链接，相当于 windows 的快捷方式<br>		c 是字符设备文件，比如鼠标，键盘    <span class="hljs-params">---</span>&gt; <span class="hljs-string">/dev/</span>目录下可以看到<br>		b 是块设备，比如硬盘    <span class="hljs-params">---</span>&gt; <span class="hljs-string">/dev/</span>目录下可以看到<br>		<br>	第 1-3 位确定 该文件的所有者 对该文件的 权限。<span class="hljs-params">---User</span><br>	第 4-6 位确定 该文件所属的组和该组中的用户 对该文件的 权限。<span class="hljs-params">---Group</span> <br>	第 7-9 位确定 其他用户<span class="hljs-params">(不是所有者，也不是同一组的其他用户)</span> 对该文件的权限 <span class="hljs-params">---Other</span><br><br></code></pre></td></tr></table></figure>

<h3 id="10-8rwx权限详解"><a href="#10-8rwx权限详解" class="headerlink" title="10.8	rwx权限详解"></a>10.8	rwx权限详解</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dts">权限有三种：<br>	r 代表可读(read)<br>	w 代表可写(write)<br>	x 代表可执行(execute)<br>	<br>rwx 作用到文件：<br><span class="hljs-symbol">	r:</span> 可以读取,查看<br><span class="hljs-symbol">	w:</span> 可以修改,但是不代表可以删除该文件<br>	   删除一个文件的前提条件是 对该文件所在的目录有写权限 ，才能删除该文件.<br><span class="hljs-symbol">	x:</span> 可以被执行,前提是可执行文件<br><br>rwx 作用到目录：<br><span class="hljs-symbol">	r:</span> 可以读取，可以用 ls 查看目录内容<br><span class="hljs-symbol">	w:</span> 可以修改, 可以对目录进行 创建+删除+重命名目录<br><span class="hljs-symbol">	x:</span> 可以进入该目录<br><br></code></pre></td></tr></table></figure>

<h3 id="10-9文件-x2F-目录权限实际案例"><a href="#10-9文件-x2F-目录权限实际案例" class="headerlink" title="10.9	文件&#x2F;目录权限实际案例"></a>10.9	文件&#x2F;目录权限实际案例</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs gcode">ls -l 中显示的内容如下：<br><span class="hljs-comment">(ll 是 ls -l的别名缩写)</span><br>-rwxrw-r-- <span class="hljs-number">1</span> root root <span class="hljs-number">1213</span> Feb <span class="hljs-number">2</span> <span class="hljs-number">09</span>:<span class="hljs-number">39</span> abc<br><br>第一列中 <span class="hljs-number">10</span> 个字符 确定不同用户能对文件干什么<span class="hljs-comment">(权限)</span>：<br>	第一个字符代表文件类型： - l d c b<br>	其余字符每 <span class="hljs-number">3</span> 个一组<span class="hljs-comment">(rwx)</span> 读<span class="hljs-comment">(r)</span> 写<span class="hljs-comment">(w)</span> 执行<span class="hljs-comment">(x)</span> <br>	<br>	第一组 rwx：文件所有者的权限是 读、写和执行<br>	第二组 rw-：与文件所有者同一组的用户的权限是 读、写但不能执行<br>	第三组 r- ：不与文件拥所有者同组的其他用户 的权限是 读不能写和执行<br><br>也可以用数字表示对应的权限：<br>	r=<span class="hljs-number">4</span>,w=<span class="hljs-number">2</span>,x=<span class="hljs-number">1</span>  <br>	因此 rwx=<span class="hljs-number">4</span><span class="hljs-number">+2</span><span class="hljs-number">+1</span>=<span class="hljs-number">7</span> <br>	数字可以进行组合<br><br>其它说明：<br>	第二列：<span class="hljs-number">1</span>				如果是普通文件，直接就是<span class="hljs-number">1</span>；<br>							如果是目录，代表该目录下有多少内容<span class="hljs-comment">(即子目录数+文件数)</span><br>							<br>	第三列：root				该文件/目录的所有者<br>	第四列：root				该文件/目录的所在组<br>	第五列：<span class="hljs-number">1213</span>				文件大小<span class="hljs-comment">(这里是字节)</span><br>	第六列：Feb <span class="hljs-number">2</span> <span class="hljs-number">09</span>:<span class="hljs-number">39</span>		最后修改日期<br>	第七列：abc				文件名<br><br></code></pre></td></tr></table></figure>

<h3 id="10-10修改权限-chmod"><a href="#10-10修改权限-chmod" class="headerlink" title="10.10	修改权限-chmod"></a>10.10	修改权限-chmod</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs routeros">基本说明：<br>通过 chmod 指令，可以修改文件或者目录的权限。<br>如果目录没有x权限，则代表不能进入该文件夹<br>如果父目录没有x权限，即便父目录中的文件有可读权限，依然无法访问<br>如果父目录有x权限但是没有rw权限，而目录中的文件有rw权限，则便可以对目录中的文件进行修改<br><br>第一种方式：通过 + 、-、=  变更权限<br>	u:所有者	<br>	g:所在组(同一个组的其他用户)	<br>	o:其他人(不同一个组的其他用户)	<br>	a:所有人(所有用户)(u、g、o 的总和)<br>	<br>	chmod 	<span class="hljs-attribute">u</span>=rwx,g=rx,o=x	文件/目录名  (该文件/目录的u的权限是rwx，g的权限是rx，o的权限是x)<br>	chmod	o+w				文件/目录名  (该文件/目录的o的权限加上w)<br>	chmod	a-x				文件/目录名  (取消该文件/目录的a的x权限)<br>	<br>	<br>案例演示：<br>1.给 abc 文件 的所有者读写执行的权限，给所在组读执行权限，给其它组读执行权限。<br>chmod <span class="hljs-attribute">u</span>=rwx,g=rx,o=rx abc<br><br>2.给 abc 文件的所有者除去执行的权限，增加组写的权限<br>chmod u-x,g+w abc<br><br>3.给 abc 文件的所有用户添加读的权限<br>chmod a+r abc<br><br><br><br>注意：<br>	可执行文件 	图标	   绿色<br>	普通文件	 	图标    白色<br>	目录/文件夹	图标    蓝色<br>	压缩文件		图标    红色<br><br><br><br>第二种方式：通过数字变更权限<br>	权限可以用数字代替：<span class="hljs-attribute">r</span>=4 <span class="hljs-attribute">w</span>=2 <span class="hljs-attribute">x</span>=1	<br>	 <br>	chmod <span class="hljs-attribute">u</span>=rwx,g=rx,o=x 文件/目录名<br>	相当于 <br>	chmod 751		     文件/目录名<br>	<br>	<span class="hljs-attribute">rwx</span>=4+2+1=7<br>	<span class="hljs-attribute">rx</span>=4+1=5<br>	<span class="hljs-attribute">x</span>=1<br><br>案例演示<br>要求：将 /home/abc.txt 文件的权限修改成	rwxr-xr-x,使用给数字的方式实现：<br>	rwxr-xr-x：u-rwx <span class="hljs-attribute">g</span>=r-x <span class="hljs-attribute">o</span>=r-x<br>	chmod 755 /home/abc.txt<br><br></code></pre></td></tr></table></figure>

<h3 id="10-11修改文件-x2F-目录的所有者-chown"><a href="#10-11修改文件-x2F-目录的所有者-chown" class="headerlink" title="10.11	修改文件&#x2F;目录的所有者-chown"></a>10.11	修改文件&#x2F;目录的所有者-chown</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs awk">基本介绍<br>chown	newowner			文件/目录	(修改所有者)<br>chown 	newowner:newgroup	文件/目录 	(同时修改所有者和所在组)<br><br>选项：-R	如果是目录 则使其下所有子文件或目录递归生效<br><br>案例演示<br><span class="hljs-number">1</span>.请将 <span class="hljs-regexp">/home/</span>abc.txt 文件的所有者修改成 tom<br>chown tom <span class="hljs-regexp">/home/</span>abc.txt<br><br><span class="hljs-number">2</span>.请将 <span class="hljs-regexp">/home/</span>test 目录下所有的文件和目录的所有者都修改成 tom <br>chown -R tom <span class="hljs-regexp">/home/</span>test<br><br>R:Recursive递归<br><br></code></pre></td></tr></table></figure>

<h3 id="10-12修改文件-x2F-目录的所在组-chgrp"><a href="#10-12修改文件-x2F-目录的所在组-chgrp" class="headerlink" title="10.12	修改文件&#x2F;目录的所在组-chgrp"></a>10.12	修改文件&#x2F;目录的所在组-chgrp</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">chgrp  newgroup  文件/目录	(改变所在组)<br><br>案例演示:<br><span class="hljs-number">1</span>.请将 <span class="hljs-regexp">/home/</span>abc.txt 文件的所在组修改成 shaolin (少林) <br>groupadd shaolin<br>chgrp shaolin <span class="hljs-regexp">/home/</span>abc.txt<br><br><span class="hljs-number">2</span>.请将 <span class="hljs-regexp">/home/</span>test 目录下所有的文件和目录的所在组都修改成 shaolin(少林) <br>chgrp -R shaolin <span class="hljs-regexp">/home/</span>test<br><br></code></pre></td></tr></table></figure>

<h3 id="10-13最佳实践-警察和土匪游戏"><a href="#10-13最佳实践-警察和土匪游戏" class="headerlink" title="10.13	最佳实践-警察和土匪游戏"></a>10.13	最佳实践-警察和土匪游戏</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs bash">有两个组：police组，bandit组<br>有四个用户：jackie,jerry,xh,xq<br>jackie,jerry: 警察<br>xh,xq: 土匪<br><br>1.创建组	<br>	groupadd police<br>	groupadd bandit<br>2.创建用户(直接放到对应组)<br>	useradd -g police jackie<br>	useradd -g police jerry<br>	useradd -g bandit xh<br>	useradd -g bandit xq<br>3.jackie 创建一个文件，自己可以读 r 写 w，本组人可以读，其它组没人任何权限<br>	首先jackie登录，可以使用切换用户：su jackie ----&gt;这样不行，无法创建文件，权限不够<br><br>	使用jackie登录，先设置密码123，然后退出系统用jackie登录：passwd jackie<br>	然后创建文件：<span class="hljs-built_in">touch</span> jackie.txt <br>	权限设置：<br>		原权限：rw-r--r--<br>		<span class="hljs-built_in">chmod</span> o-r jackie.txt <br>		修改后权限：rw-r-----<br>		<br>		也可以直接使用数字方式：<span class="hljs-built_in">chmod</span> 640 jackie.txt<br>		<br>4.jackie 修改该文件，让其它组人可以读，本组人可以读写<br>	<span class="hljs-built_in">chmod</span> g+w o+r jackie.txt <br>	或者<br>	<span class="hljs-built_in">chmod</span> 664 jackie.txt<br><br>	改后权限：rw-rw-r--<br>	<br>5.xh投靠警察<br>	由root执行这条指令<br>	usermod -g police xh<br><br>6.测试xh和xq能不能对jackie.txt文件进行读写<br>	分别使用xh和xq登录(首先对其设置密码123)<br>		<br>	jackie.txt文件在jackie目录下<br>	要想对jackie.txt文件进行操作，首先进入jackie目录<br>	但是jackie目录权限是：rwx------<br>	所以xh连jackie目录都进不去<br><br>	解决办法：登录jackie，对jackie目录权限进行修改(也可以登录root进行修改)(必须都在home下才能执行这个修改权限命令)<br>		登录<br>		<span class="hljs-built_in">cd</span> /home/<br>		ll<br>		得到jackie原目录权限：rwx------<br>		修改权限：<span class="hljs-built_in">chmod</span> 770 jackie			(权限中有x才能进入目录)<br>		修改后jackie目录权限：rwxrwx---<br><br>		这时xh就可以进入jackie目录，并对jackie.txt进行读写<br>	<br>	<br>结论：如果要对目录内的文件进行操作，首先要有对该目录有相应权限<br><br></code></pre></td></tr></table></figure>

<h3 id="10-14课后练习1"><a href="#10-14课后练习1" class="headerlink" title="10.14	课后练习1"></a>10.14	课后练习1</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">1.建立两个组（神仙<span class="hljs-params">(sx)</span>,妖怪<span class="hljs-params">(yg)</span>）<br>	groupadd sx<br>	groupadd yg<br>2.建立四个用户<span class="hljs-params">(唐僧,悟空，八戒，沙僧)</span><br>	useradd ts<br>	useradd wk<br>	useradd bj<br>	useradd ss<br>3.设置密码<span class="hljs-params">(都为123)</span><br>	passwd ts<br>	passwd wk<br>	passwd bj<br>	passwd ss<br>4.妖怪组：悟空，八戒；神仙组：唐僧，沙僧<br>	usermod -g yg wk<br>	usermod -g yg bj<br>	usermod -g sx ts<br>	usermod -g sx ss<br>5.用悟空建立一个文件 monkey.txt ，该文件要输出 i am a monkey<br>	先使用悟空登录<br>	vim monkey.txt<br>	i am a monkey<br>	<span class="hljs-function">:wq</span><br>6.给八戒一个可以 r w 的权限<br>	悟空和八戒是一组的<br>	当前monkey.txt权限：-rw-r<span class="hljs-params">--r--</span><br>	此时八戒只能r<br>	命令：chmod g+w monkey.txt<br>	现在monkey.txt权限：-rw-rw-r--<br><br>7.八戒修改 monkey.txt 加入一句话<span class="hljs-params">( i am a pig)</span><br>	monkey.txt文件在wk目录下<br>	八戒要修改monkey.txt文件就要先进入wk目录<br>	但是此时wk目录权限：rwx<span class="hljs-params">------</span><br>	八戒进不去wk目录<br>	所以先修改wk目录权限：chmod g+r+w+x wk  <span class="hljs-params">(先把所以权限都给，在wk的home下写指令或root的home下写指令，因为目录在home下)</span><br>	现在wk目录权限：rwxrwx<span class="hljs-params">---</span><br>	这时八戒就能进入wk目录了<br><br>8.唐僧 沙僧 对该文件没有权限<br>	唐僧和沙僧是其他组，进不去wk目录<br><br>9.把 沙僧 放入妖怪组<br>	usermod -g yg ss<br>	<br>10.让沙僧修改该文件 monkey.txt, 加入一句话 <span class="hljs-params">(&quot;我是沙僧，我是妖怪!&quot;)</span>;<br>	使用沙僧登录<br>	<span class="hljs-keyword">cd</span> <span class="hljs-string">/home/wk</span><br>	viw monkey.txt<br>	<span class="hljs-string">...</span><br>	<span class="hljs-function">:wq</span><br><br><br>注意：<br>rwx权限对于 文件夹<span class="hljs-params">(目录)</span> 的细节讨论和测试!!!<br>	x: 表示可以进入到该目录,比如 <span class="hljs-keyword">cd</span><br>	r: 表示可以 <span class="hljs-keyword">ls</span> ,将目录的内容显示<br>	w: 表示可以在该目录下删除或者创建文件<span class="hljs-params">(不代表：修改已有的文件)</span><br><br></code></pre></td></tr></table></figure>

<h3 id="10-15课后练习2"><a href="#10-15课后练习2" class="headerlink" title="10.15	课后练习2"></a>10.15	课后练习2</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">1)	用 root 登录，建立用户 mycentos,自己设定密码<br>2)	用 mycentos 登录，在主目录下建立目录 <span class="hljs-built_in">test</span>/t11/t1<br>3)	在 t1 中建立一个文本文件 aa,用 vi 编辑其内容为 <span class="hljs-built_in">ls</span>  –al<br>4)	改变 aa 的权限为可执行文件[可以将当前日期追加到一个文件],运行该文件./aa<br>5)	删除新建立的目录 <span class="hljs-built_in">test</span>/t11/t1<br>6)	删除用户 mycentos 及其主目录中的内容<br>7)	将 linux 设置成进入到图形界面的<br>8)	重新启动 linux 或关机<br><br></code></pre></td></tr></table></figure>

<h2 id="七、Linux实操篇-定时任务调度"><a href="#七、Linux实操篇-定时任务调度" class="headerlink" title="七、Linux实操篇-定时任务调度"></a>七、Linux实操篇-定时任务调度</h2><h3 id="7-1-crond任务调度"><a href="#7-1-crond任务调度" class="headerlink" title="7.1	 crond任务调度"></a>7.1	 crond任务调度</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-number">1</span>.概述<br>任务调度：是指系统在某个时间执行特定的命令或程序。<br>crond---&gt;周期任务<br><br>任务调度分类：<br>	(<span class="hljs-number">1</span>)系统工作：有些重要的工作必须周而复始地执行。如病毒扫描等<br>	(<span class="hljs-number">2</span>)个别用户工作：个别用户可能希望执行某些程序，比如对 mysql 数据库的备份。<br><br>示意图：<br><br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040946819.png" srcset="/img/loading.gif" lazyload alt="image-20230704094649102"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-number">2</span>.基本语法<br>	crontab <span class="hljs-selector-attr">[选项]</span><br>	功能：进行定时任务的设置<br>	<br><span class="hljs-number">3</span>.常用选项<br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040947523.png" srcset="/img/loading.gif" lazyload alt="image-20230704094730437"></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">4</span>.快速入门<br>在<span class="hljs-regexp">/etc/</span>下有一个crontab文件，在这个文件中写入所有的定时任务<br><br>输入crontab -e  就会进入crontab文件<br>然后在文件中写入定时任务：*<span class="hljs-regexp">/1 * * * * ls –l	/</span>etc<span class="hljs-regexp">/ &gt; /</span>tmp/to.txt<br>意思说每小时的每分钟执行 ls –l <span class="hljs-regexp">/etc/</span> &gt; <span class="hljs-regexp">/tmp/</span>to.txt 命令<br>最后保存退出<br><br><br>参数细节说明：<br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040948096.png" srcset="/img/loading.gif" lazyload alt="image-20230704094804003"></p>
<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040948666.png" srcset="/img/loading.gif" lazyload alt="image-20230704094821573"></p>
<p>特定时间执行任务案例</p>
<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040948564.png" srcset="/img/loading.gif" lazyload alt="image-20230704094842459"></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">5</span>.应用实例<br>案例 <span class="hljs-number">1</span>：每隔 <span class="hljs-number">1</span> 分钟，就将当前的日期信息，追加到 <span class="hljs-regexp">/tmp/my</span>date 文件中<br>crontab -e<br>*<span class="hljs-regexp">/1 * * * * date &gt;&gt; /</span>tmp/mydate<br><br><br>案例 <span class="hljs-number">2</span>：每隔 <span class="hljs-number">1</span> 分钟，将当前日期和日历都追加到 <span class="hljs-regexp">/home/my</span>cal 文件中<br>第一种方法：<br>	crontab -e<br>	在crontab文件中输入：<br>	*<span class="hljs-regexp">/1 * * * * date &gt;&gt; /</span>home/mycal <br>	*<span class="hljs-regexp">/1 * * * * cal &gt;&gt; /</span>home/mycal <br>	保存退出<br><br>第二种方法：<br>	将 date &gt;&gt; <span class="hljs-regexp">/home/my</span>cal 和  cal &gt;&gt; <span class="hljs-regexp">/home/my</span>cal 命令写在文件 <span class="hljs-regexp">/home/my</span>.sh中<br>	就是将命令都写在shell脚本中，直接调用shell脚本<br><br>	步骤：<br>		vim <span class="hljs-regexp">/home/my</span>.sh<br>		在my.sh中写入：<br>			date &gt;&gt; <span class="hljs-regexp">/home/my</span>cal<br>			cal &gt;&gt; <span class="hljs-regexp">/home/my</span>cal<br>			:wq<br>		给 my.sh 增加执行权限：chmod u+x <span class="hljs-regexp">/home/my</span>.sh (否则无法使用crontab命令)<br>		crontab -e<br>		在crontab中写入：*<span class="hljs-regexp">/1 * * * *	/</span>home/my.sh<br><br>注意：可以写脚本也可以不写脚本<br><br><br>案例 <span class="hljs-number">3</span>:	每天凌晨 <span class="hljs-number">2</span>:<span class="hljs-number">00</span>  将 mysql 数据库 testdb 备份到文件中。<br>提示: 指令为 mysqldump -u root -p密码 数据库 &gt; <span class="hljs-regexp">/home/</span>db.bak<br>步骤(<span class="hljs-number">1</span>) crontab -e<br>步骤(<span class="hljs-number">2</span>) <span class="hljs-number">0</span> <span class="hljs-number">2</span> * * * mysqldump -u root -proot testdb &gt; <span class="hljs-regexp">/home/</span>db.bak<br><br><br><br><br><span class="hljs-number">6</span>. crond 相关指令<br>conrtab –r：终止任务调度。<br>crontab –l：列出当前有那些任务调度<br>service crond restart：重启任务调度<br><br></code></pre></td></tr></table></figure>

<h3 id="7-2-at定时任务"><a href="#7-2-at定时任务" class="headerlink" title="7.2	 at定时任务"></a>7.2	 at定时任务</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-number">1.</span>基本介绍<br><span class="hljs-comment">(1)</span>	at 命令是一次性定时计划任务，at 的守护进程 atd 会以后台模式运行，检查作业队列来运行；<br><span class="hljs-comment">(2)</span> 每个作业队列<span class="hljs-comment">(任务队列)</span>中都有作业<span class="hljs-comment">(作业里是指令/脚本)</span>；<br><span class="hljs-comment">(3)</span>	默认情况下，atd 守护进程每 <span class="hljs-number">60</span> 秒检查作业队列；<br>	有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业；<br>	运行完这个作业<span class="hljs-comment">(任务)</span>之后，这个作业就不会再被执行了；<br><span class="hljs-comment">(4)</span>	at 命令是一次性定时计划任务，执行完一个任务后不再执行此任务了；<br><span class="hljs-comment">(5)</span>	在使用 at 命令的时候，一定要保证 atd 进程的启动，可以使用相关指令来查看<br>	ps -ef	| grep atd <span class="hljs-comment">//可以检测 atd 是否在运行</span><br>	ps -ef ---&gt; 查看所有的进程	<br><br>总结：at命令就是对某个定时任务只执行一次<br><br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040951719.png" srcset="/img/loading.gif" lazyload alt="image-20230704095107649"></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-number">2</span>. <span class="hljs-keyword">at</span> 命令格式<br>	<span class="hljs-keyword">at</span> [选项] [时间]<br>	然后输入两次：Ctrl + D	(结束 <span class="hljs-keyword">at</span> 命令的输入)<br><br><span class="hljs-number">3</span>. <span class="hljs-keyword">at</span> 命令选项：<br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040951176.png" srcset="/img/loading.gif" lazyload alt="image-20230704095124057"></p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-number">4.</span> at 指定时间的方法：<br><br>(<span class="hljs-number">1</span>)	接受在当天的 hh:mm（小时:分钟）式的时间指定。<br>	假如该时间已过去，那么就放在第二天执行。 例如：<span class="hljs-number">04</span>:<span class="hljs-number">00</span><br>(<span class="hljs-number">2</span>)	使用 midnight（深夜），noon（中午），teatime（饮茶时间，一般是下午 <span class="hljs-number">4</span> 点）等比较模糊的词语来指定时间。<br>(<span class="hljs-number">3</span>)	采用 <span class="hljs-number">12</span> 小时计时制，即在时间后面加上 AM（上午）或 PM（下午）来说明是上午还是下午。 <br>	例如：<span class="hljs-number">12</span>pm<br>(<span class="hljs-number">4</span>)	指定命令执行的具体日期，指定格式为 <span class="hljs-built_in">month</span> <span class="hljs-built_in">day</span>（月 日）或 mm/dd/yy（月/日/年）或 dd.mm.yy（日.月.年），指定的日期必须跟在指定时间的后面。 <br>	例如：<span class="hljs-number">04</span>:<span class="hljs-number">00</span> <span class="hljs-number">2021</span><span class="hljs-number">-03</span><span class="hljs-number">-1</span> (小的时间写前面，大的时间写后面)<br>(<span class="hljs-number">5</span>)	使用相对计时法。<br>	指定格式为：<span class="hljs-built_in">now</span> + <span class="hljs-built_in">count</span> time-units<br>	<span class="hljs-built_in">now</span> 就是当前时间，time-units 是时间单位，这里能够是 minutes（分钟）、hours（小时）、days（天）、weeks（星期）。<br>	<span class="hljs-built_in">count</span> 是时间的数量，几天，几小时。 <br>	例如：<span class="hljs-built_in">now</span> + <span class="hljs-number">5</span> minutes<br>(<span class="hljs-number">6</span>)	直接使用 <span class="hljs-built_in">today</span>（今天）、tomorrow（明天）来指定完成命令的时间。<br><br><br><br><span class="hljs-number">5.</span>应用实例<br>案例 <span class="hljs-number">1</span>：<span class="hljs-number">2</span> 天后的下午 <span class="hljs-number">5</span> 点执行 /bin/ls /home<br>	at <span class="hljs-number">5</span>pm + <span class="hljs-number">2</span> days<br>	/bin/ls /home<br>	两次ctrl+D<br>	<br>案例 <span class="hljs-number">2</span>：atq 命令来查看系统中没有执行的工作任务<br>	直接输入atq 查询<br><br>案例 <span class="hljs-number">3</span>：明天<span class="hljs-number">17</span>点钟，输出时间到指定文件内 比如 /root/date100.<span class="hljs-built_in">log</span><br>	at <span class="hljs-number">5</span>pm tomorrow<br>	<span class="hljs-built_in">date</span> &gt; <span class="hljs-regexp">/root/</span>date100.<span class="hljs-built_in">log</span><br>	两次ctrl+D<br>	<br>案例 <span class="hljs-number">4</span>：<span class="hljs-number">2</span>分钟后，输出时间到指定文件内 比如 /root/date200.<span class="hljs-built_in">log</span><br>	at <span class="hljs-built_in">now</span> + <span class="hljs-number">2</span> minutes<br>	<span class="hljs-built_in">date</span> &gt; <span class="hljs-regexp">/root/</span>date200.<span class="hljs-built_in">log</span><br>	两次ctrl+D<br>	<br>案例 <span class="hljs-number">5</span>：删除已经设置的任务<br>	atrm 任务编号<br>	atrm <span class="hljs-number">4</span> <span class="hljs-comment">//表示将 job 队列，编号为 4 的 job 删除.</span><br><br>	atq:<br>	<span class="hljs-number">2</span>	Thu Feb <span class="hljs-number">24</span> <span class="hljs-number">09</span>:<span class="hljs-number">53</span>:<span class="hljs-number">00</span> <span class="hljs-number">2022</span> a root<br>	<span class="hljs-number">1</span>	Fri Feb <span class="hljs-number">25</span> <span class="hljs-number">17</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-number">2022</span> a root<br>	第一列就是编号<br><br><br>注意：也可以执行脚本<br>比如：<br>	at <span class="hljs-built_in">now</span> +<span class="hljs-number">2</span> minutes<br>	/root/my.sh  <br>	但要有这个脚本，并且有执行权限x<br><br></code></pre></td></tr></table></figure>

<h2 id="八、Linux-实操篇-Linux-磁盘分区、挂载"><a href="#八、Linux-实操篇-Linux-磁盘分区、挂载" class="headerlink" title="八、Linux 实操篇-Linux 磁盘分区、挂载"></a>八、Linux 实操篇-Linux 磁盘分区、挂载</h2><h3 id="8-1-Linux-分区"><a href="#8-1-Linux-分区" class="headerlink" title="8.1	 Linux 分区"></a>8.1	 Linux 分区</h3><h4 id="8-1-1原理介绍"><a href="#8-1-1原理介绍" class="headerlink" title="8.1.1	原理介绍"></a>8.1.1	原理介绍</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs scss">(<span class="hljs-number">1</span>) Linux 无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构 <br>	Linux 中每个分区都是用来组成整个文件系统的一部分。<br><br>(<span class="hljs-number">2</span>)	Linux 采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。<br>	这时要载入的一个分区将使它的存储空间在一个目录下获得。<br><br>(<span class="hljs-number">3</span>)图解：<br>硬盘上的一个分区 通过挂载mount机制 与文件系统中的某个目录联系起来<br>即分区挂载到目录<br>访问这个目录即访问这个分区<br>可以通过指令查看挂载情况，下面会说。<br><br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307040952057.png" srcset="/img/loading.gif" lazyload alt="image-20230704095240952"></p>
<h4 id="8-1-2硬盘说明"><a href="#8-1-2硬盘说明" class="headerlink" title="8.1.2	硬盘说明"></a>8.1.2	硬盘说明</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">(<span class="hljs-number">1</span>)	Linux 硬盘主要分为：<br>	 IDE 硬盘和 <span class="hljs-keyword">SCSI </span>硬盘<br>	 目前基本上是 <span class="hljs-keyword">SCSI </span>硬盘<br><br>(<span class="hljs-number">2</span>)	对于 IDE 硬盘，驱动器标识符为“hdx~”<br>	其中“hd”表明分区所在设备的类型，这里是指 IDE 硬盘<br>	<br>	“x”为盘号<br>		a 为基本盘 第一个硬盘<br>		<span class="hljs-keyword">b </span>为基本从属盘 第二个硬盘<br>		c 为辅助主盘 第三个硬盘<br>		d 为辅助从属盘 第四个硬盘<br>		<br>	“~”代表分区<br>		前四个分区用数字 <span class="hljs-number">1</span> 到 <span class="hljs-number">4</span> 表示，它们是主分区或扩展分区，从 <span class="hljs-number">5</span> 开始就是逻辑分区<br>	<br>	例：hda3 表示为第一个 IDE 硬盘上的第三个主分区或扩展分区<br>	     hdb2 表示为第二个 IDE 硬盘上的第二个主分区或扩展分区<br>	     <br>(<span class="hljs-number">3</span>)	对于 <span class="hljs-keyword">SCSI </span>硬盘则标识为“sdx~”<br>	<span class="hljs-keyword">SCSI </span>硬盘是用“sd”来表示分区所在设备的类型的，其余则和 IDE 硬盘的表示方法一样<br><br></code></pre></td></tr></table></figure>



<h4 id="8-1-3查看所有设备挂载情况"><a href="#8-1-3查看所有设备挂载情况" class="headerlink" title="8.1.3	查看所有设备挂载情况"></a>8.1.3	查看所有设备挂载情况</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs subunit">命令 ：lsblk	或者 lsblk -f<br><br>lsblk：list block devices <br><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0   20G  0 disk <br>├─sda1   8:1    0    1G  0 part /boot<br>├─sda2   8:2    0    2G  0 part [SWAP]<br>└─sda3   8:3    0   17G  0 part /<br>sr0     11:0    1  4.3G  0 rom <br><br>sda1分区挂载到/boot目录<br>sda2分区挂载到swap目录<br>sda3分区挂载到根目录<br><br><br><br>lsblk -f (更加详细的显示)<br><br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>├─sda1 ext4                    bd7b7249-b3fa<span class="hljs-string">-434</span>f-acfd<span class="hljs-string">-5127</span>a56c0673 /boot<br>├─sda2 swap                    4381675a<span class="hljs-string">-652</span>c<span class="hljs-string">-4</span>ffa<span class="hljs-string">-9</span>a9d-cb23d19be79b [SWAP]<br>└─sda3 ext4                    531c2867-a7e9<span class="hljs-string">-4</span>ae7<span class="hljs-string">-8</span>f79<span class="hljs-string">-4453</span>ceb76c5b /<br>sr0    iso9660 CentOS 7 x86_64 2018<span class="hljs-string">-11</span><span class="hljs-string">-25</span><span class="hljs-string">-23</span><span class="hljs-string">-54</span><span class="hljs-string">-16</span><span class="hljs-string">-00</span>    <br><br>第一列可以看到设备/硬盘分区情况<br>FSTYPE:文件系统类型<br>UUID:格式化之后，会给每一个分区分配一个 唯一的 不重复的 40位 的 字符串<br>MOUNTPOINT:挂载点<br><br></code></pre></td></tr></table></figure>

<h3 id="8-2挂载的经典案例"><a href="#8-2挂载的经典案例" class="headerlink" title="8.2	挂载的经典案例"></a>8.2	挂载的经典案例</h3><h4 id="8-2-1说明"><a href="#8-2-1说明" class="headerlink" title="8.2.1	说明"></a>8.2.1	说明</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">下面我们以增加一块硬盘为例来熟悉一下磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念。<br></code></pre></td></tr></table></figure>

<h4 id="8-2-2如何增加一块硬盘"><a href="#8-2-2如何增加一块硬盘" class="headerlink" title="8.2.2	如何增加一块硬盘"></a>8.2.2	如何增加一块硬盘</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs">1)	虚拟机添加硬盘<br>2)	分区<br>3)	格式化<br>4)	挂载<br>5)	设置可以自动挂载<br><br></code></pre></td></tr></table></figure>

<h4 id="8-2-3虚拟机增加硬盘步骤-1-虚拟机添加硬盘"><a href="#8-2-3虚拟机增加硬盘步骤-1-虚拟机添加硬盘" class="headerlink" title="8.2.3	虚拟机增加硬盘步骤 1-虚拟机添加硬盘"></a>8.2.3	虚拟机增加硬盘步骤 1-虚拟机添加硬盘</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs tap">在【虚拟机】菜单中选择【设置】<br>然后设备列表里添加硬盘<br>然后一路【下一步】<br>中间只有选择磁盘大小的地方需要修改，至到完成<br><br>使用命令lsblk发现没有新增的硬盘？<br>	需要重启系统（才能识别）<br><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0   <span class="hljs-number"> 0 </span>  20G <span class="hljs-number"> 0 </span>disk <br>├─sda1   8:1   <span class="hljs-number"> 0 </span>   1G <span class="hljs-number"> 0 </span>part /boot<br>├─sda2   8:2   <span class="hljs-number"> 0 </span>   2G <span class="hljs-number"> 0 </span>part [SWAP]<br>└─sda3   8:3   <span class="hljs-number"> 0 </span>  17G <span class="hljs-number"> 0 </span>part /<br>sdb      8:16  <span class="hljs-number"> 0 </span>   1G <span class="hljs-number"> 0 </span>disk <br>sr0     11:0   <span class="hljs-number"> 1 </span> 4.3G <span class="hljs-number"> 0 </span>rom  <br>新增硬盘sdb，还未分区。<br><br></code></pre></td></tr></table></figure>

<h4 id="8-2-4-虚拟机增加硬盘步骤-2-分区"><a href="#8-2-4-虚拟机增加硬盘步骤-2-分区" class="headerlink" title="8.2.4	 虚拟机增加硬盘步骤 2-分区"></a>8.2.4	 虚拟机增加硬盘步骤 2-分区</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs sql">对sdb进行分区：<br><br>分区命令：fdisk <span class="hljs-operator">/</span>dev<span class="hljs-operator">/</span>sdb   (dev目录下是一些设备)<br>步骤：<br>	开始分区后输入 n  (新增分区)<br>	然后选择 p     	(分区类型为主分区)<br>	两次回车<br>	最后输入 w  (写入分区并退出)(若不保存并退出输入 q，即上面步骤出错了想重来就可以输入q)<br><br>说明：<br>	m	显示命令列表           <br>	p	显示磁盘分区 (同 fdisk –l) <br>	n	新增分区<br>	d	删除分区<br>	w	写入并退出<br><br><br>命令(输入 m 获取帮助)：m<br>命令操作<br>   a   toggle a bootable flag<br>   b   edit bsd disklabel<br>   c   toggle the dos compatibility flag<br>   d   <span class="hljs-keyword">delete</span> a <span class="hljs-keyword">partition</span><br>   g   <span class="hljs-keyword">create</span> a <span class="hljs-keyword">new</span> <span class="hljs-keyword">empty</span> GPT <span class="hljs-keyword">partition</span> <span class="hljs-keyword">table</span><br>   G   <span class="hljs-keyword">create</span> an IRIX (SGI) <span class="hljs-keyword">partition</span> <span class="hljs-keyword">table</span><br>   l   list known <span class="hljs-keyword">partition</span> types<br>   m   print this menu<br>   n   <span class="hljs-keyword">add</span> a <span class="hljs-keyword">new</span> <span class="hljs-keyword">partition</span><br>   o   <span class="hljs-keyword">create</span> a <span class="hljs-keyword">new</span> <span class="hljs-keyword">empty</span> DOS <span class="hljs-keyword">partition</span> <span class="hljs-keyword">table</span><br>   p   print the <span class="hljs-keyword">partition</span> <span class="hljs-keyword">table</span><br>   q   quit <span class="hljs-keyword">without</span> saving changes<br>   s   <span class="hljs-keyword">create</span> a <span class="hljs-keyword">new</span> <span class="hljs-keyword">empty</span> Sun disklabel<br>   t   change a <span class="hljs-keyword">partition</span><span class="hljs-string">&#x27;s system id</span><br><span class="hljs-string">   u   change display/entry units</span><br><span class="hljs-string">   v   verify the partition table</span><br><span class="hljs-string">   w   write table to disk and exit</span><br><span class="hljs-string">   x   extra functionality (experts only)</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">选择分区类型：主分区/扩展分区</span><br><span class="hljs-string">命令(输入 m 获取帮助)：n</span><br><span class="hljs-string">Partition type:</span><br><span class="hljs-string">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="hljs-string">   e   extended</span><br><span class="hljs-string">Select (default p): p</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">分区号 (1-4，默认 1)：                  ---&gt;输入2，硬盘就有2个分区</span><br><span class="hljs-string">起始 扇区 (2048-2097151，默认为 2048)：</span><br><span class="hljs-string">将使用默认值 2048</span><br><span class="hljs-string">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-2097151，默认为 2097151)：</span><br><span class="hljs-string">将使用默认值 2097151</span><br><span class="hljs-string">分区 1 已设置为 Linux 类型，大小设为 1023 MiB</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">命令(输入 m 获取帮助)：w</span><br><span class="hljs-string">The partition table has been altered!</span><br><span class="hljs-string"></span><br><span class="hljs-string">Calling ioctl() to re-read partition table.</span><br><span class="hljs-string">正在同步磁盘。</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">lsblk</span><br><span class="hljs-string">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="hljs-string">sda      8:0    0   20G  0 disk </span><br><span class="hljs-string">├─sda1   8:1    0    1G  0 part /boot</span><br><span class="hljs-string">├─sda2   8:2    0    2G  0 part [SWAP]</span><br><span class="hljs-string">└─sda3   8:3    0   17G  0 part /</span><br><span class="hljs-string">sdb      8:16   0    1G  0 disk </span><br><span class="hljs-string">└─sdb1   8:17   0 1023M  0 part </span><br><span class="hljs-string">sr0     11:0    1  4.3G  0 rom  </span><br><span class="hljs-string">分区成功</span><br><span class="hljs-string">硬盘sdb中只有一个分区sdb1</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure>

<h4 id="8-2-5-虚拟机增加硬盘步骤-3-格式化"><a href="#8-2-5-虚拟机增加硬盘步骤-3-格式化" class="headerlink" title="8.2.5	 虚拟机增加硬盘步骤 3-格式化"></a>8.2.5	 虚拟机增加硬盘步骤 3-格式化</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs subunit">格式化磁盘<br><br>为什么要格式化？<br>	给这个分区指定它的文件类型<br><br>[root@Edu01 ~]# lsblk -f<br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>├─sda1 ext4                    bd7b7249-b3fa<span class="hljs-string">-434</span>f-acfd<span class="hljs-string">-5127</span>a56c0673 /boot<br>├─sda2 swap                    4381675a<span class="hljs-string">-652</span>c<span class="hljs-string">-4</span>ffa<span class="hljs-string">-9</span>a9d-cb23d19be79b [SWAP]<br>└─sda3 ext4                    531c2867-a7e9<span class="hljs-string">-4</span>ae7<span class="hljs-string">-8</span>f79<span class="hljs-string">-4453</span>ceb76c5b /<br>sdb                                                                 <br>└─sdb1                                                              <br>sr0    iso9660 CentOS 7 x86_64 2018<span class="hljs-string">-11</span><span class="hljs-string">-25</span><span class="hljs-string">-23</span><span class="hljs-string">-54</span><span class="hljs-string">-16</span><span class="hljs-string">-00</span>    <br><br>sdb1的UUID为空，说明还没有格式化。<br><br>格式化命令:<br>	mkfs -t	ext4 /dev/sdb1 		其中 ext4 是分区类型<br><br></code></pre></td></tr></table></figure>

<h4 id="8-2-6虚拟机增加硬盘步骤-4-挂载"><a href="#8-2-6虚拟机增加硬盘步骤-4-挂载" class="headerlink" title="8.2.6	虚拟机增加硬盘步骤 4-挂载"></a>8.2.6	虚拟机增加硬盘步骤 4-挂载</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs subunit">挂载: 将一个分区与一个目录联系起来，<br>	命令：mount 设备名称 挂载目录<br><br>首先创建一个目录newdisk (目录位置随便)<br>假如在根目录下创建：mkdir newdisk<br>进行挂载：mount /dev/sdb1 /newdisk<br><br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>├─sda1 ext4                    bd7b7249-b3fa<span class="hljs-string">-434</span>f-acfd<span class="hljs-string">-5127</span>a56c0673 /boot<br>├─sda2 swap                    4381675a<span class="hljs-string">-652</span>c<span class="hljs-string">-4</span>ffa<span class="hljs-string">-9</span>a9d-cb23d19be79b [SWAP]<br>└─sda3 ext4                    531c2867-a7e9<span class="hljs-string">-4</span>ae7<span class="hljs-string">-8</span>f79<span class="hljs-string">-4453</span>ceb76c5b /<br>sdb                                                                 <br>└─sdb1 ext4                    d1856552-dee4<span class="hljs-string">-4</span>fbc<span class="hljs-string">-9953</span>-f650231ecaac /newdisk<br>sr0    iso9660 CentOS 7 x86_64 2018<span class="hljs-string">-11</span><span class="hljs-string">-25</span><span class="hljs-string">-23</span><span class="hljs-string">-54</span><span class="hljs-string">-16</span><span class="hljs-string">-00</span>  <br>挂载点有了，挂载成功。<br><br><br>卸载(去除分区与目录的联系)：<br>	命令：umount	设备名称 或者	挂载目录<br>	例如：umount	/dev/sdb1 或者 umount /newdisk<br><br><br>注意: 用命令行挂载,重启后会失效。<br><br></code></pre></td></tr></table></figure>

<h4 id="8-2-7虚拟机增加硬盘步骤-5-设置可以自动挂载"><a href="#8-2-7虚拟机增加硬盘步骤-5-设置可以自动挂载" class="headerlink" title="8.2.7	虚拟机增加硬盘步骤 5-设置可以自动挂载"></a>8.2.7	虚拟机增加硬盘步骤 5-设置可以自动挂载</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs awk">解决  用命令行挂载,重启后会失效 问题<br><br>永久挂载: <br>	通过修改<span class="hljs-regexp">/etc/</span>fstab 实现挂载<br>	添加完成后 执行 mount	–a 即刻生效 或者 重启系统reboot<br><br>步骤：<br>vim <span class="hljs-regexp">/etc/</span>fstab<br>增加一行：UUID=上面sdb1的UUID    /newdisk    ext4    defaults     <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>也可以是：<span class="hljs-regexp">/dev/</span>sdb1    		  /newdisk    ext4    defaults     <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><br><br><br><br>要挂载的设备或伪文件系统  挂载点  文件系统类型  挂载选项 转储频率 自检次序<br>UUID=上面sdb1的UUID   /newdisk    ext4    defaults   <span class="hljs-number">0</span> 	   <span class="hljs-number">0</span><br><br>要挂载的设备或伪文件系统：<br>	设备文件、LABEL(LABEL=<span class="hljs-string">&quot;&quot;</span>)、UUID(UUID=<span class="hljs-string">&quot;&quot;</span>)、伪文件系统名称(proc, sysfs)<br><br>挂载点：指定的文件夹<br><br>挂载选项：defaults<br><br>转储频率：<br>  <span class="hljs-number">0</span>：不做备份<br>  <span class="hljs-number">1</span>：每天转储<br>  <span class="hljs-number">2</span>：每隔一天转储<br><br>自检次序：<br>  <span class="hljs-number">0</span>：不自检<br>  <span class="hljs-number">1</span>：首先自检；一般只有rootfs才用<span class="hljs-number">1</span>；<br><br></code></pre></td></tr></table></figure>

<h3 id="8-3磁盘情况查询"><a href="#8-3磁盘情况查询" class="headerlink" title="8.3	磁盘情况查询"></a>8.3	磁盘情况查询</h3><h4 id="8-3-1查询系统整体磁盘使用情况"><a href="#8-3-1查询系统整体磁盘使用情况" class="headerlink" title="8.3.1	查询系统整体磁盘使用情况"></a>8.3.1	查询系统整体磁盘使用情况</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">基本语法:<br>	<span class="hljs-built_in">df</span> -h   (disk free)<br><br>查询系统整体磁盘使用情况<br><br></code></pre></td></tr></table></figure>

<h4 id="8-3-2查询指定目录的磁盘占用情况"><a href="#8-3-2查询指定目录的磁盘占用情况" class="headerlink" title="8.3.2	查询指定目录的磁盘占用情况"></a>8.3.2	查询指定目录的磁盘占用情况</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">基本语法：<br>	<span class="hljs-built_in">du</span> -h  指定目录    (disk usage)<br>功能：查询指定目录的磁盘占用情况，默认为当前目录<br>	-s 指定目录占用大小汇总<br>	-h 带计量单位<br>	-a 含文件<br>	--max-depth=1	子目录深度<br>	-c 列出明细的同时，增加汇总值<br><br>应用实例<br>查询 /opt 目录的磁盘占用情况，深度为 1<br>	<span class="hljs-built_in">du</span> -hac --max-depth=1 /opt<br><br></code></pre></td></tr></table></figure>

<h3 id="8-4磁盘情况-工作实用指令"><a href="#8-4磁盘情况-工作实用指令" class="headerlink" title="8.4	磁盘情况-工作实用指令"></a>8.4	磁盘情况-工作实用指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs bash">1. 统计/opt 文件夹下文件的个数<br>	<span class="hljs-built_in">ls</span> -l /opt | grep <span class="hljs-string">&quot;^-&quot;</span> | <span class="hljs-built_in">wc</span> -l<br><br>	说明：<br>		grep <span class="hljs-string">&quot;^-&quot;</span> ---&gt;筛选出以-开头的，因为以-开头的都是文件<br>		<span class="hljs-built_in">wc</span> (word count) 统计数量<br>			<span class="hljs-built_in">wc</span> -l 统计行数 l即lines<br>			统计grep筛选后的行数即文件个数<br><br>2. 统计/opt 文件夹下目录的个数<br>	<span class="hljs-built_in">ls</span> -l /opt | grep <span class="hljs-string">&quot;^d&quot;</span> | <span class="hljs-built_in">wc</span> -l<br><br>3. 统计/opt 文件夹下文件的个数，包括子文件夹里的<br>	<span class="hljs-built_in">ls</span> -lR /opt | grep <span class="hljs-string">&quot;^-&quot;</span> | <span class="hljs-built_in">wc</span> -l<br>		-R 递归列出遇到的子目录<br><br>4. 统计/opt 文件夹下目录的个数，包括子文件夹里的<br>	<span class="hljs-built_in">ls</span> -lR /opt | grep <span class="hljs-string">&quot;^d&quot;</span> | <span class="hljs-built_in">wc</span> -l<br><br>5. 以树状显示目录结构 <br> 	指令：tree 目录 <br> 	默认情况下没有tree指令<br> 	如果没有 tree ,则使用 yum install tree 指令安装<br><br></code></pre></td></tr></table></figure>

<h2 id="九、Linux-实操篇-网络配置"><a href="#九、Linux-实操篇-网络配置" class="headerlink" title="九、Linux 实操篇-网络配置"></a>九、Linux 实操篇-网络配置</h2><h3 id="9-1Linux-网络配置原理图"><a href="#9-1Linux-网络配置原理图" class="headerlink" title="9.1	Linux 网络配置原理图"></a>9.1	Linux 网络配置原理图</h3><p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062104221.png" srcset="/img/loading.gif" lazyload alt="image-20230706210425070"></p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-number">1</span>.通过ifconfig指令查看Linux虚拟机的<span class="hljs-built_in">ip</span>地址<br>	<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">131</span><br><span class="hljs-number">2</span>.然后在本机DOS命令窗口输入指令ipconfig，查看vmnet8的<span class="hljs-built_in">ip</span>地址<br>	<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">2</span>.<span class="hljs-number">1</span><br>	上两个在同一网段，所以可以通信。<br>	<br><span class="hljs-number">3</span>.由第二步骤可以得到本机的无线网络适配器(无线网卡)的<span class="hljs-built_in">ip</span>地址<br>	<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">101</span>.<span class="hljs-number">8</span><br><br>为什么Linux虚拟机可以连外网(比如打开百度)？<br>	Linux虚拟机---&gt;本机vmnet8---&gt;本机无线网卡---&gt;教室局域网网关---&gt;外网	<br><br>每次开机linux虚拟机的<span class="hljs-built_in">ip</span>地址不一定相同<br><span class="hljs-symbol">linux</span>虚拟机的<span class="hljs-built_in">ip</span>地址可以设置<br><br>以下：如何编辑虚拟机的网络和修改其<span class="hljs-built_in">ip</span>地址？<br><br></code></pre></td></tr></table></figure>

<h3 id="9-2查看网络IP和网关"><a href="#9-2查看网络IP和网关" class="headerlink" title="9.2	查看网络IP和网关"></a>9.2	查看网络IP和网关</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown">vmware---&gt;编辑---&gt;虚拟网络编辑器<br>这样就可以查看和修改虚拟网络vmnet8的ip地址和网关<br><br>通过本机DOS命令窗口，输入指令：ipconfig<br><span class="hljs-code">	查看vmnet8的网络配置</span><br><span class="hljs-code"></span><br>在xshell或linux终端输入命令：ifconfig<br><span class="hljs-code">	查看 linux 的网络配置</span><br><span class="hljs-code"></span><br><br><br>ping命令 测试主机之间网络连通性<br><span class="hljs-code">	基本语法：</span><br><span class="hljs-code">		ping 目的主机 （功能描述：测试当前服务器是否可以连接目的主机）</span><br><span class="hljs-code"></span><br>应用实例<br><span class="hljs-code">	测试当前服务器是否可以连接百度</span><br><span class="hljs-code">	ping www.baidu.com</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure>

<h3 id="9-3linux-网络环境配置"><a href="#9-3linux-网络环境配置" class="headerlink" title="9.3	linux 网络环境配置"></a>9.3	linux 网络环境配置</h3><h4 id="9-3-1第一种方法-自动获取ip-："><a href="#9-3-1第一种方法-自动获取ip-：" class="headerlink" title="9.3.1	第一种方法(自动获取ip)："></a>9.3.1	第一种方法(自动获取ip)：</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs armasm">登陆后，通过界面设置自动获取<span class="hljs-built_in">ip</span><br>	应用程序---&gt;系统工---&gt;设置---&gt;网络---&gt;小齿轮---&gt;IPV4<br>特点：linux 启动后会自动获取 <span class="hljs-built_in">IP</span>，可以避免<span class="hljs-built_in">ip</span>冲突<br>缺点：每次自动获取的 <span class="hljs-built_in">ip</span> 地址可能不一样，但是作为服务器<span class="hljs-built_in">ip</span>地址不能变。<br><br>工作时，一般将Linux的<span class="hljs-built_in">ip</span>地址手动设定，不改变。<br><br></code></pre></td></tr></table></figure>

<h4 id="9-3-2第二种方法-手动设置ip"><a href="#9-3-2第二种方法-手动设置ip" class="headerlink" title="9.3.2	第二种方法(手动设置ip)"></a>9.3.2	第二种方法(手动设置ip)</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs routeros">手动指定linux的ip地址，使其不变化。<br><br>直接修改配置文件来指定 IP,并可以连接到外网(程序员推荐)<br>关于网络的配置文件在：/etc/sysconfig/network-scripts/ifcfg-ens33<br><br>要求：将ip地址配置为静态的(不变的)，比如:<span class="hljs-built_in"> ip </span>地址为 192.168.200.130<br><br>输入指令：vim /etc/sysconfig/network-scripts/ifcfg-ens33<br>修改文件内容：<br>	<span class="hljs-attribute">BOOTPROTO</span>=<span class="hljs-string">&quot;static&quot;</span><br>	加上：<br>		<span class="hljs-attribute">IPADDR</span>=192.168.200.130   (IP地址,自己设定的)<br>		<span class="hljs-attribute">GATEWAY</span>=192.168.200.2	 (网关,自己设定的)<br>		<span class="hljs-attribute">DNS1</span>=192.168.200.2		 (域名解析器,自己设定的)<br><br>下一步：vmnet8和Linux在同一网段上，要能够通信，也要修改相应的vmnet8<br>vmware---&gt;编辑---&gt;虚拟网络编辑器<br>打开虚拟编辑器，点击vmnet8，修改下面的子网ip为：192.168.200.0<br>然后点击NAT设置，将网关改为192.168.200.2<br><br>应用确定<br><br>输入指令：service<span class="hljs-built_in"> network </span>restart 或 reboot  使上述修改生效<br><br></code></pre></td></tr></table></figure>

<h3 id="9-4设置Linux系统的主机名和-hosts-映射"><a href="#9-4设置Linux系统的主机名和-hosts-映射" class="headerlink" title="9.4	设置Linux系统的主机名和 hosts 映射"></a>9.4	设置Linux系统的主机名和 hosts 映射</h3><h4 id="9-4-1设置主机名"><a href="#9-4-1设置主机名" class="headerlink" title="9.4.1	设置主机名"></a>9.4.1	设置主机名</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vim">Linux系统的主机名相当于其ip地址，起一个主机名是因为ip地址不好记忆，不方便。<br>也可以修改主机名。<br><br>查看当前主机的主机名指令：<span class="hljs-built_in">hostname</span><br><br>主机名放在/etc/<span class="hljs-built_in">hostname</span>文件中，要修改主机名即修改文件内容：<br>	输入指令：<br>		<span class="hljs-keyword">vim</span> /etc/<span class="hljs-built_in">hostname</span><br>		修改内容<br>		:<span class="hljs-keyword">wq</span><br>		重启系统<br><br></code></pre></td></tr></table></figure>

<h4 id="9-4-2设置-hosts-映射"><a href="#9-4-2设置-hosts-映射" class="headerlink" title="9.4.2	设置 hosts 映射"></a>9.4.2	设置 hosts 映射</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs armasm">在Windows中，如何通过 主机名 找到(比如 ping) 某个 linux 系统?<br><br>	修改<span class="hljs-built_in">ip</span>地址与主机名的映射关系：<br>		在windows C:\Windows\System32\drivers\etc\hosts 文件中<br>		指定Linux系统的<span class="hljs-built_in">ip</span>地址与主机名的映射关系<br>			格式：linux系统<span class="hljs-built_in">ip</span>地址 linux系统主机名<br>			如指定为: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">200</span>.<span class="hljs-number">130</span> hspedu100 (这行代码添加到文件中就行了)<br>		<br>		ping hspedu100 ----&gt;就会去该文件中找相应的<span class="hljs-built_in">ip</span>地址<br>	<br>	<br>那么，如果也想在Linux系统中，使用主机名 来 ping 某个Windows系统，怎么做？<br>	在 linux 系统的 /etc/hosts 文件中 指定<br>	如指定为: <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">200</span>.<span class="hljs-number">1</span> ThinkPad-<span class="hljs-built_in">PC</span><br>	这样就可以 ping ThinkPad-<span class="hljs-built_in">PC</span><br><br></code></pre></td></tr></table></figure>

<h3 id="9-5-主机名解析过程分析-hosts、DNS"><a href="#9-5-主机名解析过程分析-hosts、DNS" class="headerlink" title="9.5.主机名解析过程分析(hosts、DNS)"></a>9.5.主机名解析过程分析(hosts、DNS)</h3><h4 id="9-5-1hosts"><a href="#9-5-1hosts" class="headerlink" title="9.5.1	hosts"></a>9.5.1	hosts</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">hosts是一个文本文件，用来记录 IP 和 <span class="hljs-built_in">Hostname</span>(主机名)的映射关系<br></code></pre></td></tr></table></figure>

<h4 id="9-5-2DNS"><a href="#9-5-2DNS" class="headerlink" title="9.5.2	DNS"></a>9.5.2	DNS</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">DNS</span>  Domain Name System 域名系统<br>是互联网上作为域名和 <span class="hljs-built_in">IP</span> 地址相互映射的一个分布式数据库<br><br>为什么可以通过主机名访问？<br>	通过DNS域名解析系统，将主机名解析为<span class="hljs-built_in">ip</span>地址，实际上还是用的<span class="hljs-built_in">ip</span>地址。<br></code></pre></td></tr></table></figure>

<h4 id="9-5-3应用实例"><a href="#9-5-3应用实例" class="headerlink" title="9.5.3	应用实例"></a>9.5.3	应用实例</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs armasm">用户在浏览器输入了www.baidu.com<br><br><span class="hljs-number">1</span>.浏览器先检查浏览器缓存中有没有该域名解析 <span class="hljs-built_in">IP</span> 地址，有就先调用这个 <span class="hljs-built_in">IP</span> 完成解析；<br>	如果没有，就检查 DNS 解析器缓存，如果有直接返回 <span class="hljs-built_in">IP</span> 完成解析。<br>	这两个缓存，可以理解为 本地解析器缓存<br><br><span class="hljs-symbol">DNS</span> 解析器缓存：<br>一般来说，当电脑第一次成功访问某一网站后，在一定时间内，浏览器或操作系统会缓存他的 <span class="hljs-built_in">IP</span> 地址（DNS 解析记录）<br>	如在 cmd 窗口中输入<br>	ipconfig /displaydns	<span class="hljs-comment">//DNS 域名解析缓存</span><br>	ipconfig /flushdns	<span class="hljs-comment">//手动清理 dns 缓存</span><br><br><span class="hljs-number">2</span>. 如果本地解析器缓存没有找到对应映射，检查系统中 hosts 文件中有没有配置对应的域名 <span class="hljs-built_in">IP</span> 映射，如果有，则完成解析并返回。<br><br><span class="hljs-number">3</span>. 如果本地 DNS 解析器缓存 和 hosts 文件 中均没有找到对应的 <span class="hljs-built_in">IP</span>，则到域名服务器找<br><span class="hljs-number">4</span>. 还找不到，就没有了。<br><br>示意图:<br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062113549.png" srcset="/img/loading.gif" lazyload alt="image-20230706211304454"></p>
<h2 id="十、Linux-实操篇-进程管理-重点"><a href="#十、Linux-实操篇-进程管理-重点" class="headerlink" title="十、Linux 实操篇-进程管理(重点)"></a>十、Linux 实操篇-进程管理(重点)</h2><h3 id="10-1基本介绍"><a href="#10-1基本介绍" class="headerlink" title="10.1	基本介绍"></a>10.1	基本介绍</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scss">(<span class="hljs-number">1</span>)在 LINUX 中，每个执行的程序都称为一个进程。每一个进程都分配一个 ID 号(pid,进程号)。<br>程序执行之后加载到内存中成为进程。程序是静态的，进程是动态的。<br><br>(<span class="hljs-number">2</span>)每个进程都可能以两种方式存在：<br>	前台与后台<br>	前台进程：是用户目前的屏幕上可以进行操作的。<br>	后台进程：是实际在操作的，但屏幕上无法看到，通常使用后台方式执行。<br><br>(<span class="hljs-number">3</span>)一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中，直到关机才结束。<br><br></code></pre></td></tr></table></figure>

<h3 id="10-2ps命令：显示系统正在执行的进程"><a href="#10-2ps命令：显示系统正在执行的进程" class="headerlink" title="10.2	ps命令：显示系统正在执行的进程"></a>10.2	ps命令：显示系统正在执行的进程</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-number">1</span>.基本介绍：<br>	<span class="hljs-built_in">ps</span>命令是用来查看目前系统中，有哪些进程正在执行，以及它们执行的状况。<br>	可以不加任何参数。<br><br>语法：<br>	<span class="hljs-built_in">ps</span> [选项]    <span class="hljs-keyword">Process</span> Status<br>	选项：<br>		<span class="hljs-literal">-a</span>		显示当前终端的所有进程信息<br>		<span class="hljs-literal">-u</span>		以用户的格式显示进程信息<br>		<span class="hljs-literal">-x</span>		显示后台程序运行的参数<br><br>一般三个选项一起用：<br>	<span class="hljs-built_in">ps</span> <span class="hljs-literal">-aux</span><br>	<br>	显示出如下内容：<br>		USER 			 执行进程用户名称  <br>		PID 		     进程号<br>		%CPU          	 进程占用CPU百分比<br>		%MEM    	 	 进程占用物理内存的百分比<br>		VSZ     		 进程占用的虚拟内存大小（单位：KB）<br>		RSS 		 	 进程占用的物理内存大小（单位：KB）<br>		TTY     		 终端名称(有时缩写)<br>		STAT             进程状态：<br>							 S-睡眠<br>							 s-表示该进程是会话的先导进程<br>							 N-表示进程拥有比普通优先级更低的优先级<br>							 <span class="hljs-built_in">R</span>-正在运行<br>							 D-短期等待<br>							 Z-僵死进程<br>							 T-被跟踪或者被停止等等<br>		<span class="hljs-built_in">START</span>            进程执行的开始时间<br>		TIME             CPU 时间，即进程使用 CPU 的总时间<br>		COMMAND     	 启动进程所用的命令和参数，如果过长会被截断显示<br><br><br><br>上述命令将所有进程显示出来，若只想查找某一个进程：<br>	指令：<span class="hljs-built_in">ps</span> –aux|grep xxx  <br>		比如查找 sshd 进程：<span class="hljs-built_in">ps</span> <span class="hljs-literal">-aux</span> | grep sshd<br><br><br><br><br><br><br>应用实例：<br>	要求：以全格式显示当前所有的进程，查看进程的父进程。 <br><br>父进程：一个进程可以生成多个子进程，该进程称为父进程。<br><br><br>查看 sshd 的父进程信息：<br>	知道一个父进程的pid就可以知道它的信息。<br>	<br><span class="hljs-built_in">ps</span> <span class="hljs-literal">-ef</span> 是以全格式显示当前所有的进程。<span class="hljs-literal">-e</span> 显示所有进程。<span class="hljs-operator">-f</span> 全格式。<br><br><span class="hljs-built_in">ps</span> <span class="hljs-literal">-ef</span> 指令显示内容如下： <br>	UID         用户ID<br>	PID   		进程ID<br>	PPID  		父进程ID             <br>	C 			CPU 用于计算执行优先级的因子。<br>					数值越大，表明进程是 CPU 密集型运算，执行优先级会降低；<br>					数值越小，表明进程是 I/O 密集型运算，执行优先级会提高<br>	STIME    	进程启动的时间<br>	TTY         完整的终端名称<br>	TIME        CPU 使用时间<br>	CMD    		启动进程所用的命令和参数<br><br>输入：<span class="hljs-built_in">ps</span> <span class="hljs-literal">-ef</span> | grep sshd<br>得到第三列为<span class="hljs-number">1</span>，即父进程ID=<span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure>

<h3 id="10-3kill-和-killall指令：终止进程"><a href="#10-3kill-和-killall指令：终止进程" class="headerlink" title="10.3	kill 和 killall指令：终止进程"></a>10.3	kill 和 killall指令：终止进程</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-number">1</span>.介绍:<br>若是某个进程执行一半需要停止时，或是已经消耗了很大的系统资源时，此时可以考虑停止该进程。<br>使用 <span class="hljs-built_in">kill</span> 命令来完成此项任务。<br><br><span class="hljs-number">2</span>.基本语法：<br><span class="hljs-built_in">kill</span> [选项] 进程号	（功能描述：通过进程号杀死/终止进程）<br>killall 进程名称	    （功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）<br>					 使用killall，会将该进程的所有子进程也都删除/终止。<br><br><br><span class="hljs-number">3</span>.常用选项：<br>	<span class="hljs-literal">-9</span>   表示强制终止进程<br>		 (系统觉得某个程序重要，可能会屏蔽你的<span class="hljs-built_in">kill</span>指令，这时使用选项<span class="hljs-literal">-9</span>强制终止进程)<br><br><br><br><br><span class="hljs-number">4</span>.案例：<br>案例 <span class="hljs-number">1</span>：踢掉某个非法登录用户<br><span class="hljs-built_in">kill</span> 进程号 <br>比如 <span class="hljs-built_in">kill</span> <span class="hljs-number">11421</span><br><br>假如使用tom登录，然后在图形界面打开终端写代码<br>假设认为tom是个非法用户，要踢掉它<br>先在图形界面写代码：<span class="hljs-built_in">ps</span> <span class="hljs-literal">-aux</span> | grep sshd<br>sshd 是记载远程连接服务的配置文件<br>上述指令显示出了，远程登录的进程信息，从中看到了tom登录的进程的进程号<span class="hljs-number">11421</span><br>所以 <span class="hljs-built_in">kill</span> <span class="hljs-number">11421</span>  这样tom就下线了！<br><br><br><br>案例 <span class="hljs-number">2</span>：终止远程登录服务 sshd, 在适当时候再次重启 sshd 服务<br>sshd <span class="hljs-literal">---</span>&gt; secure shell<br><br>首先查看 sshd 对应的进程号：<br>	使用命令：<span class="hljs-built_in">ps</span> <span class="hljs-literal">-aux</span> | grep sshd<br>	有 /user/sbin/sshd 的那个进程就是 sshd 服务进程 进程号<span class="hljs-number">10748</span><br>	终止 sshd 之后，就无法在xshell远程登陆了！<br>	<br>重启 sshd 服务指令：<br>	/bin/systemctl <span class="hljs-built_in">start</span> 服务名称<br>	/bin/systemctl <span class="hljs-built_in">start</span> sshd.service<br><br><br><br>案例 <span class="hljs-number">3</span>：终止多个 gedit (文本编辑器)<br>在Linux桌面，主文件夹中，打开多个文本，然后使用killall 可以同时关闭所有打开的文本<br>killall	gedit<br><br><br><br>案例 <span class="hljs-number">4</span>：强制杀掉一个终端<br>	在Linux系统桌面打开两个终端，bash即代表终端进程<br>	在一个终端中输入指令强制关闭另一个终端<br>	首先：查看终端进程的进程号：<span class="hljs-built_in">ps</span> <span class="hljs-literal">-aux</span> | grep bash<br>	得到对应的进程号，输入：<span class="hljs-built_in">kill</span> <span class="hljs-literal">-9</span>  对应的进程号<br><br>	也可以终端自己终止自己<br><br></code></pre></td></tr></table></figure>

<h3 id="10-4查看进程树-pstree"><a href="#10-4查看进程树-pstree" class="headerlink" title="10.4	查看进程树 pstree"></a>10.4	查看进程树 pstree</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">1</span>.基本语法：pstree <span class="hljs-selector-attr">[选项]</span> <br>功能：可以更加直观的来看进程信息(树的形式)<br><br><span class="hljs-number">2</span>.常用选项：<br>-<span class="hljs-selector-tag">p</span> :显示进程的 PID (父进程ID)<br>-u :显示进程的所属用户<br><br><br><span class="hljs-number">3</span>.应用实例：<br>案例 <span class="hljs-number">1</span>：用树状的形式显示进程的<span class="hljs-built_in">pid</span>(进程号)<br>pstree -<span class="hljs-selector-tag">p</span><br><br>案例 <span class="hljs-number">2</span>：用树状的形式显示进程的用户<br>pstree -u<br><br></code></pre></td></tr></table></figure>

<h3 id="10-5服务-service-管理"><a href="#10-5服务-service-管理" class="headerlink" title="10.5	服务(service)管理"></a>10.5	服务(service)管理</h3><h4 id="10-5-1介绍"><a href="#10-5-1介绍" class="headerlink" title="10.5.1	介绍"></a>10.5.1	介绍</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs scss">服务(service) 本质就是进程，但是是运行在后台的，<br>通常都会监听某个端口，等待其它程序的请求，比如(mysqld , sshd防火墙等)，<br>因此我们又称为守护进程，是 Linux 中非常重要的知识点。<br><br></code></pre></td></tr></table></figure>

<h4 id="10-5-2service-管理指令"><a href="#10-5-2service-管理指令" class="headerlink" title="10.5.2	service 管理指令"></a>10.5.2	service 管理指令</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(1)<span class="hljs-built_in">	service	</span>服务名 [start | stop | restart | reload | status]<br>start 	开启服务<br>stop 	终止服务<br>restart 重启服务<br>reload 	重载服务<br>status 	查看服务的状态<br><br>(2)	在 CentOS7.0 后很多服务不再使用 service指令管理,而是使用 systemctl (后面专门讲)<br><br>(3)	还有一些在 /etc/init.d 下的服务仍使用<span class="hljs-built_in"> service </span>指令管理<br><br><br>案例：<br>请使用<span class="hljs-built_in"> service </span>指令，查看，关闭，启动<span class="hljs-built_in"> network</span><br><span class="hljs-built_in"></span>[注意：在虚拟系统打开终端演示，因为网络连接会关闭]<br>指令:<br><span class="hljs-built_in">	service network </span>status <br><span class="hljs-built_in">	service network </span>stop <br><span class="hljs-built_in">	service network </span>start<br><br></code></pre></td></tr></table></figure>

<h4 id="10-5-3查看服务名方式"><a href="#10-5-3查看服务名方式" class="headerlink" title="10.5.3	查看服务名方式"></a>10.5.3	查看服务名方式</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">方式 <span class="hljs-number">1</span>：直接输入 setup 即可看到所有服务<br>其中前面带 * 的服务会随着Linux系统的启动而自动启动。<br><br>方式 <span class="hljs-number">2</span>:	ls -l <span class="hljs-regexp">/etc/i</span>nit.d<br>只能看到部分服务：还有一些在 <span class="hljs-regexp">/etc/i</span>nit.d 下的服务仍使用 service 指令管理<br><br></code></pre></td></tr></table></figure>

<h4 id="10-5-4服务的运行级别-runlevel"><a href="#10-5-4服务的运行级别-runlevel" class="headerlink" title="10.5.4	服务的运行级别(runlevel)"></a>10.5.4	服务的运行级别(runlevel)</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs scss">Linux 系统有 <span class="hljs-number">7</span> 种运行级别(runlevel)：常用的是级别 <span class="hljs-number">3</span> 和 <span class="hljs-number">5</span><br><br>运行级别 <span class="hljs-number">0</span>：系统停机状态，系统默认运行级别不能设为 <span class="hljs-number">0</span>，否则不能正常启动<br>运行级别 <span class="hljs-number">1</span>：单用户工作状态，root 权限，用于系统维护，禁止远程登陆<br>运行级别 <span class="hljs-number">2</span>：多用户状态(没有 NFS)，不支持网络<br>运行级别 <span class="hljs-number">3</span>：完全的多用户状态(有 NFS)，无界面，登陆后进入控制台命令行模式<br>运行级别 <span class="hljs-number">4</span>：系统未使用，保留<br>运行级别 <span class="hljs-number">5</span>：X11 控制台，登陆后进入图形 GUI 模式<br>运行级别 <span class="hljs-number">6</span>：系统正常关闭并重启，默认运行级别不能设为 <span class="hljs-number">6</span>，否则不能正常启动<br><br>授课时使用<span class="hljs-number">5</span>，工作时大多使用<span class="hljs-number">3</span>。<br><br>开机的流程说明：<br><br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062116728.png" srcset="/img/loading.gif" lazyload alt="image-20230706211613640"></p>
<h4 id="10-5-5CentOS7-后运行级别说明"><a href="#10-5-5CentOS7-后运行级别说明" class="headerlink" title="10.5.5	CentOS7 后运行级别说明"></a>10.5.5	CentOS7 后运行级别说明</h4><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig">在 /<span class="hljs-string">etc</span>/<span class="hljs-string">initab</span> <br>进行了简化，如下:<br><span class="hljs-string">multi-user</span>.<span class="hljs-string">target</span>: <span class="hljs-string">analogous</span> <span class="hljs-string">to</span> <span class="hljs-string">runlevel</span> <span class="hljs-string">3</span> <br><span class="hljs-string">graphical</span>.<span class="hljs-string">target</span>: <span class="hljs-string">analogous</span> <span class="hljs-string">to</span> <span class="hljs-string">runlevel</span> <span class="hljs-string">5</span> <br><br>查看当前运行级别：<span class="hljs-string">systemctl</span> <span class="hljs-built_in">get-default</span><br><span class="hljs-string">ctl</span> ---&gt; <span class="hljs-string">control</span><br><br>更改运行级别：<span class="hljs-string">systemctl</span> <span class="hljs-built_in">set-default</span> <span class="hljs-string">multi-user</span>.<span class="hljs-string">target</span>/<span class="hljs-string">graphical</span>.<span class="hljs-string">target</span><br>		    然后重启 <span class="hljs-string">reboot</span><br><br></code></pre></td></tr></table></figure>

<h4 id="10-5-6chkconfig-指令"><a href="#10-5-6chkconfig-指令" class="headerlink" title="10.5.6	chkconfig 指令"></a>10.5.6	chkconfig 指令</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs stylus">通过 chkconfig 命令可以给服务在 各个运行级别 设置开启自启动/关闭自启动<br><br>chkconfig 指令管理的服务在 /etc/init<span class="hljs-selector-class">.d</span>  查看<br><br>注意: Centos7.<span class="hljs-number">0</span> 后，很多服务使用 systemctl 管理 (后面马上讲)<br><br><br><br>chkconfig 基本语法：<br>(<span class="hljs-number">1</span>)查看服务和服务在各个级别是开启/关闭自启动  (有限，只能查看chkconfig管理下的服务)<br>chkconfig <span class="hljs-attr">--list</span> <span class="hljs-selector-attr">[| grep	xxx]</span>    (若查找某一个服务使用grep过滤)<br> <br>(<span class="hljs-number">2</span>)chkconfig 服务名 <span class="hljs-attr">--list</span><br><br>(<span class="hljs-number">3</span>)chkconfig <span class="hljs-attr">--level</span> <span class="hljs-number">5</span> 服务名 on   给该服务在<span class="hljs-number">5</span>运行级别开启自启动<br>chkconfig <span class="hljs-attr">--level</span> <span class="hljs-number">5</span> 服务名 off     给该服务在<span class="hljs-number">5</span>运行级别关闭自启动<br><br><br><br>案例演示: 对network服务进行各种操作,把 network 在 <span class="hljs-number">3</span> 运行级别 关闭自启动<br>chkconfig <span class="hljs-attr">--level</span> <span class="hljs-number">3</span> network off <br><br>注意：chkconfig 重新设置服务后自启动或关闭，需要重启机器 reboot 生效.<br><br></code></pre></td></tr></table></figure>

<h4 id="10-5-7systemctl-管理指令"><a href="#10-5-7systemctl-管理指令" class="headerlink" title="10.5.7	systemctl 管理指令"></a>10.5.7	systemctl 管理指令</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">基本语法：systemctl [start | stop | restart | status] 服务名<br><br>systemctl 指令管理的服务在 <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system 查看<br><br></code></pre></td></tr></table></figure>

<h4 id="10-5-9systemctl-设置服务的自启动状态"><a href="#10-5-9systemctl-设置服务的自启动状态" class="headerlink" title="10.5.9	systemctl 设置服务的自启动状态"></a>10.5.9	systemctl 设置服务的自启动状态</h4><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">systemctl</span> <span class="hljs-built_in">list-unit-files</span> [ | <span class="hljs-string">grep</span> 服务名] (查看服务开机启动状态, <span class="hljs-string">grep</span> 可以进行过滤) <br><span class="hljs-string">systemctl</span> <span class="hljs-string">enable</span> 服务名 		(设置服务开机自启动)<br><span class="hljs-string">systemctl</span> <span class="hljs-string">disable</span> 服务名 	(关闭服务开机自启动)<br><span class="hljs-string">systemctl</span> <span class="hljs-string">is-enabled</span> 服务名  (查询某个服务是否是自启动的)<br><br><span class="hljs-string">centos7</span>之后运行级别只有<span class="hljs-string">3</span>和<span class="hljs-string">5</span>，所以以上指令对<span class="hljs-string">3</span>和<span class="hljs-string">5</span>运行级别同时适用。<br><br>应用案例：<br>查看当前防火墙的状况，关闭防火墙和重启防火墙 <span class="hljs-string">firewalld</span>.<span class="hljs-string">service</span> <br>	查看当前防火墙情况：<span class="hljs-string">systemctl</span> <span class="hljs-string">status</span> <span class="hljs-string">firewalld</span><br>	关闭防火墙：<span class="hljs-string">systemctl</span> <span class="hljs-string">stop</span> <span class="hljs-string">firewalld</span><br>	重启防火墙：<span class="hljs-string">systemctl</span> <span class="hljs-string">start</span> <span class="hljs-string">firewalld</span><br>	.<span class="hljs-string">service</span>写不写都行<br><br><br>注意：关闭或者启用防火墙后，立即生效。<br>但是 这种方式只是临时生效，当重启系统后，还是回归以前对服务的设置。<br><br>如果希望设置某个服务自启动或关闭永久生效<br>	要使用 <span class="hljs-string">systemctl</span>	[<span class="hljs-string">enable</span>|<span class="hljs-string">disable</span>] 服务名<br><br></code></pre></td></tr></table></figure>

<h4 id="10-5-10firewall-指令：打开或者关闭指定端口"><a href="#10-5-10firewall-指令：打开或者关闭指定端口" class="headerlink" title="10.5.10	firewall 指令：打开或者关闭指定端口"></a>10.5.10	firewall 指令：打开或者关闭指定端口</h4><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">在真正的生产环境，往往需要将防火墙打开。<br>但问题来了，如果我们把防火墙打开，那么外部请求数据包就不能跟服务器监听端口通讯。<br>这时，需要打开指定的端口。比如 <span class="hljs-number">80、22、8080</span> 等。<br><br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062117667.png" srcset="/img/loading.gif" lazyload alt="image-20230706211737571"></p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">(1)	打开端口: firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">permanent</span> <span class="hljs-literal">--</span><span class="hljs-comment">add</span><span class="hljs-literal">-</span><span class="hljs-comment">port=端口号/协议</span><br><br><span class="hljs-comment">通过 netstat</span> <span class="hljs-literal">-</span><span class="hljs-comment">anp | more 指令查看端口号的协议 (more 分页显示)</span><br><span class="hljs-comment">该指令输出的信息中：</span><br><span class="hljs-comment">	Local Address下是 ip地址:端口号</span><br><span class="hljs-comment">	Proto 是协议   (protocol 协议)</span><br><br><span class="hljs-comment">(2)	关闭端口: firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">permanent</span> <span class="hljs-literal">--</span><span class="hljs-comment">remove</span><span class="hljs-literal">-</span><span class="hljs-comment">port=端口号/协议</span><br><br><span class="hljs-comment">注意：无论是打开端口还是关闭端口，要重新载入才能生效</span><br><span class="hljs-comment">重新载入：firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">reload</span><br><br><span class="hljs-comment">(3) 查询端口是否开放: firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">query</span><span class="hljs-literal">-</span><span class="hljs-comment">port=端口/协议</span><br><br><br><br><span class="hljs-comment">应用案例：</span><br><span class="hljs-comment">(1)	启用防火墙，测试 111 端口是否能 telnet (远程登录) 不行</span><br><span class="hljs-comment">	在本地主机DOS命令窗口输入：telnet Linux虚拟机ip地址:端口号</span><br><span class="hljs-comment">	测试本地主机能否访问虚拟机的111端口</span><br><span class="hljs-comment">	telnet 192</span><span class="hljs-string">.</span><span class="hljs-comment">168</span><span class="hljs-string">.</span><span class="hljs-comment">200</span><span class="hljs-string">.</span><span class="hljs-comment">130 111</span><br><br><span class="hljs-comment">	防火墙打开</span><span class="hljs-literal">+</span><span class="hljs-comment">端口关闭</span><span class="hljs-literal">---</span>&gt;<span class="hljs-comment">不可以访问端口</span><br><br><span class="hljs-comment">(2)	开放 111 端口</span><br><span class="hljs-comment">	firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">permanent</span> <span class="hljs-literal">--</span><span class="hljs-comment">add</span><span class="hljs-literal">-</span><span class="hljs-comment">port=111/tcp ;</span><br><span class="hljs-comment">	需要 firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">reload</span><br><br><span class="hljs-comment">	防火墙打开</span><span class="hljs-literal">+</span><span class="hljs-comment">端口打开</span><span class="hljs-literal">---</span>&gt;<span class="hljs-comment">可以访问端口</span><br><span class="hljs-comment">	</span><br><span class="hljs-comment">(3)	再次关闭 111 端口</span><br><span class="hljs-comment">	firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">permanent</span> <span class="hljs-literal">--</span><span class="hljs-comment">remove</span><span class="hljs-literal">-</span><span class="hljs-comment">port=111/tcp</span> <br><span class="hljs-comment">	需要 firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">reload</span><br><br></code></pre></td></tr></table></figure>

<h3 id="10-6top指令：动态监控进程"><a href="#10-6top指令：动态监控进程" class="headerlink" title="10.6	top指令：动态监控进程"></a>10.6	top指令：动态监控进程</h3><h4 id="10-6-1介绍"><a href="#10-6-1介绍" class="headerlink" title="10.6.1	介绍"></a>10.6.1	介绍</h4><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coq"><span class="hljs-built_in">top</span> 与 ps 命令很相似。<br>它们都用来显示正在执行的进程。<br><span class="hljs-built_in">top</span> 与 ps 最大的不同之处在于: <span class="hljs-built_in">top</span> 在执行一段时间可以更新正在运行的的进程。<br><br></code></pre></td></tr></table></figure>

<h4 id="10-6-2基本语法"><a href="#10-6-2基本语法" class="headerlink" title="10.6.2	基本语法"></a>10.6.2	基本语法</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">top</span> <span class="hljs-selector-attr">[选项]</span><br><br>选项说明：<br><br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062118402.png" srcset="/img/loading.gif" lazyload alt="image-20230706211840309"></p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">输入top指令后：每一条都是一个进程<br>	显示：<br>	第一行<br>		第一个时间      当前时间<br>		第二个时间      系统运行时间<br>		<span class="hljs-number">2</span> users	       有几个用户<br>		load average   负载值(三个值相加除以<span class="hljs-number">3</span>&gt;<span class="hljs-number">0.7</span> 说明系统负载过大，要提高性能)<br>	第二行<br>		Tasks 			系统任务数<br>		<span class="hljs-number">1</span> running 		<span class="hljs-number">1</span>个正在运行进程<br>		<span class="hljs-number">184</span> sleeping 	<span class="hljs-number">184</span>个休眠进程<br>		<span class="hljs-number">0</span> <span class="hljs-literal">stopped</span> 		<span class="hljs-number">0</span>个终止进程<br>		<span class="hljs-number">0</span> zombie 		<span class="hljs-number">0</span>个僵死进程   (要清除僵死进程，因为僵死进程无用且占内存空间)<br>	第三行 占用的CPU百分比<br>		us 用户占用的CPU<br>		sy 系统占用的CPU<br>		id 空闲<br>	第四行 Mem 内存占用情况<br>		total 	总共内存<br>		free 	空闲内存<br>		<span class="hljs-keyword">user</span> 	<span class="hljs-title">已使用内存</span><br><span class="hljs-title">	第五行 Swap</span> 分区<br>		total 	总共大小<br>		free 	未使用大小<br>		used 	已用大小<br>		avail Mem 可获取的内存大小<br><br></code></pre></td></tr></table></figure>

<h4 id="10-6-3交互操作说明"><a href="#10-6-3交互操作说明" class="headerlink" title="10.6.3	交互操作说明"></a>10.6.3	交互操作说明</h4><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coq">输入命令<span class="hljs-built_in">top</span><br>然后输入以下命令，得以下功能对进程进行排序<br><br></code></pre></td></tr></table></figure>

<h4 id="14-6-4应用实例"><a href="#14-6-4应用实例" class="headerlink" title="14.6.4	应用实例"></a>14.6.4	应用实例</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs scss">案例 <span class="hljs-number">1</span>：监视特定用户, 比如监控 tom 用户<br>输入<span class="hljs-attribute">top</span><br>回车<br>输入u<br>回车<br>输入要监控用户名 (该用户要登录才能看到他的进程信息)<br><br><br>案例 <span class="hljs-number">2</span>：终止指定的进程, 比如我们要结束 tom 登录<br>输入<span class="hljs-attribute">top</span><br>回车<br>输入k<br>回车<br>输入要结束的进程 ID 号 （bash那个进程的PID）<br>回车<br>输入信号量 <span class="hljs-number">9</span> 强制删除<br>tom掉线<br><br>案例 <span class="hljs-number">3</span>：指定系统状态更新的时间(每隔 <span class="hljs-number">10</span> 秒自动更新),默认是 <span class="hljs-number">3</span> 秒<br><span class="hljs-attribute">top</span> -d <span class="hljs-number">10</span><br><br></code></pre></td></tr></table></figure>

<h3 id="10-7netstat指令：监控网络状态"><a href="#10-7netstat指令：监控网络状态" class="headerlink" title="10.7	netstat指令：监控网络状态"></a>10.7	netstat指令：监控网络状态</h3><h4 id="10-7-1查看系统网络情况netstat"><a href="#10-7-1查看系统网络情况netstat" class="headerlink" title="10.7.1	查看系统网络情况netstat"></a>10.7.1	查看系统网络情况netstat</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">基本语法：<br>	netstat [选项]<br><br>选项说明：<br>	-an	按一定顺序排列输出<br>	-p	显示哪个进程在调用<br><br>输入netstat -an | more (more 分页展示)<br>显示：<br>	Proto 					协议<br>	Recv-Q					接收信息队列<br>	Send-Q 					发送信息队列<br>	<span class="hljs-keyword">Local</span> Address      		本地地址 Linux地址 <br>	<span class="hljs-keyword">Foreign</span> Address         外部地址    <br>	State 					<span class="hljs-keyword">LISTEN</span> 监听  ESTABLISHED 已建立连接 TIME_WAIT 超时等待<br><br>TIME_WAIT 超时等待 <br>	<span class="hljs-comment">---&gt;某个连接断了之后(如用户退出登录)，连接不会立刻消失，而是State变为TIME_WAIT</span><br>	系统认为可能是网络状态不好，过一段时间仍无法连接，则连接消失。 <br><br><br>Proto 	Recv-Q 	Send-Q 		<span class="hljs-keyword">Local</span> Address           <span class="hljs-keyword">Foreign</span> Address         State <br>tcp        <span class="hljs-number">0</span>     <span class="hljs-number">36</span> 		<span class="hljs-number">192.168</span><span class="hljs-number">.200</span><span class="hljs-number">.130</span>:<span class="hljs-number">22</span>      <span class="hljs-number">192.168</span><span class="hljs-number">.200</span><span class="hljs-number">.1</span>:<span class="hljs-number">14498</span>     ESTABLISHED<br>要建立连接双方都要有一个端口<br><span class="hljs-number">22</span>端口在Linux<br><span class="hljs-number">14498</span>端口在Windows<br>如下图：<br><br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307062119794.png" srcset="/img/loading.gif" lazyload alt="image-20230706211950703"></p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">案例：查看服务名为 sshd 的服务的信息。<br>netstat -anp <span class="hljs-string">| grep sshd</span><br><br></code></pre></td></tr></table></figure>

<h4 id="10-7-2检测主机连接命令ping"><a href="#10-7-2检测主机连接命令ping" class="headerlink" title="10.7.2	检测主机连接命令ping"></a>10.7.2	检测主机连接命令ping</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs armasm">是一种网络检测工具，它主要是用检测远程主机是否正常，或是两部主机间的网线或网卡故障。<br>如: ping 对方的<span class="hljs-built_in">ip</span>地址<br></code></pre></td></tr></table></figure>

<h2 id="十一、Linux-实操篇-RPM-与-YUM"><a href="#十一、Linux-实操篇-RPM-与-YUM" class="headerlink" title="十一、Linux 实操篇- RPM 与 YUM"></a>十一、Linux 实操篇- RPM 与 YUM</h2><h3 id="11-1RPM"><a href="#11-1RPM" class="headerlink" title="11.1	RPM"></a>11.1	RPM</h3><h4 id="11-1-1介绍"><a href="#11-1-1介绍" class="headerlink" title="11.1.1	介绍"></a>11.1.1	介绍</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">RPM</span> 是 <span class="hljs-built_in">Red</span><span class="hljs-operator">-</span><span class="hljs-variable">Hat</span> <span class="hljs-built_in">Package</span> <span class="hljs-variable">Manager</span>（红帽软件包管理器）的缩写<br>这一文件格式名称虽然打上了<span class="hljs-variable">RedHat</span>的标志，但是其原始设计理念是开放式的，<br>包括<span class="hljs-variable">OpenLinux</span>、<span class="hljs-variable">S</span><span class="hljs-operator">.</span><span class="hljs-variable">u</span><span class="hljs-operator">.</span><span class="hljs-variable">S</span><span class="hljs-operator">.</span><span class="hljs-built_in">E</span><span class="hljs-operator">.</span>以及<span class="hljs-variable">Turbo</span> <span class="hljs-variable">Linux</span>等<span class="hljs-variable">Linux</span>的分发版本都有采用，可以算是公认的行业标准了。<br><br>是一种用于互联网下载包的打包及安装工具，它包含在某些<span class="hljs-variable">Linux</span>分发版中。它生成具有<span class="hljs-operator">.</span><span class="hljs-variable">RPM</span>扩展名的文件。<br><br>类似于 <span class="hljs-variable">windows</span> 的 <span class="hljs-variable">setup</span><span class="hljs-operator">.</span><span class="hljs-variable">exe</span><br></code></pre></td></tr></table></figure>

<h4 id="11-1-2rpm-的简单查询指令"><a href="#11-1-2rpm-的简单查询指令" class="headerlink" title="11.1.2	rpm 的简单查询指令"></a>11.1.2	rpm 的简单查询指令</h4><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs llvm">查询已安装的 rpm软件包 列表：<br>rpm –qa|grep xx <br>查询结果返回一个软件包的包名<br><br>举例：查看当前系统是否安装了 firefox <br>指令: rpm -qa | grep firefox<br>查询结果：firefox<span class="hljs-number">-60.2</span>.<span class="hljs-number">2</span><span class="hljs-number">-1</span>.el<span class="hljs-number">7</span>.centos.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span><br>结果说明：<br>	软件名：firefox<br>	版本号：<span class="hljs-number">60.2</span>.<span class="hljs-number">2</span><span class="hljs-number">-1</span><br>	适用操作系统: el<span class="hljs-number">7</span>.centos.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> (表示 centos<span class="hljs-number">7</span>.<span class="hljs-keyword">x</span> 的 <span class="hljs-number">64</span> 位系统)<br>	如果是 <span class="hljs-type">i686</span>、<span class="hljs-type">i386</span> 表示 <span class="hljs-number">32</span> 位系统，noarch 表示通用(<span class="hljs-number">32</span>/<span class="hljs-number">64</span>位系统都适用)<br><br></code></pre></td></tr></table></figure>

<h4 id="11-1-3rpm-的其它查询指令"><a href="#11-1-3rpm-的其它查询指令" class="headerlink" title="11.1.3	rpm 的其它查询指令"></a>11.1.3	rpm 的其它查询指令</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vim">rpm -<span class="hljs-keyword">qa</span> 			(查询所安装的所有 rpm 软件包)<br><br>rpm -<span class="hljs-keyword">qa</span> | more  	(分页显示more)<br><br>rpm -<span class="hljs-keyword">qa</span> | <span class="hljs-keyword">grep</span> <span class="hljs-keyword">X</span>    (过滤,比如 rpm -<span class="hljs-keyword">qa</span> | <span class="hljs-keyword">grep</span> firefox )<br><br><br>rpm -q  软件包名      (查询某个软件包是否安装)<br>案例：rpm -q firefox<br><br>rpm -qi 软件包名   	 (查询软件包的详细信息)<br>案例: rpm -qi firefox<br><br>rpm -ql 软件包名 	 (查询软件包中的文件和该软件包在哪个文件下)<br>案例： rpm -ql firefox<br><br>rpm -qf 文件全路径名 	 (查询某个文件所属在哪个软件包)<br>案例：rpm -qf /etc/passwd<br>案例：rpm -qf /root/install.<span class="hljs-built_in">log</span><br><br></code></pre></td></tr></table></figure>

<h4 id="11-1-4删除-rpm-软件包"><a href="#11-1-4删除-rpm-软件包" class="headerlink" title="11.1.4	删除 rpm 软件包"></a>11.1.4	删除 rpm 软件包</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs subunit">基本语法：rpm -e RPM软件包的名称	//-e erase擦去<br>案例：删除 firefox 软件包<br>rpm -e firefox<br><br><br>注意：<br>(1)如果其它软件包依赖于您要删除的软件包，删除时则会产生错误信息。<br>如：	<br>rpm -e foo<br>removing these packages would break dependencies:foo is needed by bar<span class="hljs-string">-1</span>.0<span class="hljs-string">-1</span><br>foo软件包被 bar<span class="hljs-string">-1</span>.0<span class="hljs-string">-1</span>需要，删除foo对barr<span class="hljs-string">-1</span>.0<span class="hljs-string">-1</span>有影响<br><br>(2)如果我们就是要删除 foo 这个 rpm 包，可以增加参数 --nodeps ,就可以强制删除<br>   但是一般不推荐这样做，因为依赖于该软件包的程序可能无法运行<br>如：rpm -e --nodeps foo            (nodeps 不检查依赖关系 no dependencies)<br><br></code></pre></td></tr></table></figure>

<h4 id="11-1-5安装-rpm-软件包"><a href="#11-1-5安装-rpm-软件包" class="headerlink" title="11.1.5	安装 rpm 软件包"></a>11.1.5	安装 rpm 软件包</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs awk">基本语法：rpm -ivh RPM软件包全路径名称<br><br>rpm软件包其实是一个软件的安装包<br>点击Linux系统桌面的光盘，里面有一个Packages文件夹，这个文件夹里有很多rpm软件安装包<br><br>在<span class="hljs-regexp">/run/m</span>edia<span class="hljs-regexp">/root/</span>CentOS\ <span class="hljs-number">7</span>\ x86_64<span class="hljs-regexp">/Packages/</span> 目录下<br><br><br>选项：<br>	i=install 安装<br>	v=verbose 提示<br>	h=hash	  进度条<br><br><br>应用实例：<br>演示卸载和安装 firefox 浏览器<br>rpm -e firefox <br>rpm -ivh <span class="hljs-regexp">/run/m</span>edia<span class="hljs-regexp">/root/</span>CentOS\ <span class="hljs-number">7</span>\ x86_64<span class="hljs-regexp">/Packages/</span>firefox-<span class="hljs-number">60.2</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.el7.centos.x86_64.rpm<br><br>也可以在Packages中找到firefox安装包，复制到某一个目录下，这样写路径简单<br><br></code></pre></td></tr></table></figure>

<h3 id="11-2yum"><a href="#11-2yum" class="headerlink" title="11.2	yum"></a>11.2	yum</h3><h4 id="11-2-1介绍"><a href="#11-2-1介绍" class="headerlink" title="11.2.1	介绍"></a>11.2.1	介绍</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs 1c">Yum（全称为 Yellow dog Updater, Modified）是一个 Shell 前端软件包管理器。<br>基于 RPM 包管理，能够从指定的服务器自动下载 RPM 包并且安装，<br>可以自动处理依赖性关系，并且一次安装所有依赖的软件包。<br><br>使用 yum list<span class="hljs-string">|grep 软件名 向yum服务器查询有没有该软件</span><br>有的话，使用 yum install 软件名 下载安装该软件<br><br></code></pre></td></tr></table></figure>

<h4 id="11-2-2yum-的基本指令"><a href="#11-2-2yum-的基本指令" class="headerlink" title="11.2.2	yum 的基本指令"></a>11.2.2	yum 的基本指令</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs 1c">查询 yum 服务器是否有 需要安装的软件：<br>yum list<span class="hljs-string">|grep 软件名</span><br><br>安装指定的软件：<br>yum install 软件名<br><br>案例：请使用 yum 的方式来安装 firefox <br>rpm -e firefox<br>yum list <span class="hljs-string">| grep firefox </span><br>yum install firefox<br><br></code></pre></td></tr></table></figure>

<h3 id="11-3总结"><a href="#11-3总结" class="headerlink" title="11.3	总结"></a>11.3	总结</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">rpm 是从本地安装包下载,本地必须有<span class="hljs-string">.rpm</span>文件才可使用<br>yum 是从yum服务器下载安装软件,可以直接下载<br></code></pre></td></tr></table></figure>

<h2 id="十二、Shell编程"><a href="#十二、Shell编程" class="headerlink" title="十二、Shell编程"></a>十二、Shell编程</h2><h3 id="12-1为什么要学习Shell-编程"><a href="#12-1为什么要学习Shell-编程" class="headerlink" title="12.1	为什么要学习Shell 编程"></a>12.1	为什么要学习Shell 编程</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">(<span class="hljs-number">1</span>)	Linux 运维工程师在进行服务器集群管理时，需要编写 <span class="hljs-keyword">Shell </span>程序来进行服务器管理。<br>(<span class="hljs-number">2</span>)	对于 <span class="hljs-keyword">JavaEE </span>和 Python 程序员来说，工作的需要，你的老大会要求你编写一些 <span class="hljs-keyword">Shell </span>脚本进行程序或者是服务器的维护，比如编写一个定时备份数据库的脚本。<br>(<span class="hljs-number">3</span>)	对于大数据程序员来说，需要编写 <span class="hljs-keyword">Shell </span>程序来管理集群<br></code></pre></td></tr></table></figure>

<h3 id="12-2Shell-是什么"><a href="#12-2Shell-是什么" class="headerlink" title="12.2	Shell 是什么"></a>12.2	Shell 是什么</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vim">Shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序。<br><br>在计算机科学中，Shell俗称壳（用来区别于核）<br>是指“为使用者提供操作界面”的软件（<span class="hljs-keyword">command</span> interpreter，命令解析器）。<br>它类似于DOS下的COMMAND.COM和后来的cmd.<span class="hljs-keyword">exe</span>。<br>它接收用户命令，然后调用相应的应用程序。<br><br>中文名		壳<br>外文名		<span class="hljs-keyword">shell</span><br>性质		命令解析器<br>用途		接收用户命令<br><br>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。是用户使用 Linux 的桥梁.<br><br>用户写了一个指令，该指令不能直接发给Linux内核去执行，而是由<span class="hljs-keyword">shell</span>帮我们去执行，执行完之后再通过<span class="hljs-keyword">shell</span>返回给我们结果。<br>在Linux中不止一种<span class="hljs-keyword">shell</span>，我们常用的是bash。<br>可以直接发一个指令给<span class="hljs-keyword">shell</span>，也可以将指令写在一个文件/脚本(.<span class="hljs-keyword">sh</span> <span class="hljs-keyword">shell</span>脚本)里。<br><span class="hljs-keyword">shell</span>编程就是在<span class="hljs-keyword">shell</span>脚本中写指令。<br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307201600658.png" srcset="/img/loading.gif" lazyload alt="image-20230720160042573"></p>
<h3 id="12-3Shell-脚本"><a href="#12-3Shell-脚本" class="headerlink" title="12.3	Shell 脚本"></a>12.3	Shell 脚本</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-number">1</span>.脚本格式要求：<br>	脚本以 #!/bin/bash 开头 ---&gt;确定<span class="hljs-keyword">shell</span>的类型<br>    脚本需要有可执行权限<br>    <span class="hljs-keyword">shell</span>脚本文件以.<span class="hljs-keyword">sh</span>结尾，也可以不以.<span class="hljs-keyword">sh</span>结尾<br><br><span class="hljs-number">2</span>.编写第一个Shell 脚本<br>需求说明：创建一个 Shell 脚本，输出 hello world! <br>创建一个目录：<span class="hljs-built_in">mkdir</span> /root/shcode<br><span class="hljs-keyword">cd</span> /root/shcode<br><span class="hljs-keyword">vim</span> hello.<span class="hljs-keyword">sh</span><br>写入：<br>	#!/bin/bash<br>	<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;hello,world!&quot;</span><br><br><span class="hljs-number">3</span>.<span class="hljs-keyword">shell</span>脚本的常用执行方式<br>方式 <span class="hljs-number">1</span>：<br>	首先要给<span class="hljs-keyword">shell</span>脚本加<span class="hljs-keyword">x</span>执行权限：chomod <span class="hljs-keyword">u</span>+<span class="hljs-keyword">x</span> hello.<span class="hljs-keyword">sh</span><br>	再输入该脚本的相对路径或绝对路径来执行该脚本<br>    比如：<br>	 	使用相对路径：	./hello.<span class="hljs-keyword">sh</span> <br>	 	使用绝对路径：	/root/shcode/hello.<span class="hljs-keyword">sh</span><br><br>方式 <span class="hljs-number">2</span>：<br>	不用赋予脚本+<span class="hljs-keyword">x</span> 权限，直接执行即可。(使用以下指令，即使没有执行权限也可以执行)<br>	使用指令： <span class="hljs-keyword">sh</span>  <span class="hljs-keyword">shell</span>脚本/<span class="hljs-keyword">shell</span>脚本的绝对路径<br>	比如	<span class="hljs-keyword">sh</span> hello.<span class="hljs-keyword">sh</span> <br></code></pre></td></tr></table></figure>

<h3 id="12-4-Shell-的变量"><a href="#12-4-Shell-的变量" class="headerlink" title="12.4	 Shell 的变量"></a>12.4	 Shell 的变量</h3><h4 id="12-4-1Shell-变量介绍"><a href="#12-4-1Shell-变量介绍" class="headerlink" title="12.4.1	Shell 变量介绍"></a>12.4.1	Shell 变量介绍</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(1)	Linux Shell 中的变量分为:系统变量和用户自定义变量。<br>系统变量：系统自带的变量<br><br>(2)	系统变量比如：<span class="hljs-variable">$HOME</span>、<span class="hljs-variable">$PWD</span>、<span class="hljs-variable">$SHELL</span>、<span class="hljs-variable">$USER</span> 等等<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$HOME</span>	---&gt;显示当前用户的家目录<br><br>(3)	可以通过 <span class="hljs-built_in">set</span> 指令显示出shell中的所有系统变量<br></code></pre></td></tr></table></figure>

<h4 id="12-4-2Shell-自定义变量"><a href="#12-4-2Shell-自定义变量" class="headerlink" title="12.4.2	Shell 自定义变量"></a>12.4.2	Shell 自定义变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs bash">基本语法：<br>(1)	定义变量：变量名=值  ---&gt;不加空格<br>(2)	撤销变量：<span class="hljs-built_in">unset</span> 变量名<br>(3)	声明静态变量：<span class="hljs-built_in">readonly</span> 变量 (改变量不能 <span class="hljs-built_in">unset</span>撤销)<br><br><br>案例 1：定义变量 A<br>案例 2：撤销变量 A<br>案例 3：声明静态的变量 B=2，不能 <span class="hljs-built_in">unset</span><br><br><span class="hljs-built_in">cd</span> /root/shcode<br>vim vr.sh<br>输入： <br>	<span class="hljs-comment">#!/bin/bash</span><br>	<br>	<span class="hljs-comment">#案例 1：定义变量 A=100  (#为注释符)</span><br>	A=100<br>	<span class="hljs-comment">#输出变量需要加上$ ($---&gt;引用变量)</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-variable">$A</span><br>	<br>	<span class="hljs-comment">#上述输出结果是100，想要输出结果为A=100，这样写(A=以普通文本形式输出，$A引用变量的值)</span><br>	<span class="hljs-built_in">echo</span> A=<span class="hljs-variable">$A</span> 或者 <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;A=<span class="hljs-variable">$A</span>&quot;</span> <br>		<br>		<br>	<span class="hljs-comment">#案例 2：撤销变量 A </span><br>	<span class="hljs-built_in">unset</span> A<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;A=<span class="hljs-variable">$A</span>&quot;</span>    (---&gt;输出 A= )<br><br>	<br>	<span class="hljs-comment">#案例 3：声明静态的变量 B=2，不能 unset </span><br>	<span class="hljs-built_in">readonly</span> B=2<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;B=<span class="hljs-variable">$B</span>&quot;</span> <br>	<br>保存：wq<br>最后输入执行命令：sh vr.sh<br><br>--------------------------------------------------------------------<br><br><br>shell 变量名的定义规则：<br>(1)	变量名称可以由字母、数字和下划线组成，但是不能以数字开头。5A=200(×)<br>(2)	等号两侧不能有空格<br>(3)	变量名称一般习惯为大写，这是一个规范，我们遵守即可<br><br>--------------------------------------------------------------------<br>将命令的返回值赋给变量：<br>(1)	A=`<span class="hljs-built_in">date</span>`反引号，运行里面的命令，并把结果返回给变量 A <br>(2)	A=$(<span class="hljs-built_in">date</span>) 等价于反引号<br>PS:反引号在数字1的左边<br><br>案例：<br><span class="hljs-comment">#将指令返回的结果赋给变量</span><br>	C=`<span class="hljs-built_in">date</span>` <br>	D=$(<span class="hljs-built_in">date</span>)<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;C=<span class="hljs-variable">$C</span>&quot;</span> <br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;D=<span class="hljs-variable">$D</span>&quot;</span><br>	<br>	<span class="hljs-comment">#使用环境变量 TOMCAT_HOME</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;tomcat_home=<span class="hljs-variable">$TOMCAT_HOME</span>&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="12-5设置环境变量-全局变量"><a href="#12-5设置环境变量-全局变量" class="headerlink" title="12.5	设置环境变量(全局变量)"></a>12.5	设置环境变量(全局变量)</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs vim">可以将变量提升为全局环境变量，供多个<span class="hljs-keyword">shell</span>程序共同使用。<br><br>基本语法：<br>(<span class="hljs-number">1</span>)	export 	变量名=变量值 	<br>（功能描述：将 <span class="hljs-keyword">shell</span> 变量输出为环境变量/全局变量）<br><br>(<span class="hljs-number">2</span>)	<span class="hljs-keyword">source</span> 	配置文件		    <br>（功能描述：在某文件中定义环境变量之后，要对该文件进行刷新才能使其生效，即让修改后的配置信息立即生效）<br><br>(<span class="hljs-number">3</span>)	<span class="hljs-keyword">echo</span> 	$变量名			<br>（功能描述：查询环境变量的值）<br><br><br>快速入门：<br>(<span class="hljs-number">1</span>)	在/etc/<span class="hljs-keyword">profile</span> 文件中定义 TOMCAT_HOME 环境变量<br>TOMCAT_HOME ---&gt;意思是tomcat的家目录是什么<br>(<span class="hljs-number">2</span>)	查看环境变量 TOMCAT_HOME 的值<br><span class="hljs-keyword">vim</span> /etc/<span class="hljs-keyword">profile</span><br>	写入：export TOMCAT_HOME=/<span class="hljs-keyword">opt</span>/tomcat<br>	保存退出<br><span class="hljs-keyword">source</span> /etc/<span class="hljs-keyword">profile</span><br><span class="hljs-keyword">echo</span> $TOMCAT_HOME ---输出 /<span class="hljs-keyword">opt</span>/tomcat<br><br><br>(<span class="hljs-number">3</span>)	在另外一个 <span class="hljs-keyword">shell</span> 程序中使用 TOMCAT_HOME<br>在另一个<span class="hljs-keyword">shell</span>程序中写入：<br>	<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;tomcat_home=$TOMCAT_HOME&quot;</span><br><br><br>注意：在输出 TOMCAT_HOME 环境变量前，需要让其生效<span class="hljs-keyword">source</span> /etc/<span class="hljs-keyword">profile</span><br><br><br><span class="hljs-keyword">shell</span> 脚本的<br>	单行注释：#<br>	多行注释：   :&lt;&lt;!   独占一行	<br>				内容 <br>			    ! 	   独占一行<br></code></pre></td></tr></table></figure>

<h3 id="12-6位置参数变量"><a href="#12-6位置参数变量" class="headerlink" title="12.6	位置参数变量"></a>12.6	位置参数变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">1.介绍<br>当我们执行一个 shell 脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量<br>比如： ./myshell.sh 100 200 这个就是一个执行 shell 的命令行，可以在 myshell 脚本中获取到参数信息<br><br>./myshell.sh ---&gt;执行myshell脚本命令<br>100 200 都是该命令行的参数<br>使用位置参数变量可以在myshell脚本中获得参数<br><br><br>2.基本语法<br><span class="hljs-variable">$n</span> （功能描述：n 为数字，<span class="hljs-variable">$0</span> 代表命令本身(如./myshell.sh)，<span class="hljs-variable">$1</span>-<span class="hljs-variable">$9</span> 代表第一到第九个参数(如：<span class="hljs-variable">$1</span> 就是100 <span class="hljs-variable">$2</span> 就是200)，十以上的参数需要用大括号包含，如<span class="hljs-variable">$&#123;10&#125;</span>）<br>$* （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体）<br><span class="hljs-variable">$@</span> （功能描述：这个变量也代表命令行中所有的参数，不过<span class="hljs-variable">$@</span>把每个参数区分对待）<br><span class="hljs-variable">$#</span> （功能描述：这个变量代表命令行中所有参数的个数）<br><br>案例：编写一个 shell 脚本 myshell.sh ，在脚本中获取到命令行的各个参数信息。<br>vim myshell.sh<br>	写入:<br>		<span class="hljs-comment">#!/bin/bash</span><br>		<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;命令本身=<span class="hljs-variable">$0</span> 第一个参数=<span class="hljs-variable">$1</span> 第二个参数=<span class="hljs-variable">$2</span>&quot;</span><br>		<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;所有的参数=$*&quot;</span><br>		<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span><br>		<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;参数个数=<span class="hljs-variable">$#</span>&quot;</span><br>		保存退出<br>sh myshell.sh 100 200<br></code></pre></td></tr></table></figure>

<h3 id="12-7预定义变量"><a href="#12-7预定义变量" class="headerlink" title="12.7	预定义变量"></a>12.7	预定义变量</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-number">1</span>.基本介绍：<br>预定义变量是 <span class="hljs-keyword">shell</span> 设计者事先已经定义好的变量，可以直接在 <span class="hljs-keyword">shell</span> 脚本中使用<br><br><br><span class="hljs-number">2</span>.基本语法：<br>(<span class="hljs-number">1</span>)	$$ （功能描述：当前进程的进程号（PID））<br>(<span class="hljs-number">2</span>)	$! （功能描述：后台运行的最后一个进程的进程号（PID））<br>(<span class="hljs-number">3</span>)	$？（功能描述：最后一次执行的命令的返回状态。如果这个变量的值为 <span class="hljs-number">0</span>，证明上一个命令正确执行；如果这个变量的值为非 <span class="hljs-number">0</span>（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）<br><br><span class="hljs-number">3</span>.应用实例：<br>在一个 <span class="hljs-keyword">shell</span> 脚本中简单使用一下预定义变量<br><br><span class="hljs-keyword">vim</span> preVar.<span class="hljs-keyword">sh</span><br>	写入：<br>	#!/bin/bash<br>	<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;当前执行的进程 id=$$&quot;</span><br>	<br>	#以后台的方式运行一个脚本(在脚本后加一个$)，并获取他的进程号<br>	/root/shcode/myshell.<span class="hljs-keyword">sh</span> &amp;<br>	<br>	<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;最后一个后台方式运行的进程 id=$!&quot;</span> <br><br>	<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;执行的结果是=$?&quot;</span><br>	保存并退出<br><span class="hljs-keyword">sh</span> preVar.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure>

<h3 id="12-8运算符"><a href="#12-8运算符" class="headerlink" title="12.8	运算符"></a>12.8	运算符</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs bash">1.基本介绍：<br>学习如何在 shell 中进行各种运算操作。<br><br><br>2.基本语法：<br>(1)	三种写法：<br>	$((运算式))<br>	$[运算式]<br>	<span class="hljs-built_in">expr</span> m + n 	(expression 表达式)<br>	 <br>(2)	注意 <span class="hljs-built_in">expr</span> 运算符间要有空格<br>	如果希望将 <span class="hljs-built_in">expr</span> 的结果赋给某个变量，使用 `` 或者 $( )<br><br>(3)	<span class="hljs-built_in">expr</span> m - n<br><br>(4)	<span class="hljs-built_in">expr</span> \*, /, %	乘，除，取余<br><br><br>3.应用实例 oper.sh<br>案例 1：计算（2+3）X4 的值<br>案例 2：请求出命令行的两个参数[整数]的和 20 50<br><br>vim oper.sh<br>	写入:<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#案例 1：计算（2+3）X4 的值</span><br>	<span class="hljs-comment">#使用第一种方式</span><br>	RES1=$(((<span class="hljs-number">2</span>+<span class="hljs-number">3</span>)*<span class="hljs-number">4</span>))        ---&gt;用一个变量RES1接收<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;res1=<span class="hljs-variable">$RES1</span>&quot;</span><br>	保存并退出<br>sh oper.sh<br><br>vim oper.sh<br>	写入:<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#使用第二种方式, 推荐使用</span><br>	RES2=$[(2+3)*4]<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;res2=<span class="hljs-variable">$RES2</span>&quot;</span><br>	保存并退出<br>sh oper.sh	<br><br>vim oper.sh<br>	写入:<br>	<span class="hljs-comment">#!/bin/bash	</span><br>	<span class="hljs-comment">#使用第三种方式 expr </span><br>	TEMP=`<span class="hljs-built_in">expr</span> 2 + 3`       <br>	RES4=`<span class="hljs-built_in">expr</span> <span class="hljs-variable">$TEMP</span> \* 4` <br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;temp=<span class="hljs-variable">$TEMP</span>&quot;</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;res4=<span class="hljs-variable">$RES4</span>&quot;</span><br>	保存并退出<br>sh oper.sh<br><br>vim oper.sh<br>	写入:<br>	<span class="hljs-comment">#!/bin/bash	</span><br>	<span class="hljs-comment">#案例 2：请求出命令行的两个参数[整数]的和 20 50 </span><br>	SUM=$[<span class="hljs-variable">$1</span>+<span class="hljs-variable">$2</span>]<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;sum=<span class="hljs-variable">$SUM</span>&quot;</span><br>	保存并退出<br>sh oper.sh 20 50<br></code></pre></td></tr></table></figure>

<h3 id="12-9条件判断"><a href="#12-9条件判断" class="headerlink" title="12.9	条件判断"></a>12.9	条件判断</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs bash">1.基本语法：<br>[ condition ] （注意 condition 前后要有空格）<br><span class="hljs-comment">#非空返回 true，可使用$?验证（0 为 true，&gt;1 为 false）</span><br><br><br>2.应用实例：<br>[ hspEdu ]		返回 <span class="hljs-literal">true</span> <br>[ ]				返回 <span class="hljs-literal">false</span><br>[ condition ] &amp;&amp; <span class="hljs-built_in">echo</span> OK || <span class="hljs-built_in">echo</span> notok	条件满足，执行后面的语句<br><br><br>3.判断语句：<br>	常用判断条件：<br>	(1) = 字符串比较<br>	(2)	两个整数的比较<br>		-lt 小于     less than<br>		-le 小于等于  less equal<br>		-eq 等于      equal<br>		-gt 大于      greater<br>		-ge 大于等于   greater equal<br>		-ne 不等于     not equal<br>	(3)	按照文件权限进行判断<br>		-r 有读的权限<br>		-w 有写的权限<br>		-x 有执行的权限<br>	(4)	按照文件类型进行判断<br>		-f 文件存在并且是一个常规的文件<br>		-e 文件存在<br>		-d 文件存在并是一个目录<br><br><br>4.应用实例：<br>案例 1：<span class="hljs-string">&quot;ok&quot;</span>是否等于<span class="hljs-string">&quot;ok&quot;</span><br>判断语句：使用 =<br>案例 2：23 是否大于等于 22<br>判断语句：使用 -ge<br>案例 3：/root/shcode/aaa.txt 目录中的文件是否存在<br>判断语句： 使用 -f<br><br>代码如下:<br>vim ifdemo.sh<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#案例 1：&quot;ok&quot;是否等于&quot;ok&quot;</span><br>	<span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;ok&quot;</span> = <span class="hljs-string">&quot;ok&quot;</span>  ]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;equal&quot;</span><br>	<span class="hljs-keyword">fi</span>                    -----&gt; <span class="hljs-keyword">if</span>语句 以<span class="hljs-keyword">if</span>开头 以<span class="hljs-keyword">fi</span>结尾<br>	<br>	<span class="hljs-comment">#案例 2：23 是否大于等于 22</span><br>	<span class="hljs-comment">#判断语句：使用 -ge</span><br>	<span class="hljs-keyword">if</span> [ 23 -ge 22 ]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;大于&quot;</span><br>	<span class="hljs-keyword">fi</span><br>	<br>	<span class="hljs-comment">#案例 3：/root/shcode/aaa.txt 目录中的文件是否存在</span><br>	<span class="hljs-comment">#判断语句： 使用 -f</span><br>	<span class="hljs-keyword">if</span> [ -f  /root/shcode/aaa.txt ]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;文件存在&quot;</span><br>	<span class="hljs-keyword">fi</span><br>	<br>	<span class="hljs-comment">#看几个案例</span><br>	<span class="hljs-keyword">if</span> [ ]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;存在&quot;</span><br>	<span class="hljs-keyword">fi</span><br>	<br>	<span class="hljs-keyword">if</span> [ hspEdu01 ]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello hspEdu01&quot;</span><br>	<span class="hljs-keyword">fi</span><br>sh ifdemo.sh<br><br>输出结果：<br>	equal<br>	大于<br>	hello hspEdu01<br></code></pre></td></tr></table></figure>

<h3 id="12-10流程控制"><a href="#12-10流程控制" class="headerlink" title="12.10	流程控制"></a>12.10	流程控制</h3><h4 id="12-10-1if-语句"><a href="#12-10-1if-语句" class="headerlink" title="12.10.1	if 语句"></a>12.10.1	if 语句</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs bash">1.基本语法：<br><span class="hljs-keyword">if</span> [ 条件判断式 ] <br><span class="hljs-keyword">then</span><br>	代码<br><span class="hljs-keyword">fi</span><br><br>或者 多分支<br><br><span class="hljs-keyword">if</span> [ 条件判断式 ] <br><span class="hljs-keyword">then</span><br>	代码<br><span class="hljs-keyword">elif</span> [条件判断式] <br><span class="hljs-keyword">then</span><br>	代码<br><span class="hljs-keyword">fi</span><br><br>2.注意事项：[ 条件判断式 ]，中括号和条件判断式之间必须有空格<br><br>3.应用实例 ifCase.sh<br>案例：请编写一个 shell 程序，如果输入的参数，大于等于 60，则输出 <span class="hljs-string">&quot;及格了&quot;</span>，如果小于 60,则输出 <span class="hljs-string">&quot;不及格&quot;</span><br>	<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$1</span> -ge 60 ]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;及格了&quot;</span><br>	<span class="hljs-keyword">else</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;不及格&quot;</span><br>	<span class="hljs-keyword">fi</span><br><br>	或者<br><br>	<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$1</span> -ge 60 ]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;及格了&quot;</span><br>	<span class="hljs-keyword">elif</span>[ <span class="hljs-variable">$1</span> -lt 60]<br>	<span class="hljs-keyword">then</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;不及格&quot;</span><br>	<span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<h4 id="12-10-2case-语句"><a href="#12-10-2case-语句" class="headerlink" title="12.10.2	case 语句"></a>12.10.2	case 语句</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-number">1</span>.基本语法：<br><br>case $变量名 in<br><span class="hljs-string">&quot;值 1&quot;</span>)<br>如果变量的值等于值 <span class="hljs-number">1</span>，则执行程序 <span class="hljs-number">1</span><br><span class="hljs-comment">;;</span><br><span class="hljs-string">&quot;值 2&quot;</span>)<br>如果变量的值等于值 <span class="hljs-number">2</span>，则执行程序 <span class="hljs-number">2</span><br><span class="hljs-comment">;;</span><br>…省略其他分支…<br><br>*)<br>如果变量的值都不是以上的值，则执行此程序<br><span class="hljs-comment">;;</span><br>esac<br><br>应用实例 testCase.<span class="hljs-keyword">sh</span><br><span class="hljs-keyword"></span>案例<span class="hljs-number">1</span>：当命令行参数是<span class="hljs-number">1</span>时，输出 <span class="hljs-string">&quot;周一&quot;</span>, 是<span class="hljs-number">2</span>时，就输出<span class="hljs-string">&quot;周二&quot;</span>，其它情况输出<span class="hljs-string">&quot;other&quot;</span><br>vim testCase.<span class="hljs-keyword">sh</span><br><span class="hljs-keyword"></span>	写入：<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#案例1：当命令行参数是1时，输出 &quot;周一&quot;, 是2时，就输出&quot;周二&quot;，其它情况输出&quot;other&quot;</span><br>	case $<span class="hljs-number">1</span> in<br>	<span class="hljs-string">&quot;1&quot;</span>)<br>	echo <span class="hljs-string">&quot;周一&quot;</span><br>	<span class="hljs-comment">;;</span><br>	<span class="hljs-string">&quot;2&quot;</span>)<br>	echo <span class="hljs-string">&quot;周二&quot;</span><br>	<span class="hljs-comment">;;</span><br>	*)<br>	echo <span class="hljs-string">&quot;other...&quot;</span><br>	<span class="hljs-comment">;;</span><br>	esac<br>	保存并退出<br>	<br><span class="hljs-keyword">sh </span>testCase.<span class="hljs-keyword">sh </span><span class="hljs-number">1</span><br>周一<br></code></pre></td></tr></table></figure>

<h4 id="12-10-3for-循环"><a href="#12-10-3for-循环" class="headerlink" title="12.10.3	for 循环"></a>12.10.3	for 循环</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs bash">基本语法：<br><br>第一种方式：<br><br><span class="hljs-keyword">for</span> 变量 <span class="hljs-keyword">in</span>  值 1  值 2  值 3… <br><span class="hljs-keyword">do</span><br>程序/代码<br><span class="hljs-keyword">done</span><br><br>应用实例 testFor1.sh<br>案例：打印命令行输入的参数 [这里可以看出$*  和 <span class="hljs-variable">$@</span> 的区别]<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#案例：打印命令行输入的参数 [这里可以看出$*  和 $@ 的区别]</span><br>	<span class="hljs-comment">#注意：$* 是把输入的参数当作一个整体，所以只会输出一句话</span><br>	<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;$*&quot;</span><br>	<span class="hljs-keyword">do</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;num is $*&quot;</span><br>	<span class="hljs-keyword">done</span><br>	<br>	<span class="hljs-comment">#使用 $@ 来获取输入的参数，注意：也是把输入的参数看作一个整体，但这是分别对待；所以有几个参数就输出几句</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;======================================&quot;</span><br>	<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span><br>	<span class="hljs-keyword">do</span><br>	        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;num is <span class="hljs-variable">$@</span>&quot;</span><br>	<span class="hljs-keyword">done</span><br><br>sh testFor1.sh 100 200 300<br>num is 100 200 300<br>======================================<br>num is 100 200 300<br>num is 100 200 300<br>num is 100 200 300<br><br><br><br><br><br>第二种方式：<br><br><span class="hljs-keyword">for</span> (( 初始值;循环控制条件;变量变化 ))<br><span class="hljs-keyword">do</span><br>程序/代码<br><span class="hljs-keyword">done</span><br><br>应用实例 testFor2.sh<br>案例：从 1 加到 100 的值输出显示<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#案例：从 1 加到 100 的值输出显示</span><br>	<span class="hljs-comment">#定义一个变量SUM</span><br>	SUM=0<br>	<span class="hljs-keyword">for</span>(( i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">100</span>; i++  ))<br>	<span class="hljs-keyword">do</span><br>	        SUM=$[<span class="hljs-variable">$SUM</span>+<span class="hljs-variable">$i</span>]<br>	<span class="hljs-keyword">done</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;总和SUM=<span class="hljs-variable">$SUM</span>&quot;</span><br><br>sh testFor2.sh <br>总和SUM=5050<br><br>如果1加到x x由自己输入<br>	SUM=0<br>	<span class="hljs-keyword">for</span>(( i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-variable">$1</span>; i++  ))<br>	<span class="hljs-keyword">do</span><br>	        SUM=$[<span class="hljs-variable">$SUM</span>+<span class="hljs-variable">$i</span>]<br>	<span class="hljs-keyword">done</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;总和SUM=<span class="hljs-variable">$SUM</span>&quot;</span><br><br>sh textFor2.sh 1000<br>总和SUM=500500<br></code></pre></td></tr></table></figure>

<h4 id="12-10-4while-循环"><a href="#12-10-4while-循环" class="headerlink" title="12.10.4	while 循环"></a>12.10.4	while 循环</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs routeros">基本语法：<br><span class="hljs-keyword">while</span> [ 条件判断式 ]<br><span class="hljs-keyword">do</span><br>程序/代码<br>done<br><br>注意：<span class="hljs-keyword">while</span> 和 [有空格，条件判断式和[  ]也有空格<br> <br>应用实例：testWhile.sh<br>案例：从命令行输入一个数 n，统计从 1+<span class="hljs-built_in">..</span>+ n  的值是多少？<br>	#!/bin/bash<br>	<span class="hljs-attribute">SUM</span>=0<br>	<span class="hljs-attribute">i</span>=0<br>	<span class="hljs-keyword">while</span> [ <span class="hljs-variable">$i</span> -le <span class="hljs-variable">$1</span> ] <br>	<span class="hljs-keyword">do</span><br>	<span class="hljs-attribute">SUM</span>=$[<span class="hljs-variable">$SUM</span>+<span class="hljs-variable">$i</span>]<br>	#i 自增<br>	<span class="hljs-attribute">i</span>=$[<span class="hljs-variable">$i</span>+1]<br>	done<br>	echo <span class="hljs-string">&quot;执行结果=<span class="hljs-variable">$SUM</span>&quot;</span><br><br>sh testWhile.sh 100<br>执行结果=5050<br></code></pre></td></tr></table></figure>

<h3 id="12-11read-读取控制台输入"><a href="#12-11read-读取控制台输入" class="headerlink" title="12.11	read 读取控制台输入"></a>12.11	read 读取控制台输入</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-number">1.</span>基本语法：<br>read<span class="hljs-comment">(选项)</span><span class="hljs-comment">(参数)</span><br>选项：<br>	-p：指定读取值时的提示符；<br>	-t：指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不再等待了<br>参数：<br>	变量：指定读取值的变量名<br><br><span class="hljs-number">2.</span>应用实例 testRead.sh<br>案例 <span class="hljs-number">1</span>：读取控制台输入一个 <span class="hljs-symbol">NUM1</span> 值<br>案例 <span class="hljs-number">2</span>：读取控制台输入一个 <span class="hljs-symbol">NUM2</span> 值，在 <span class="hljs-number">10</span> 秒内输入。代码:<br><br>	<span class="hljs-attr">#!/bin/bash</span><br><span class="hljs-attr">	#案例 1</span>：读取控制台输入一个 <span class="hljs-symbol">NUM1</span> 值<br>	read -p <span class="hljs-string">&quot;请输入一个数 NUM1=&quot;</span> <span class="hljs-symbol">NUM1</span> <br>	echo <span class="hljs-string">&quot;你输入的 NUM1=$NUM1&quot;</span><br>	<br>	<span class="hljs-attr">#案例 2</span>：读取控制台输入一个 <span class="hljs-symbol">NUM2</span> 值，在 <span class="hljs-number">10</span> 秒内输入。<br>	read -t <span class="hljs-number">10</span> -p <span class="hljs-string">&quot;请输入一个数 NUM2=&quot;</span> <span class="hljs-symbol">NUM2</span> <br>	echo <span class="hljs-string">&quot;你输入的 NUM2=$NUM2&quot;</span><br><br>sh testRead.sh<br>请输入一个数 <span class="hljs-symbol">NUM1</span>=<span class="hljs-number">100</span><br>你输入的 <span class="hljs-symbol">NUM1</span>=<span class="hljs-number">100</span><br></code></pre></td></tr></table></figure>

<h3 id="12-12函数"><a href="#12-12函数" class="headerlink" title="12.12	函数"></a>12.12	函数</h3><h4 id="12-12-1函数介绍"><a href="#12-12-1函数介绍" class="headerlink" title="12.12.1	函数介绍"></a>12.12.1	函数介绍</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">shell</span><span class="language-bash"> 编程和其它编程语言一样，有系统函数，也可以自定义函数。系统函数中，我们这里就介绍两个。</span><br></code></pre></td></tr></table></figure>

<h4 id="12-12-2系统函数"><a href="#12-12-2系统函数" class="headerlink" title="12.12.2	系统函数"></a>12.12.2	系统函数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">1.<span class="hljs-built_in">basename</span> 基本语法<br>功能：返回完整路径最后 / 的部分，常用于获取文件名<br><span class="hljs-built_in">basename</span> [pathname] [suffix]<br><span class="hljs-built_in">basename</span> [string] [suffix]	<br><br>功能描述：<span class="hljs-built_in">basename</span> 命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。<br>选项：suffix 为后缀，如果 suffix 被指定了，<span class="hljs-built_in">basename</span> 会将 pathname 或 string 中的 suffix 去掉。<br><br>案例 1：请返回 /home/aaa/test.txt 的 <span class="hljs-string">&quot;test.txt&quot;</span> 部分<br><span class="hljs-built_in">basename</span> /home/aaa/test.txt<br>返回test.txt<br><br>如果输入：<span class="hljs-built_in">basename</span> /home/aaa/test.txt .txt<br>返回<span class="hljs-built_in">test</span><br><br><br>2.<span class="hljs-built_in">dirname</span> 基本语法<br>功能：返回完整路径最后 / 的前面的部分，常用于返回路径部分<br><span class="hljs-built_in">dirname</span> 文件绝对路径 <br><br>功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）<br><br>案例 1：请返回 /home/aaa/test.txt 的 /home/aaa <br><span class="hljs-built_in">dirname</span> /home/aaa/test.txt<br>返回/home/aaa<br></code></pre></td></tr></table></figure>

<h4 id="12-12-3自定义函数"><a href="#12-12-3自定义函数" class="headerlink" title="12.12.3	自定义函数"></a>12.12.3	自定义函数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash">基本语法：<br>[ <span class="hljs-keyword">function</span> ] funname[()]<br>&#123;<br>	Action; <br>	[<span class="hljs-built_in">return</span> int;]<br>&#125;<br><br>调用直接写函数名：funname	[值]<br><br><br>案例 1：计算输入两个参数的和(动态的获取) testFun.sh<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#案例 1：计算输入两个参数的和(动态的获取)</span><br>	<br>	<span class="hljs-comment">#定义函数 getSum </span><br>	<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">getSum</span></span>() &#123;<br>		SUM=$[<span class="hljs-variable">$n1</span>+<span class="hljs-variable">$n2</span>] <br>		<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;和是=<span class="hljs-variable">$SUM</span>&quot;</span><br>	&#125;<br><br>	<span class="hljs-comment">#输入两个值</span><br>	<span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入一个数 n1=&quot;</span> n1 <br>	<span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入一个数 n2=&quot;</span> n2<br>	<br>	<span class="hljs-comment">#调用自定义函数</span><br>	getSum <span class="hljs-variable">$n1</span> <span class="hljs-variable">$n2</span><br><br><br>sh testFun.sh <br>请输入一个数 n1=10<br>请输入一个数 n2=90<br>和是=100<br></code></pre></td></tr></table></figure>

<h3 id="12-13Shell-编程综合案例"><a href="#12-13Shell-编程综合案例" class="headerlink" title="12.13	Shell 编程综合案例"></a>12.13	Shell 编程综合案例</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-number">1.</span>需求分析:<br><span class="hljs-comment">(1)</span>	每天凌晨 <span class="hljs-number">2</span>:<span class="hljs-number">30</span> 备份 数据库 hspedu 到 /data/backup/db<br><span class="hljs-comment">(2)</span>	备份开始和备份结束能够给出相应的提示信息<br><span class="hljs-comment">(3)</span>	备份后的文件要求以备份时间为文件名，并打包成 .tar.gz 的形式，比如：<span class="hljs-number">2021</span><span class="hljs-number">-03</span><span class="hljs-number">-12</span>_<span class="hljs-number">230201.</span>tar.gz<br><span class="hljs-comment">(4)</span>	在备份的同时，检查是否有 <span class="hljs-number">10</span> 天前备份的数据库文件，如果有就将其删除。<br><span class="hljs-comment">(5)</span>	画一个思路分析图<br></code></pre></td></tr></table></figure>

<p><img src="https://feng-typora-picture-bed.oss-cn-beijing.aliyuncs.com/img_for_typora202307201602816.png" srcset="/img/loading.gif" lazyload alt="image-20230720160235708"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs bash">2.代码 <br>切换到/usr/sbin/目录下(该目录为root用户执行权限，使用root执行)<br>vim mysql_db.backup.sh<br>写入：<br>	<span class="hljs-comment">#备份目录</span><br>	BACKUP=/data/backup/db<br>	<br>	<span class="hljs-comment">#当前时间</span><br>	DATETIME=$(<span class="hljs-built_in">date</span> +%Y-%m-%d_%H%M%S)<br>	<span class="hljs-built_in">echo</span> <span class="hljs-variable">$DATETIME</span><br>	<br>	<span class="hljs-comment">#数据库的地址</span><br>	HOST=localhost<br>	<br>	<span class="hljs-comment">#数据库用户名</span><br>	DB_USER=root<br>	<br>	<span class="hljs-comment">#数据库密码</span><br>	DB_PW=hspedu100<br>	<br>	<span class="hljs-comment">#备份的数据库名</span><br>	DATABASE=hspedu<br><br>	<span class="hljs-comment">#创建备份目录, 如果不存在，就创建（这个应该可以用if语句写）</span><br>	[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;BACKUP&#125;</span>/<span class="hljs-variable">$&#123;DATETIME&#125;</span>&quot;</span> ] &amp;&amp; <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;BACKUP&#125;</span>/<span class="hljs-variable">$&#123;DATETIME&#125;</span>&quot;</span><br><br>	<span class="hljs-comment">#备份数据库</span><br>	mysqldump	-u<span class="hljs-variable">$&#123;DB_USER&#125;</span>	-p<span class="hljs-variable">$&#123;DB_PW&#125;</span>	--host=<span class="hljs-variable">$&#123;HOST&#125;</span>	-q	-R	--databases	<span class="hljs-variable">$&#123;DATABASE&#125;</span>	| gzip &gt; <span class="hljs-variable">$&#123;BACKUP&#125;</span>/<span class="hljs-variable">$&#123;DATETIME&#125;</span>/<span class="hljs-variable">$DATETIME</span>.sql.gz<br><br><br>	<span class="hljs-comment">#将文件处理成 tar.gz </span><br>	<span class="hljs-built_in">cd</span> <span class="hljs-variable">$&#123;BACKUP&#125;</span><br>	tar -zcvf <span class="hljs-variable">$DATETIME</span>.tar.gz <span class="hljs-variable">$&#123;DATETIME&#125;</span><br>	<br>	<span class="hljs-comment">#删除对应的备份目录</span><br>	<span class="hljs-built_in">rm</span> -rf <span class="hljs-variable">$&#123;BACKUP&#125;</span>/<span class="hljs-variable">$&#123;DATETIME&#125;</span><br><br>	<span class="hljs-comment">#删除 10 天前的备份文件</span><br>	<span class="hljs-comment">#查找BACKUP目录下10天前的备份文件 备份文件名字为 *.tar.gz 如果有删除</span><br>	find <span class="hljs-variable">$&#123;BACKUP&#125;</span> -atime +10 -name <span class="hljs-string">&quot;*.tar.gz&quot;</span> -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">rm</span> -rf &#123;&#125; \;<br>	该命令中的<span class="hljs-string">&quot;&#123;&#125;&quot;</span>是返回find命令找到的文件目录<br>	<span class="hljs-string">&quot;\;&quot;</span> 是用于标记 -<span class="hljs-built_in">exec</span> 选项的结束符。它告诉 find 命令在处理完每个文件后结束 -	<span class="hljs-built_in">exec</span> 后面的命令。需要注意的是，\; 前面的反斜杠 \ 是用于转义分号 ;，以防止 		Shell 错误地解析为命令分隔符。<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;备份数据库<span class="hljs-variable">$&#123;DATABASE&#125;</span> 成功~&quot;</span><br><br>	保存并退出<br>	<br>sh /user/sbin/mysql_db.backup.sh<br><br>&#123;&#125; ---&gt;应该可以不用写<br><br>定时：<br>	crontab -e<br>	30 2 * * * /user/sbin/mysql_db.backup.sh<br>	保存并退出<br></code></pre></td></tr></table></figure>

<h2 id="十三、Ubuntu操作实例"><a href="#十三、Ubuntu操作实例" class="headerlink" title="十三、Ubuntu操作实例"></a>十三、Ubuntu操作实例</h2><h3 id="13-1apt相关命令"><a href="#13-1apt相关命令" class="headerlink" title="13.1	apt相关命令"></a>13.1	apt相关命令</h3><ul>
<li><p>apt：Advanced Packaging Tool，是一款安装包管理工具。在Ubuntu下，我们可以使用apt命令进行软件包的安装、删除、清理等。</p>
</li>
<li><p>常用命令：</p>
<p>sudo apt-get update更新源</p>
<p>sudo apt-get install package 	安装包</p>
<p>sudo apt-get remove package 	删除包</p>
<p>sudo apt-cache search package 	搜索软件包</p>
<p>sudo apt-cache show package		获取包的相关信息,如说明、大小、版本等</p>
<p>sudo apt-get install package –reinstall  	重新安装包</p>
<p>sudo apt-get -f install  	修复安装</p>
<p>sudo apt-get remove package –purge 		删除包包括配置文件</p>
<p>sudo apt-get build-dep package	安装相关编译环境</p>
<p>sudo apt-get upgrade 更新已安装的包</p>
<p>sudo apt-get dist-upgrade	升级系统</p>
<p>sudo apt-cache depends package	了解使用该包依赖哪些包</p>
<p>sudo apt-cache rdepends package 	查看该包被哪些包依赖</p>
<p>sudo apt-get source package	 下载该包的源代码</p>
<p>修改镜像源文件	&#x2F;etc&#x2F;apt&#x2F;source.list</p>
<p>查看Ubuntu版本	cat&#x2F;proc&#x2F;version</p>
</li>
</ul>
<h3 id="13-2SSH远程登录"><a href="#13-2SSH远程登录" class="headerlink" title="13.2	SSH远程登录"></a>13.2	SSH远程登录</h3><h4 id="13-2-1Windows远程登录Ubuntu"><a href="#13-2-1Windows远程登录Ubuntu" class="headerlink" title="13.2.1	Windows远程登录Ubuntu"></a>13.2.1	Windows远程登录Ubuntu</h4><ul>
<li><p>​	安装SSH	sudo apt-get install openssh-server</p>
</li>
<li><p>​	启用SSH	systemctl start sshd</p>
</li>
</ul>
<h4 id="13-2-2Linux远程登录Ubuntu"><a href="#13-2-2Linux远程登录Ubuntu" class="headerlink" title="13.2.2	Linux远程登录Ubuntu"></a>13.2.2	Linux远程登录Ubuntu</h4><ul>
<li>​	安装和启用同上</li>
<li>​	基本语法：ssh 用户名@IP</li>
<li>​	例如：ssh <a href="mailto:&#107;&#108;&#97;&#x79;&#64;&#49;&#x39;&#50;&#46;&#x31;&#54;&#56;&#46;&#49;&#x38;&#56;&#46;&#x31;&#51;&#x30;">&#107;&#108;&#97;&#x79;&#64;&#49;&#x39;&#50;&#46;&#x31;&#54;&#56;&#46;&#49;&#x38;&#56;&#46;&#x31;&#51;&#x30;</a></li>
<li>​	使用ssh访问，如出现访问错误。可查看是否有改文件 ~&#x2F;.ssh&#x2F;known_ssh,尝试删除该文件解决问题</li>
<li>​	退出：exit或logout</li>
</ul>
<h3 id="13-3给root用户设置密码并使用"><a href="#13-3给root用户设置密码并使用" class="headerlink" title="13.3	给root用户设置密码并使用"></a>13.3	给root用户设置密码并使用</h3><ul>
<li>​	输入sudo passwd命令，设定root用户密码</li>
<li>​	设定root密码成功后，输入 su root，并输入刚才设定的root密码，就可以切换成root了。提	示符$代表一般用户，提示符#代表root用户</li>
<li>​	之后就可以使用root用户了</li>
<li>​	输入exit命令，退出root并返回一般用户</li>
</ul>
<h2 id="十四、Linux日志管理"><a href="#十四、Linux日志管理" class="headerlink" title="十四、Linux日志管理"></a>十四、Linux日志管理</h2><h3 id="14-1基本介绍"><a href="#14-1基本介绍" class="headerlink" title="14.1	基本介绍"></a>14.1	基本介绍</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-comment">(1)</span>日志文件是重要的系统信息文件，其中记录了许多重要的系统事件，包括用户的登录信息、系统的启动信息、系统的安全信息、邮件相关信息、各种服务相关信息等。<br><span class="hljs-comment">(2)</span>日志对于安全来说也很重要，它记录了系统每天发生的各种事情，通过日志来检查错误发生的原因，或者受到攻击时攻击者留下的痕迹。<br><span class="hljs-comment">(3)</span>可以这样理解 日志是用来记录重大事件的工具<br></code></pre></td></tr></table></figure>

<h3 id="14-2系统常用的日志"><a href="#14-2系统常用的日志" class="headerlink" title="14.2	系统常用的日志"></a>14.2	系统常用的日志</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">系统日志文件的保存位置：/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/ 目录下<br><br>应用案例：<br>使用 root 用户通过 xshell6 登陆，第一次使用错误的密码，第二次使用正确的密码登录成功看看在日志文件/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/secure 里有没有记录相关信息<br><br>系统常用日志：<br></code></pre></td></tr></table></figure>

<h3 id="14-3日志管理服务-rsyslogd"><a href="#14-3日志管理服务-rsyslogd" class="headerlink" title="14.3	日志管理服务 rsyslogd"></a><img src="C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\image-20230725100909441.png" srcset="/img/loading.gif" lazyload alt="image-20230725100909441">14.3	日志管理服务 rsyslogd</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">CentOS7.<span class="hljs-number">6</span> 日志服务是 rsyslogd   (rocket-fast system <span class="hljs-keyword">for</span> log)<br>CentOS6.x 日志服务是 syslogd <br>rsyslogd 功能更强大<br>rsyslogd 的使用、日志文件的格式，和 syslogd 服务是兼容的<br><br>rsyslogd是一个后台程序(服务)，来管理<span class="hljs-regexp">/记录/</span>操作相关日志。<br>将日志记录到对应的文件中。<br><br><span class="hljs-regexp">/etc/</span>rsyslog.conf配置文件中记录了要管理哪些日志和将这些日志记录到哪个文件中。<br><br>原理示意图：<br></code></pre></td></tr></table></figure>

<h3 id=""><a href="#" class="headerlink" title=""></a><img src="C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\image-20230725100936162.png" srcset="/img/loading.gif" lazyload alt="image-20230725100936162"></h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-number">1.</span>在进行日志管理时，要保证rsyslogd服务是启动的！<br><br>(<span class="hljs-number">1</span>)查询 Linux 中的 rsyslogd 服务是否启动<br>ps aux | grep <span class="hljs-string">&quot;rsyslog&quot;</span> <br><br>ps aux | grep <span class="hljs-string">&quot;rsyslog&quot;</span> | grep -v <span class="hljs-string">&quot;grep&quot;</span><br>| grep -v <span class="hljs-string">&quot;grep&quot;</span> ---&gt; 筛选出ps aux | grep <span class="hljs-string">&quot;rsyslog&quot;</span> 结果中不是grep的<br><br>(<span class="hljs-number">2</span>)查询 rsyslogd 服务的自启动状态(是否是自启动状态enable)<br>systemctl list-unit-files | grep rsyslog<br><br><br><span class="hljs-number">2.</span>配置文件：/etc/rsyslog.conf<br>该配置文件中记录了：日志和日志存放在哪个文件<br><br>关于日志：*.*<br>其中第一个*代表日志类型，第二个*代表日志级别<br><br>(<span class="hljs-number">1</span>)日志类型分为：<br>auth					##pam 产生的日志<br>authpriv				##ssh、ftp 等登录信息的验证信息<br>cron					##时间任务相关<br>kern					##内核<br>lpr						##打印<br>mail					##邮件<br>mark(syslog)-rsyslog	##服务内部的信息，时间标识<br>news					##新闻组<br>user					##用户程序产生的相关信息<br>uucp					##unix to nuix copy主机之间相关的通信<br>local <span class="hljs-number">1</span><span class="hljs-number">-7</span>				##自定义的日志设备<br><br>(<span class="hljs-number">2</span>)日志级别分为：<br>debug		##有调试信息的，日志通信最多<br>info		##一般信息日志，最常用<br>notice		##最具有重要性的普通条件的信息<br>warning		##警告级别<br>err			##错误级别，阻止某个功能或者模块不能正常工作的信息<br>crit		##严重级别，阻止整个系统或者整个软件不能正常工作的信息<br>alert		##需要立刻修改的信息<br>emerg		##内核崩溃等重要信息<br>none		##什么都不记录	<br>注意：从上到下，级别从低到高，记录信息越来越少<br><br><br><span class="hljs-number">3.</span>由日志服务 rsyslogd 记录的日志文件，<br>日志文件的内容：每一行都代表一个事件，每一行有以下四个内容：<br><span class="hljs-number">1</span>)	事件产生的时间<br><span class="hljs-number">2</span>)	产生事件的服务器的主机名<br><span class="hljs-number">3</span>)	产生事件的服务名或程序名<br><span class="hljs-number">4</span>)	事件的具体信息<br><br><br><span class="hljs-number">4.</span>日志如何查看实例<br>查看一下 /var/log/secure 日志，这个日志中记录的是用户验证和授权方面的信息 来分析如何查看<br><br><span class="hljs-number">5.</span>日志管理服务应用实例（增加自定义的日志）<br>在/etc/rsyslog.conf 中添加一个日志文件/var/log/hsp.log,当有事件发送时(比如 sshd 服务相关事件)，该文件会接收到信息并保存. <br>给小伙伴演示 重启，登录 的情况，看看是否有日志保存<br><br>vim /etc/rsyslog.conf <br>写入：<br>	*.*  		/var/log/hsp.log<br>	保存退出<br>&gt; /var/log/hsp.log  (创建日志文件)<br>然后重启，重启事件会被记录到/var/log/hsp.log中<br>cat hsp.log | grep sshd 	就可以查到信息(sshd远程连接)<br></code></pre></td></tr></table></figure>

<h3 id="14-4日志轮替"><a href="#14-4日志轮替" class="headerlink" title="14.4	日志轮替"></a>14.4	日志轮替</h3><h4 id="14-4-1基本介绍"><a href="#14-4-1基本介绍" class="headerlink" title="14.4.1	基本介绍"></a>14.4.1	基本介绍</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode">日志轮替<span class="hljs-comment">(logrotate)</span>就是把旧的日志文件移动并改名，同时建立新的空日志文件，当旧日志文件超出保存的范围之后，就会进行删除<br>清除日志中旧的信息<br></code></pre></td></tr></table></figure>

<h4 id="14-4-2日志轮替文件命名"><a href="#14-4-2日志轮替文件命名" class="headerlink" title="14.4.2	日志轮替文件命名"></a>14.4.2	日志轮替文件命名</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">(<span class="hljs-number">1</span>)	centos7 使用 logrotate 进行日志轮替管理<br>要想改变日志轮替文件名字，通过 <span class="hljs-regexp">/etc/</span>logrotate.conf 配置文件中“dateext” 参数<br><br>(<span class="hljs-number">2</span>)	如果配置文件中有“dateext”参数，那么日志会用日期来作为日志文件的后缀，例如 “secure-<span class="hljs-number">20201010</span>”。<br>这样日志文件名不会重叠，也就不需要日志文件的改名，只需要指定保存日志个数，删除多余的日志文件即可。<br><br>(<span class="hljs-number">3</span>)	如果配置文件中没有“dateext”参数，日志文件就需要进行改名了。<br>当第一次进行日志轮替时，当前的“secure”日志会自动改名为“secure.<span class="hljs-number">1</span>”，然后新建“secure”日志， 用来保存新的日志。<br>当第二次进行日志轮替时，“secure.<span class="hljs-number">1</span>” 会自动改名为“secure.<span class="hljs-number">2</span>”， 当前的“secure”日志会自动改名为“secure.<span class="hljs-number">1</span>”，然后也会新建“secure”日志，用来保存新的日志，以此类推。<br></code></pre></td></tr></table></figure>

<h4 id="14-4-3logrotate配置文件"><a href="#14-4-3logrotate配置文件" class="headerlink" title="14.4.3	logrotate配置文件"></a>14.4.3	logrotate配置文件</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>logrotate.conf 为 logrotate 的全局配置文件(写了日志文件轮替规则)<br><br><span class="hljs-regexp">/etc/</span>logrotate.conf中的轮替规则适用于所有日志文件(除了单独指定轮替规则的日志文件)<br>可以在<span class="hljs-regexp">/etc/</span>logrotate.conf对某些日志文件单独指定轮替规则<br>也可以把对某些日志文件单独指定的轮替规则写在<span class="hljs-regexp">/etc/</span>logrotate.d目录下，然后在<span class="hljs-regexp">/etc/</span>logrotate.conf 中include调用<br><br><span class="hljs-regexp">/etc/</span>logrotate.conf文件内容：<br>	<span class="hljs-comment"># rotate log files weekly---&gt;每周对日志文件进行一次轮替</span><br>	weekly<br>	<br>	<span class="hljs-comment"># keep 4 weeks worth of backlogs---&gt;共保存 4 份日志文件，当建立新的日志文件时，旧的将会被删除</span><br>	rotate <span class="hljs-number">4</span><br>	<br>	<span class="hljs-comment"># create new (empty) log files after rotating old ones---&gt;创建新的空的日志文件，在日志轮替后</span><br>	create<br>	<br>	<span class="hljs-comment"># use date as a suffix of the rotated file---&gt;使用日期作为日志轮替文件的后缀</span><br>	dateext<br>	<br>	<span class="hljs-comment"># uncomment this if you want your log files compressed---&gt;日志文件是否压缩。如果取消注释，则日志会在转储的同时进行压缩</span><br>	<span class="hljs-comment">#compress</span><br>	<br>	<span class="hljs-comment">#RPM packages drop log rotation information into this directory </span><br>	include <span class="hljs-regexp">/etc/</span>logrotate.d---&gt;可以把一些单独的轮替规则写在<span class="hljs-regexp">/etc/</span>logrotate.d下(在本文件中include调用一下就行)，也可以写在本文件中(如下面写的)<br>	<br>	<span class="hljs-comment">#下面是单独设置，优先级更高。</span><br>	<span class="hljs-comment"># no packages own wtmp and btmp -- we&#x27;ll rotate them here</span><br>	<span class="hljs-regexp">/var/</span>log/wtmp &#123;<br>		monthly					 <span class="hljs-comment"># 每月对日志文件进行一次轮替</span><br>		create <span class="hljs-number">0664</span> root utmp 	 <span class="hljs-comment"># 建立的新日志文件，权限是 0664  ，所有者是 root ，所属组是 utmp 组</span><br>		minsize <span class="hljs-number">1</span>M				 <span class="hljs-comment"># 日志文件最小轮替大小是 1MB 。也就是日志一定要超过 1MB 才会轮替，否则就算时间达到一个月，也不进行日志转储</span><br>		rotate <span class="hljs-number">1</span> 				 <span class="hljs-comment"># 仅保留一个日志备份。也就是只有 wtmp  和 wtmp.1  日志保留而已</span><br>	&#125;<br>	<br>	<span class="hljs-regexp">/var/</span>log/btmp &#123;<br>		missingok 				 <span class="hljs-comment"># 如果日志不存在，则忽略该日志的警告信息</span><br>		monthly<br>		create <span class="hljs-number">0600</span> root utmp rotate <span class="hljs-number">1</span><br>	&#125;<br>	<br><br><br><br>	单独指定某个日志文件的轮替规则的参数说明：<br>		daily					日志的轮替周期是每天<br>		weekly					日志的轮替周期是每周<br>		monthly					日志的轮替周期是每月<br>		rotate 数字				保留的日志文件的个数。<span class="hljs-number">0</span> 指没有备份<br>		compress				日志轮替时，旧的日志进行压缩<br>		create mode owner group	建立新日志，同时指定新日志的权限与所有者和所属组。<br>		mail address			当日志轮替时，输出内容通过邮件发送到指定的邮件地址。<br>		missingok				如果日志不存在，则忽略该日志的警告信息<br>		notifempty				如果日志为空文件，则不进行日志轮替<br>		minsize 大小				日志轮替的最小值。也就是日志一定要达到这个最小值才会轮替，否则就算时间达到也不轮替<br>		size 大小				日志只有大于指定大小才进行日志轮替，而不是按照时间轮替。<br>		dateext					使用日期作为日志轮替文件的后缀。<br>		sharedscripts			在此关键字之后的脚本只执行一次。<br>		prerotate/endscript		在日志轮替之前执行脚本命令。<br>		postrotate/endscript	在日志轮替之后执行脚本命令。<br></code></pre></td></tr></table></figure>

<h4 id="14-4-4把自己的日志加入日志轮替"><a href="#14-4-4把自己的日志加入日志轮替" class="headerlink" title="14.4.4	把自己的日志加入日志轮替"></a>14.4.4	把自己的日志加入日志轮替</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-number">1</span>)	第一种方法：<br>		直接在<span class="hljs-regexp">/etc/</span>logrotate.conf 配置文件中写入该日志的轮替策略<br><span class="hljs-number">2</span>)	第二种方法：<br>		在<span class="hljs-regexp">/etc/</span>logrotate.d/目录中新建立该日志的轮替文件，在该轮替文件中写入正确的轮替策略，因为该目录中的文件都会被“<span class="hljs-keyword">include</span>”到主配置文件中，所以也可以把日志加入轮替。<br><br><span class="hljs-number">3</span>)	推荐使用第二种方法，因为系统中需要轮替的日志非常多，如果全都直接写 入<span class="hljs-regexp">/etc/</span>logrotate.conf 配置文件，那么这个文件的可管理性就会非常差，不利于此文件的维护。<br></code></pre></td></tr></table></figure>

<h4 id="14-4-5应用实例"><a href="#14-4-5应用实例" class="headerlink" title="14.4.5	应用实例"></a>14.4.5	应用实例</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">案例：在<span class="hljs-regexp">/etc/</span>logrotate.conf 进行配置, 或者直接在 <span class="hljs-regexp">/etc/</span>logrotate.d/ 下创建文件 hsplog  <br>编写如下内容,	具体轮替的效果 可以参考 <span class="hljs-regexp">/var/</span>log  下的 boot.log 情况.<br></code></pre></td></tr></table></figure>

<p><img src="C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\image-20230725100555724.png" srcset="/img/loading.gif" lazyload alt="image-20230725100555724"></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gradle">在 <span class="hljs-regexp">/etc/</span>logrotate.d/ 下创建文件 hsplog  <br>vim  hsplog  <br>写入：<br>	<span class="hljs-regexp">/var/</span>log/hsp.log<br>	&#123;<br>		missingok<br>		daily<br>		copytruncate<br>		rotate <span class="hljs-number">1</span><br>		notifempty<br>	&#125;<br>	保存退出<br><br>这样就好了，因为<span class="hljs-regexp">/etc/</span>logrotate.conf 中有：<span class="hljs-keyword">include</span> <span class="hljs-regexp">/etc/</span>logrotate.d<br></code></pre></td></tr></table></figure>

<h3 id="14-5日志轮替机制原理"><a href="#14-5日志轮替机制原理" class="headerlink" title="14.5	日志轮替机制原理"></a>14.5	日志轮替机制原理</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">日志轮替之所以可以在指定的时间备份日志，是依赖系统定时任务。<br>在 <span class="hljs-regexp">/etc/</span>cron.daily/目录，就会发现这个目录中是有 logrotate 文件(可执行)，<br>logrotate 通过这个文件依赖定时任务执行的。<br><br>crond定时后台程序会定时执行cron.daily内的文件<br>logrotate 文件在cron.daily下<br>所以也会定时执行文件中的轮替规则<br><br><br>写日志是rsyslogd<br>日志轮替是logrotate<br></code></pre></td></tr></table></figure>

<h3 id="14-6查看内存日志"><a href="#14-6查看内存日志" class="headerlink" title="14.6	查看内存日志"></a>14.6	查看内存日志</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs routeros">有一些日志是写到内存里的，还没有写到文件里，因为这些日志是实时变化的<br>重启之后内存日志会被清空<br><br>查看内存日志指令：journalctl<br>journalctl				查看全部<br>journalctl -n 3			查看最新 3 条<br>journalctl --since 19:00	--until 19:10:10	查看起始时间到结束时间的日志可加日期<br>journalctl -p err		报错日志<br>journalctl -o verbose	日志详细内容<br>journalctl <span class="hljs-attribute">_PID</span>=1245 <span class="hljs-attribute">_COMM</span>=sshd	查看包含这些参数的日志（在详细日志查看） 或者 journalctl |	grep sshd<br> <br><br>注意: journalctl	查看的是内存日志, 重启清空<br><br>演示案例:<br>使用 journalctl | grep sshd	来看看用户登录清空, 重启系统，再次查询，看看日志有什么变化没有<br></code></pre></td></tr></table></figure>

<h2 id="十五、Linux系统-备份与恢复"><a href="#十五、Linux系统-备份与恢复" class="headerlink" title="十五、Linux系统-备份与恢复"></a>十五、Linux系统-备份与恢复</h2><h3 id="15-1基本介绍"><a href="#15-1基本介绍" class="headerlink" title="15.1	基本介绍"></a>15.1	基本介绍</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">虚拟机可以做快照。<br>实体机无法做快照，如果系统出现异常或者数据损坏，后果严重，要重做系统，还会造成数据丢失。<br>所以我们可以使用备份和恢复技术<br><br>linux 的备份和恢复很简单，有两种方式：<br>(<span class="hljs-number">1</span>)	把需要的文件(或者分区)用 TAR 打包就行，下次需要恢复的时候，再解压开覆盖即可<br>(<span class="hljs-number">2</span>)	使用 dump 和 restore 命令<br></code></pre></td></tr></table></figure>

<h3 id="15-2安装dump和restore"><a href="#15-2安装dump和restore" class="headerlink" title="15.2	安装dump和restore"></a>15.2	安装dump和restore</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">如果 linux 上没有 dump  和 restore 指令，要先安装<br>yum -y <span class="hljs-keyword">install</span> dump <br>yum -y <span class="hljs-keyword">install</span> restore<br></code></pre></td></tr></table></figure>

<h3 id="15-3使用dump完成备份"><a href="#15-3使用dump完成备份" class="headerlink" title="15.3	使用dump完成备份"></a>15.3	使用dump完成备份</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-number">1</span>.基本介绍：<br><span class="hljs-keyword">dump</span> 支持分卷和增量备份（所谓增量备份是指备份上次备份后，修改/增加过的文件，也称差异备份）<br><br><span class="hljs-number">2</span>.语法说明：<br><span class="hljs-keyword">dump</span> [-cu] [-<span class="hljs-number">123456789</span>]	[-f &lt;备份后文件名&gt;] [-T &lt;日期&gt;] [要备份的目录或文件系统] <br><span class="hljs-keyword">dump</span> [] -wW<br><br>选项说明：<br>	-c 					创建新的归档文件，并将由一个或多个文件参数所指定的内容写入归档文件的开头。<br>	-<span class="hljs-number">0123456789</span> 		备份的层级。<span class="hljs-number">0</span> 为最完整备份，会备份所有文件。若指定 <span class="hljs-number">0</span> 以上的层级，则备份至上一次备份以来修改或新增的文件，到 <span class="hljs-number">9</span> 后，可以再次轮替.<br>	-f &lt;备份后文件名&gt; 	指定备份后文件名<br>	-j					调用 bzlib 库压缩备份文件，也就是将备份后的文件压缩成 bz2 格式，让文件更小<br>	-T &lt;日期&gt; 			指定开始备份的时间与日期<br>	-u 					备份完毕后，在<span class="hljs-regexp">/etc/</span>dumpdares 中记录备份的文件系统，层级，日期与时间等。<br>	-t  				指定文件名，若该文件已存在备份文件中，则列出名称<br>	-W 					显示需要备份的文件及其最后一次备份的层级，时间，日期。<br>	-w 					与-W 类似，但仅显示需要备份的文件。<br><br>进行增量备份/备份层级要加-u，因为-u可以记录层级<br><br><span class="hljs-number">3</span>.案例<br>案例 <span class="hljs-number">1</span>：将<span class="hljs-regexp">/boot 分区所有内容备份到/</span>opt/boot.bak0.bz2 文件中，备份层级为“<span class="hljs-number">0</span>”<br><span class="hljs-keyword">dump</span> -<span class="hljs-number">0</span>uj -f <span class="hljs-regexp">/opt/</span>boot.bak0.bz2	/boot<br>/boot 要备份的分区<br><br>案例 <span class="hljs-number">2</span>：在/boot 目录下增加新文件，备份层级为“<span class="hljs-number">1</span>”(只备份上次使用层次“<span class="hljs-number">0</span>”备份后发生过改变的数据), 注意比较看看这次生成的备份文件 boot1.bak  有多大<br><span class="hljs-keyword">dump</span> -<span class="hljs-number">1</span>uj -f <span class="hljs-regexp">/opt/</span>boot.bak1.bz2 /boot<br><br><br>注意：通过 <span class="hljs-keyword">dump</span> 命令在配合 crontab 可以实现无人值守备份<br>写一个脚本<br><br><br><span class="hljs-number">4</span>. 显示需要备份的文件及其最后一次备份的层级，时间，日期<br><span class="hljs-keyword">dump</span> -W<br><br><br><span class="hljs-number">5</span>.查看备份时间文件<br>cat <span class="hljs-regexp">/etc/</span>dumpdates<br><br><br><span class="hljs-number">6</span>.<span class="hljs-keyword">dump</span> 备份文件或者目录<br>前面我们在备份分区时，是可以支持增量备份的，<br>如果备份文件或者目录，不再支持增量备份, 即只能使用 <span class="hljs-number">0</span> 级别备份(-u不能写)<br><br>案例：使用 <span class="hljs-keyword">dump</span> 备份 /etc 整个目录<br><span class="hljs-keyword">dump</span> -<span class="hljs-number">0</span>j -f <span class="hljs-regexp">/opt/</span>etc.bak.bz2 <span class="hljs-regexp">/etc/</span> <br><br>#下面这条语句会报错，提示 <span class="hljs-keyword">DUMP</span>: Only level <span class="hljs-number">0</span> dumps are allowed on a subdirectory <br><span class="hljs-keyword">dump</span> -<span class="hljs-number">1</span>j -f <span class="hljs-regexp">/opt/</span>etc.bak.bz2 <span class="hljs-regexp">/etc/</span><br><br><br>注意：如果要备份重要的文件，比如数据区，建议将文件上传到其它服务器保存，不要将鸡蛋放在同一个篮子。<br></code></pre></td></tr></table></figure>

<h3 id="15-4使用restore完成恢复"><a href="#15-4使用restore完成恢复" class="headerlink" title="15.4	使用restore完成恢复"></a>15.4	使用restore完成恢复</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>.基本介绍：<br>restore 命令用来恢复已备份的文件，可以从 dump 生成的备份文件中恢复原文件<br><br><span class="hljs-number">2</span>.基本语法：<br>restore	[模式选项] [选项]<br><br>模式选项说明：不能混用，在一次命令中，只能指定一种。<br>	-C	使用对比模式，将备份的文件与已存在的文件相互对比，看看是否存在差异<br>	-i	使用交互模式，在进行还原操作时，restore 指令将依序询问用户<br>	-r	进行还原模式 （一般用这个）<br>	-t 	查看模式，看备份文件有哪些文件<br>	<br>选项<br>-f &lt;备份设备&gt; 	从指定的文件中读取备份数据，进行还原操作<br><br><span class="hljs-number">3</span>.案例：<br>案例 <span class="hljs-number">1</span>：restore 命令比较模式，比较备份文件和原文件的区别测试<br>mv <span class="hljs-regexp">/boot/</span>hello.java <span class="hljs-regexp">/boot/</span>hello100.java<br>restore -C -f boot.bak1.bz2	<span class="hljs-regexp">//</span>注意和 最新的文件比较<br><br>mv <span class="hljs-regexp">/boot/</span>hello100.java <span class="hljs-regexp">/boot/</span>hello.java <br>restore -C -f boot.bak1.bz2<br> <br>案例 <span class="hljs-number">2</span>：restore 命令查看模式，看备份文件有哪些数据/文件<br>restore -t -f boot.bak0.bz2<br><br><br>案例 <span class="hljs-number">3</span>：restore 命令还原模式<br>注意细节：如果你有增量备份，需要把增量备份文件也进行恢复，有几个增量备份文件，就要恢复几个，按顺序来恢复即可。<br>mkdir <span class="hljs-regexp">/opt/</span>boottmp <br>cd <span class="hljs-regexp">/opt/</span>boottmp<br>restore -r -f <span class="hljs-regexp">/opt/</span>boot.bak0.bz2 <span class="hljs-regexp">//</span>恢复到第 <span class="hljs-number">1</span> 次完全备份状态<br>restore -r -f <span class="hljs-regexp">/opt/</span>boot.bak1.bz2 <span class="hljs-regexp">//</span>恢复到第 <span class="hljs-number">2</span> 次增量备份状态<br><br><br>案例 <span class="hljs-number">4</span>：restore 命令恢复备份的文件，或者整个目录的文件<br>基本语法： restore -r -f 备份好的文件<br><br>[root@hspedu100 opt]<span class="hljs-comment"># mkdir etctmp </span><br>[root@hspedu100 opt]<span class="hljs-comment"># cd etctmp/</span><br>[root@hspedu100 etctmp]<span class="hljs-comment"># restore -r -f /opt/etc.bak0.bz2</span><br></code></pre></td></tr></table></figure>

<h2 id="困扰我很久的ssh"><a href="#困扰我很久的ssh" class="headerlink" title="困扰我很久的ssh"></a>困扰我很久的ssh</h2><h3 id="SSH连接的工作原理"><a href="#SSH连接的工作原理" class="headerlink" title="SSH连接的工作原理"></a>SSH连接的工作原理</h3><p>当你建立SSH连接时，以下是发生的事情：</p>
<ol>
<li><strong>生成密钥对</strong>：你的计算机会生成一对公钥和私钥。</li>
<li><strong>将公钥添加到远程服务器</strong>：你将你的公钥（<code>id_rsa.pub</code>文件的内容）添加到远程服务器的<code>~/.ssh/authorized_keys</code>文件中。这样，服务器就知道了你的公钥，可以用它加密发送给你的数据。</li>
<li><strong>连接时的加密</strong>：当你尝试连接到服务器时，服务器会使用你的公钥加密一个随机生成的会话密钥，并将它发送给你。</li>
<li><strong>使用私钥解密会话密钥</strong>：你的计算机使用你的私钥解密收到的会话密钥。</li>
<li><strong>使用会话密钥进行加密通信</strong>：现在，你的计算机和服务器都有了相同的会话密钥，它们使用这个密钥进行加密和解密通信。</li>
</ol>
<p>这个过程保证了通信的保密性，因为只有你持有私钥，能够解密服务器发送的会话密钥，从而确保了只有你和服务器知道通信内容。</p>
<p>通过使用非对称加密，SSH提供了一种非常安全的远程连接方式，保护了通信的隐私和数据的完整性。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%BC%96%E7%A8%8B/" class="category-chain-item">编程</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/linux/">#linux</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>linux韩顺平</div>
      <div>http://klayforever.cn/2023/06/29/Linux学习（韩顺平）/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Klay</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年6月29日</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>更新于</div>
          <div>2023年10月10日</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/07/13/100%E7%AF%87%E9%A1%B6%E4%BC%9A%E8%AE%BA%E6%96%87transformer/" title="Transformer论文合集">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Transformer论文合集</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/06/16/TCPIP/" title="TCP/IP">
                        <span class="hidden-mobile">TCP/IP</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
